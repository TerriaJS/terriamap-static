"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
((self || window)["webpackChunkterriajs_map"] = (self || window)["webpackChunkterriajs_map"] || []).push([["vendors-node_modules_terriajs_lib_ReactViews_Tools_DiffTool_DiffTool_tsx"],{

/***/ "./node_modules/terriajs/lib/ReactViews/Tools/DiffTool/DatePicker.tsx":
/*!****************************************************************************!*\
  !*** ./node_modules/terriajs/lib/ReactViews/Tools/DiffTool/DatePicker.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"./node_modules/core-js/modules/web.dom-collections.iterator.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dateformat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dateformat */ \"./node_modules/dateformat/lib/dateformat.js\");\n/* harmony import */ var mobx_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mobx-react */ \"./node_modules/mobx-react/dist/mobxreact.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-i18next */ \"./node_modules/react-i18next/dist/es/useTranslation.js\");\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! styled-components */ \"./node_modules/styled-components/dist/styled-components.browser.esm.js\");\n/* harmony import */ var terriajs_cesium_Source_Core_JulianDate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! terriajs-cesium/Source/Core/JulianDate */ \"./node_modules/terriajs-cesium/Source/Core/JulianDate.js\");\n/* harmony import */ var _Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../Models/Definition/CommonStrata */ \"./node_modules/terriajs/lib/Models/Definition/CommonStrata.ts\");\n/* harmony import */ var _Styled_Box__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../Styled/Box */ \"./node_modules/terriajs/lib/Styled/Box.tsx\");\n/* harmony import */ var _Styled_Button__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../Styled/Button */ \"./node_modules/terriajs/lib/Styled/Button.tsx\");\n/* harmony import */ var _Styled_Icon__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../Styled/Icon */ \"./node_modules/terriajs/lib/Styled/Icon.tsx\");\n/* harmony import */ var _Styled_Spacing__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../Styled/Spacing */ \"./node_modules/terriajs/lib/Styled/Spacing.tsx\");\n/* harmony import */ var _Styled_Text__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../Styled/Text */ \"./node_modules/terriajs/lib/Styled/Text.tsx\");\n/* harmony import */ var _BottomDock_Timeline_DateFormats__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../BottomDock/Timeline/DateFormats */ \"./node_modules/terriajs/lib/ReactViews/BottomDock/Timeline/DateFormats.ts\");\n/* harmony import */ var _BottomDock_Timeline_DateTimePicker__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../BottomDock/Timeline/DateTimePicker */ \"./node_modules/terriajs/lib/ReactViews/BottomDock/Timeline/DateTimePicker.tsx\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react/jsx-runtime */ \"./node_modules/react/jsx-runtime.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DatePicker = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)((props, ref) => {\n  const {\n    heading,\n    item,\n    onDateSet\n  } = props;\n  const {\n    t\n  } = (0,react_i18next__WEBPACK_IMPORTED_MODULE_4__.useTranslation)();\n  const [isOpen, setIsOpen] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  const currentDate = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    const date = item.currentDiscreteJulianDate;\n    return date && terriajs_cesium_Source_Core_JulianDate__WEBPACK_IMPORTED_MODULE_6__[\"default\"].toDate(date);\n  }, [item.currentDiscreteJulianDate]);\n  const formattedCurrentDate = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    if (currentDate === undefined) {\n      return;\n    }\n    const dateFormatting = undefined; // TODO\n    const formattedDate = dateFormatting !== undefined ? (0,dateformat__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(currentDate, dateFormatting) : (0,_BottomDock_Timeline_DateFormats__WEBPACK_IMPORTED_MODULE_13__.formatDateTime)(currentDate);\n    return formattedDate;\n  }, [currentDate]);\n  const toggleOpen = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n    setIsOpen(!isOpen);\n  }, [isOpen]);\n  const changeCurrentDate = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(date => {\n    item.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_7__[\"default\"].user, \"currentTime\", date.toISOString());\n    onDateSet();\n  }, [item, onDateSet]);\n  const moveToPreviousDate = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n    item.moveToPreviousDiscreteTime(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_7__[\"default\"].user);\n    onDateSet();\n  }, [item, onDateSet]);\n  const moveToNextDate = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n    item.moveToNextDiscreteTime(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_7__[\"default\"].user);\n    onDateSet();\n  }, [item, onDateSet]);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useImperativeHandle)(ref, () => {\n    return {\n      open: () => {\n        setIsOpen(true);\n      },\n      close: () => {\n        setIsOpen(false);\n      }\n    };\n  }, []);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n    column: true,\n    centered: true,\n    flex: 1,\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n      bottom: 4\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n      centered: true,\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_StyledStyledIcon, {\n        light: true,\n        styledWidth: \"21px\",\n        glyph: _Styled_Icon__WEBPACK_IMPORTED_MODULE_10__[\"default\"].GLYPHS.calendar2,\n        $_css: \"margin-top:-2px;\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n        right: 2\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n        textLight: true,\n        extraLarge: true,\n        children: heading\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n      bottom: 2\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(PrevButton, {\n        disabled: item.isPreviousDiscreteTimeAvailable === false,\n        title: t(\"diffTool.datePicker.previousDateTitle\"),\n        onClick: moveToPreviousDate\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(DateButton, {\n        primary: true,\n        isOpen: isOpen,\n        onClick: toggleOpen,\n        title: t(\"diffTool.datePicker.dateButtonTitle\"),\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_12__.TextSpan, {\n          extraLarge: true,\n          children: formattedCurrentDate || \"-\"\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(NextButton, {\n        disabled: item.isNextDiscreteTimeAvailable === false,\n        title: t(\"diffTool.datePicker.nextDateTitle\"),\n        onClick: moveToNextDate\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(\"div\", {\n      style: {\n        display: isOpen ? \"block\" : \"none\",\n        position: \"absolute\"\n      },\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_BottomDock_Timeline_DateTimePicker__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n        currentDate: currentDate,\n        dates: item.objectifiedDates,\n        onChange: changeCurrentDate,\n        openDirection: \"up\",\n        isOpen: isOpen,\n        onClose: () => setIsOpen(false)\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n      bottom: 4\n    })]\n  });\n});\nDatePicker.displayName = \"DatePicker\";\nconst PagerButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(_Styled_Button__WEBPACK_IMPORTED_MODULE_9__[\"default\"]).attrs({\n  iconProps: {\n    css: \"margin-right:0;\"\n  }\n}).withConfig({\n  displayName: \"DatePicker__PagerButton\",\n  componentId: \"sc-11kes1x-0\"\n})([\"cursor:pointer;background-color:\", \";width:40px;border:1px solid transparent;\", \" flex-direction:column;\"], props => props.theme.colorPrimary, _ref => {\n  let {\n    theme\n  } = _ref;\n  return theme.centerWithFlex();\n});\nconst PrevButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(PagerButton).attrs({\n  renderIcon: () => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_StyledStyledIcon2, {\n    light: true,\n    styledWidth: \"15px\",\n    glyph: _Styled_Icon__WEBPACK_IMPORTED_MODULE_10__[\"default\"].GLYPHS.arrowDown\n  })\n}).withConfig({\n  displayName: \"DatePicker__PrevButton\",\n  componentId: \"sc-11kes1x-1\"\n})([\"\", \" margin-right:1px;\"], _ref2 => {\n  let {\n    theme\n  } = _ref2;\n  return theme.borderRadiusLeft(theme.radius40Button);\n});\nconst NextButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(PagerButton).attrs({\n  renderIcon: () => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_StyledStyledIcon3, {\n    light: true,\n    styledWidth: \"15px\",\n    glyph: _Styled_Icon__WEBPACK_IMPORTED_MODULE_10__[\"default\"].GLYPHS.arrowDown\n  })\n}).withConfig({\n  displayName: \"DatePicker__NextButton\",\n  componentId: \"sc-11kes1x-2\"\n})([\"\", \" margin-left:1px;\"], _ref3 => {\n  let {\n    theme\n  } = _ref3;\n  return theme.borderRadiusRight(theme.radius40Button);\n});\nconst DateButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(_Styled_Button__WEBPACK_IMPORTED_MODULE_9__[\"default\"]).withConfig({\n  displayName: \"DatePicker__DateButton\",\n  componentId: \"sc-11kes1x-3\"\n})([\"z-index:0;\", \";border-radius:0px;border:1px solid \", \";min-width:235px;@media (max-width:\", \"px){min-width:150px;}\"], props => props.isOpen && \"z-index: 1000;\", props => props.theme.colorPrimary, props => props.theme.lg);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,mobx_react__WEBPACK_IMPORTED_MODULE_2__.observer)(DatePicker));\nvar _StyledStyledIcon = (0,styled_components__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(_Styled_Icon__WEBPACK_IMPORTED_MODULE_10__.StyledIcon).withConfig({\n  displayName: \"DatePicker___StyledStyledIcon\",\n  componentId: \"sc-11kes1x-4\"\n})([\"\", \"\"], p => p.$_css);\nvar _StyledStyledIcon2 = (0,styled_components__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(_Styled_Icon__WEBPACK_IMPORTED_MODULE_10__.StyledIcon).withConfig({\n  displayName: \"DatePicker___StyledStyledIcon2\",\n  componentId: \"sc-11kes1x-5\"\n})([\"transform:rotate(90deg);\"]);\nvar _StyledStyledIcon3 = (0,styled_components__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(_Styled_Icon__WEBPACK_IMPORTED_MODULE_10__.StyledIcon).withConfig({\n  displayName: \"DatePicker___StyledStyledIcon3\",\n  componentId: \"sc-11kes1x-6\"\n})([\"transform:rotate(270deg);\"]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdGVycmlhanMvbGliL1JlYWN0Vmlld3MvVG9vbHMvRGlmZlRvb2wvRGF0ZVBpY2tlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBYUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFjQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3RlcnJpYWpzLW1hcC8uL25vZGVfbW9kdWxlcy90ZXJyaWFqcy9saWIvUmVhY3RWaWV3cy9Ub29scy9EaWZmVG9vbC9EYXRlUGlja2VyLnRzeD9kODNiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkYXRlRm9ybWF0IGZyb20gXCJkYXRlZm9ybWF0XCI7XG5pbXBvcnQgeyBvYnNlcnZlciB9IGZyb20gXCJtb2J4LXJlYWN0XCI7XG5pbXBvcnQge1xuICBmb3J3YXJkUmVmLFxuICB1c2VDYWxsYmFjayxcbiAgdXNlSW1wZXJhdGl2ZUhhbmRsZSxcbiAgdXNlTWVtbyxcbiAgdXNlU3RhdGVcbn0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gXCJyZWFjdC1pMThuZXh0XCI7XG5pbXBvcnQgc3R5bGVkIGZyb20gXCJzdHlsZWQtY29tcG9uZW50c1wiO1xuaW1wb3J0IEp1bGlhbkRhdGUgZnJvbSBcInRlcnJpYWpzLWNlc2l1bS9Tb3VyY2UvQ29yZS9KdWxpYW5EYXRlXCI7XG5pbXBvcnQgRGlmZmFibGVNaXhpbiBmcm9tIFwiLi4vLi4vLi4vTW9kZWxNaXhpbnMvRGlmZmFibGVNaXhpblwiO1xuaW1wb3J0IENvbW1vblN0cmF0YSBmcm9tIFwiLi4vLi4vLi4vTW9kZWxzL0RlZmluaXRpb24vQ29tbW9uU3RyYXRhXCI7XG5pbXBvcnQgQm94IGZyb20gXCIuLi8uLi8uLi9TdHlsZWQvQm94XCI7XG5pbXBvcnQgQnV0dG9uIGZyb20gXCIuLi8uLi8uLi9TdHlsZWQvQnV0dG9uXCI7XG5pbXBvcnQgSWNvbiwgeyBTdHlsZWRJY29uIH0gZnJvbSBcIi4uLy4uLy4uL1N0eWxlZC9JY29uXCI7XG5pbXBvcnQgU3BhY2luZyBmcm9tIFwiLi4vLi4vLi4vU3R5bGVkL1NwYWNpbmdcIjtcbmltcG9ydCBUZXh0LCB7IFRleHRTcGFuIH0gZnJvbSBcIi4uLy4uLy4uL1N0eWxlZC9UZXh0XCI7XG5pbXBvcnQgeyBmb3JtYXREYXRlVGltZSB9IGZyb20gXCIuLi8uLi9Cb3R0b21Eb2NrL1RpbWVsaW5lL0RhdGVGb3JtYXRzXCI7XG5pbXBvcnQgRGF0ZVRpbWVQaWNrZXIgZnJvbSBcIi4uLy4uL0JvdHRvbURvY2svVGltZWxpbmUvRGF0ZVRpbWVQaWNrZXJcIjtcblxuaW50ZXJmYWNlIFByb3BzVHlwZSB7XG4gIGhlYWRpbmc6IHN0cmluZztcbiAgaXRlbTogRGlmZmFibGVNaXhpbi5JbnN0YW5jZTtcbiAgb25EYXRlU2V0OiAoKSA9PiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEYXRlUGlja2VySGFuZGxlIHtcbiAgb3BlbjogKCkgPT4gdm9pZDtcbiAgY2xvc2U6ICgpID0+IHZvaWQ7XG59XG5cbmNvbnN0IERhdGVQaWNrZXIgPSBmb3J3YXJkUmVmPElEYXRlUGlja2VySGFuZGxlLCBQcm9wc1R5cGU+KChwcm9wcywgcmVmKSA9PiB7XG4gIGNvbnN0IHsgaGVhZGluZywgaXRlbSwgb25EYXRlU2V0IH0gPSBwcm9wcztcbiAgY29uc3QgeyB0IH0gPSB1c2VUcmFuc2xhdGlvbigpO1xuICBjb25zdCBbaXNPcGVuLCBzZXRJc09wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIGNvbnN0IGN1cnJlbnREYXRlID0gdXNlTWVtbygoKTogRGF0ZSB8IHVuZGVmaW5lZCA9PiB7XG4gICAgY29uc3QgZGF0ZSA9IGl0ZW0uY3VycmVudERpc2NyZXRlSnVsaWFuRGF0ZTtcbiAgICByZXR1cm4gZGF0ZSAmJiBKdWxpYW5EYXRlLnRvRGF0ZShkYXRlKTtcbiAgfSwgW2l0ZW0uY3VycmVudERpc2NyZXRlSnVsaWFuRGF0ZV0pO1xuXG4gIGNvbnN0IGZvcm1hdHRlZEN1cnJlbnREYXRlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgaWYgKGN1cnJlbnREYXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZGF0ZUZvcm1hdHRpbmcgPSB1bmRlZmluZWQ7IC8vIFRPRE9cbiAgICBjb25zdCBmb3JtYXR0ZWREYXRlID1cbiAgICAgIGRhdGVGb3JtYXR0aW5nICE9PSB1bmRlZmluZWRcbiAgICAgICAgPyBkYXRlRm9ybWF0KGN1cnJlbnREYXRlLCBkYXRlRm9ybWF0dGluZylcbiAgICAgICAgOiBmb3JtYXREYXRlVGltZShjdXJyZW50RGF0ZSk7XG4gICAgcmV0dXJuIGZvcm1hdHRlZERhdGU7XG4gIH0sIFtjdXJyZW50RGF0ZV0pO1xuXG4gIGNvbnN0IHRvZ2dsZU9wZW4gPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgc2V0SXNPcGVuKCFpc09wZW4pO1xuICB9LCBbaXNPcGVuXSk7XG5cbiAgY29uc3QgY2hhbmdlQ3VycmVudERhdGUgPSB1c2VDYWxsYmFjayhcbiAgICAoZGF0ZTogRGF0ZSkgPT4ge1xuICAgICAgaXRlbS5zZXRUcmFpdChDb21tb25TdHJhdGEudXNlciwgXCJjdXJyZW50VGltZVwiLCBkYXRlLnRvSVNPU3RyaW5nKCkpO1xuICAgICAgb25EYXRlU2V0KCk7XG4gICAgfSxcbiAgICBbaXRlbSwgb25EYXRlU2V0XVxuICApO1xuXG4gIGNvbnN0IG1vdmVUb1ByZXZpb3VzRGF0ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpdGVtLm1vdmVUb1ByZXZpb3VzRGlzY3JldGVUaW1lKENvbW1vblN0cmF0YS51c2VyKTtcbiAgICBvbkRhdGVTZXQoKTtcbiAgfSwgW2l0ZW0sIG9uRGF0ZVNldF0pO1xuXG4gIGNvbnN0IG1vdmVUb05leHREYXRlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGl0ZW0ubW92ZVRvTmV4dERpc2NyZXRlVGltZShDb21tb25TdHJhdGEudXNlcik7XG4gICAgb25EYXRlU2V0KCk7XG4gIH0sIFtpdGVtLCBvbkRhdGVTZXRdKTtcblxuICB1c2VJbXBlcmF0aXZlSGFuZGxlKFxuICAgIHJlZixcbiAgICAoKSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvcGVuOiAoKSA9PiB7XG4gICAgICAgICAgc2V0SXNPcGVuKHRydWUpO1xuICAgICAgICB9LFxuICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgIHNldElzT3BlbihmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSxcbiAgICBbXVxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPEJveCBjb2x1bW4gY2VudGVyZWQgZmxleD17MX0+XG4gICAgICA8U3BhY2luZyBib3R0b209ezR9IC8+XG4gICAgICA8Qm94IGNlbnRlcmVkPlxuICAgICAgICA8U3R5bGVkSWNvblxuICAgICAgICAgIGxpZ2h0XG4gICAgICAgICAgc3R5bGVkV2lkdGg9XCIyMXB4XCJcbiAgICAgICAgICBnbHlwaD17SWNvbi5HTFlQSFMuY2FsZW5kYXIyfVxuICAgICAgICAgIGNzcz17XCJtYXJnaW4tdG9wOi0ycHg7XCJ9XG4gICAgICAgIC8+XG4gICAgICAgIDxTcGFjaW5nIHJpZ2h0PXsyfSAvPlxuICAgICAgICA8VGV4dCB0ZXh0TGlnaHQgZXh0cmFMYXJnZT5cbiAgICAgICAgICB7aGVhZGluZ31cbiAgICAgICAgPC9UZXh0PlxuICAgICAgPC9Cb3g+XG4gICAgICA8U3BhY2luZyBib3R0b209ezJ9IC8+XG4gICAgICA8Qm94PlxuICAgICAgICA8UHJldkJ1dHRvblxuICAgICAgICAgIGRpc2FibGVkPXtpdGVtLmlzUHJldmlvdXNEaXNjcmV0ZVRpbWVBdmFpbGFibGUgPT09IGZhbHNlfVxuICAgICAgICAgIHRpdGxlPXt0KFwiZGlmZlRvb2wuZGF0ZVBpY2tlci5wcmV2aW91c0RhdGVUaXRsZVwiKX1cbiAgICAgICAgICBvbkNsaWNrPXttb3ZlVG9QcmV2aW91c0RhdGV9XG4gICAgICAgIC8+XG4gICAgICAgIDxEYXRlQnV0dG9uXG4gICAgICAgICAgcHJpbWFyeVxuICAgICAgICAgIGlzT3Blbj17aXNPcGVufVxuICAgICAgICAgIG9uQ2xpY2s9e3RvZ2dsZU9wZW59XG4gICAgICAgICAgdGl0bGU9e3QoXCJkaWZmVG9vbC5kYXRlUGlja2VyLmRhdGVCdXR0b25UaXRsZVwiKX1cbiAgICAgICAgPlxuICAgICAgICAgIDxUZXh0U3BhbiBleHRyYUxhcmdlPntmb3JtYXR0ZWRDdXJyZW50RGF0ZSB8fCBcIi1cIn08L1RleHRTcGFuPlxuICAgICAgICA8L0RhdGVCdXR0b24+XG4gICAgICAgIDxOZXh0QnV0dG9uXG4gICAgICAgICAgZGlzYWJsZWQ9e2l0ZW0uaXNOZXh0RGlzY3JldGVUaW1lQXZhaWxhYmxlID09PSBmYWxzZX1cbiAgICAgICAgICB0aXRsZT17dChcImRpZmZUb29sLmRhdGVQaWNrZXIubmV4dERhdGVUaXRsZVwiKX1cbiAgICAgICAgICBvbkNsaWNrPXttb3ZlVG9OZXh0RGF0ZX1cbiAgICAgICAgLz5cbiAgICAgIDwvQm94PlxuICAgICAgPGRpdlxuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIGRpc3BsYXk6IGlzT3BlbiA/IFwiYmxvY2tcIiA6IFwibm9uZVwiLFxuICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCJcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgPERhdGVUaW1lUGlja2VyXG4gICAgICAgICAgY3VycmVudERhdGU9e2N1cnJlbnREYXRlfVxuICAgICAgICAgIGRhdGVzPXtpdGVtLm9iamVjdGlmaWVkRGF0ZXN9XG4gICAgICAgICAgb25DaGFuZ2U9e2NoYW5nZUN1cnJlbnREYXRlfVxuICAgICAgICAgIG9wZW5EaXJlY3Rpb249XCJ1cFwiXG4gICAgICAgICAgaXNPcGVuPXtpc09wZW59XG4gICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0SXNPcGVuKGZhbHNlKX1cbiAgICAgICAgLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPFNwYWNpbmcgYm90dG9tPXs0fSAvPlxuICAgIDwvQm94PlxuICApO1xufSk7XG5EYXRlUGlja2VyLmRpc3BsYXlOYW1lID0gXCJEYXRlUGlja2VyXCI7XG5cbmNvbnN0IFBhZ2VyQnV0dG9uID0gc3R5bGVkKEJ1dHRvbikuYXR0cnMoe1xuICBpY29uUHJvcHM6IHtcbiAgICBjc3M6IFwibWFyZ2luLXJpZ2h0OjA7XCJcbiAgfVxufSlgXG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogJHsocHJvcHMpID0+IHByb3BzLnRoZW1lLmNvbG9yUHJpbWFyeX07XG4gIHdpZHRoOiA0MHB4O1xuICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcblxuICAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmNlbnRlcldpdGhGbGV4KCl9XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG5gO1xuXG5jb25zdCBQcmV2QnV0dG9uID0gc3R5bGVkKFBhZ2VyQnV0dG9uKS5hdHRycyh7XG4gIHJlbmRlckljb246ICgpID0+IChcbiAgICA8U3R5bGVkSWNvblxuICAgICAgY3NzPVwidHJhbnNmb3JtOnJvdGF0ZSg5MGRlZyk7XCJcbiAgICAgIGxpZ2h0XG4gICAgICBzdHlsZWRXaWR0aD1cIjE1cHhcIlxuICAgICAgZ2x5cGg9e0ljb24uR0xZUEhTLmFycm93RG93bn1cbiAgICAvPlxuICApXG59KWBcbiAgJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5ib3JkZXJSYWRpdXNMZWZ0KHRoZW1lLnJhZGl1czQwQnV0dG9uKX1cbiAgbWFyZ2luLXJpZ2h0OiAxcHg7XG5gO1xuXG5jb25zdCBOZXh0QnV0dG9uID0gc3R5bGVkKFBhZ2VyQnV0dG9uKS5hdHRycyh7XG4gIHJlbmRlckljb246ICgpID0+IChcbiAgICA8U3R5bGVkSWNvblxuICAgICAgY3NzPVwidHJhbnNmb3JtOnJvdGF0ZSgyNzBkZWcpO1wiXG4gICAgICBsaWdodFxuICAgICAgc3R5bGVkV2lkdGg9XCIxNXB4XCJcbiAgICAgIGdseXBoPXtJY29uLkdMWVBIUy5hcnJvd0Rvd259XG4gICAgLz5cbiAgKVxufSlgXG4gICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuYm9yZGVyUmFkaXVzUmlnaHQodGhlbWUucmFkaXVzNDBCdXR0b24pfVxuICBtYXJnaW4tbGVmdDogMXB4O1xuYDtcblxuY29uc3QgRGF0ZUJ1dHRvbiA9IHN0eWxlZChCdXR0b24pPHsgaXNPcGVuOiBib29sZWFuIH0+YFxuICAvLyB6LWluZGV4OiAxMDAwOyAvLyAoTmFuZGEpOiBTbyB0aGF0IHdlIGRvbid0IGxvb3NlIHRoZSBidXR0b24gY2xpY2tzIHRvIHRoZSBkYXRlIHBpY2tlciBwb3B1cFxuICB6LWluZGV4OiAwO1xuICAkeyhwcm9wcykgPT4gcHJvcHMuaXNPcGVuICYmIGB6LWluZGV4OiAxMDAwO2B9O1xuXG4gIGJvcmRlci1yYWRpdXM6IDBweDtcbiAgYm9yZGVyOiAxcHggc29saWQgJHsocHJvcHMpID0+IHByb3BzLnRoZW1lLmNvbG9yUHJpbWFyeX07XG5cbiAgbWluLXdpZHRoOiAyMzVweDtcbiAgQG1lZGlhIChtYXgtd2lkdGg6ICR7KHByb3BzOiBhbnkpID0+IHByb3BzLnRoZW1lLmxnfXB4KSB7XG4gICAgbWluLXdpZHRoOiAxNTBweDtcbiAgfVxuYDtcblxuZXhwb3J0IGRlZmF1bHQgb2JzZXJ2ZXIoRGF0ZVBpY2tlcik7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/terriajs/lib/ReactViews/Tools/DiffTool/DatePicker.tsx\n\n}");

/***/ }),

/***/ "./node_modules/terriajs/lib/ReactViews/Tools/DiffTool/DiffTool.tsx":
/*!**************************************************************************!*\
  !*** ./node_modules/terriajs/lib/ReactViews/Tools/DiffTool/DiffTool.tsx ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"./node_modules/core-js/modules/es.regexp.exec.js\");\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"./node_modules/core-js/modules/web.dom-collections.iterator.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var dateformat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dateformat */ \"./node_modules/dateformat/lib/dateformat.js\");\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! mobx */ \"./node_modules/mobx/dist/mobx.esm.js\");\n/* harmony import */ var mobx_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! mobx-react */ \"./node_modules/mobx-react/dist/mobxreact.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-i18next */ \"./node_modules/react-i18next/dist/es/useTranslation.js\");\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! styled-components */ \"./node_modules/styled-components/dist/styled-components.browser.esm.js\");\n/* harmony import */ var terriajs_cesium_Source_Core_Cartographic__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! terriajs-cesium/Source/Core/Cartographic */ \"./node_modules/terriajs-cesium/Source/Core/Cartographic.js\");\n/* harmony import */ var terriajs_cesium_Source_Core_JulianDate__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! terriajs-cesium/Source/Core/JulianDate */ \"./node_modules/terriajs-cesium/Source/Core/JulianDate.js\");\n/* harmony import */ var terriajs_cesium_Source_Core_Math__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! terriajs-cesium/Source/Core/Math */ \"./node_modules/terriajs-cesium/Source/Core/Math.js\");\n/* harmony import */ var terriajs_cesium_Source_Core_createGuid__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! terriajs-cesium/Source/Core/createGuid */ \"./node_modules/terriajs-cesium/Source/Core/createGuid.js\");\n/* harmony import */ var terriajs_cesium_Source_Scene_SplitDirection__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! terriajs-cesium/Source/Scene/SplitDirection */ \"./node_modules/terriajs-cesium/Source/Scene/SplitDirection.js\");\n/* harmony import */ var _Core_filterOutUndefined__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../Core/filterOutUndefined */ \"./node_modules/terriajs/lib/Core/filterOutUndefined.ts\");\n/* harmony import */ var _Core_isDefined__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../Core/isDefined */ \"./node_modules/terriajs/lib/Core/isDefined.ts\");\n/* harmony import */ var _Map_Vector_prettifyCoordinates__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../Map/Vector/prettifyCoordinates */ \"./node_modules/terriajs/lib/Map/Vector/prettifyCoordinates.ts\");\n/* harmony import */ var _ModelMixins_DiffableMixin__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../ModelMixins/DiffableMixin */ \"./node_modules/terriajs/lib/ModelMixins/DiffableMixin.ts\");\n/* harmony import */ var _ModelMixins_MappableMixin__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../ModelMixins/MappableMixin */ \"./node_modules/terriajs/lib/ModelMixins/MappableMixin.ts\");\n/* harmony import */ var _Models_Catalog_CatalogReferences_SplitItemReference__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../Models/Catalog/CatalogReferences/SplitItemReference */ \"./node_modules/terriajs/lib/Models/Catalog/CatalogReferences/SplitItemReference.ts\");\n/* harmony import */ var _Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../Models/Definition/CommonStrata */ \"./node_modules/terriajs/lib/Models/Definition/CommonStrata.ts\");\n/* harmony import */ var _Models_Definition_hasTraits__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../Models/Definition/hasTraits */ \"./node_modules/terriajs/lib/Models/Definition/hasTraits.ts\");\n/* harmony import */ var _Models_Definition_updateModelFromJson__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../Models/Definition/updateModelFromJson */ \"./node_modules/terriajs/lib/Models/Definition/updateModelFromJson.ts\");\n/* harmony import */ var _Models_LocationMarkerUtils__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../Models/LocationMarkerUtils */ \"./node_modules/terriajs/lib/Models/LocationMarkerUtils.ts\");\n/* harmony import */ var _Styled_Box__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../Styled/Box */ \"./node_modules/terriajs/lib/Styled/Box.tsx\");\n/* harmony import */ var _Styled_Button__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../Styled/Button */ \"./node_modules/terriajs/lib/Styled/Button.tsx\");\n/* harmony import */ var _Styled_Icon__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../Styled/Icon */ \"./node_modules/terriajs/lib/Styled/Icon.tsx\");\n/* harmony import */ var _Styled_Select__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../Styled/Select */ \"./node_modules/terriajs/lib/Styled/Select.tsx\");\n/* harmony import */ var _Styled_Spacing__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../Styled/Spacing */ \"./node_modules/terriajs/lib/Styled/Spacing.tsx\");\n/* harmony import */ var _Styled_Text__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../Styled/Text */ \"./node_modules/terriajs/lib/Styled/Text.tsx\");\n/* harmony import */ var _Traits_TraitsClasses_ImageryProviderTraits__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../../Traits/TraitsClasses/ImageryProviderTraits */ \"./node_modules/terriajs/lib/Traits/TraitsClasses/ImageryProviderTraits.ts\");\n/* harmony import */ var _Context__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../Context */ \"./node_modules/terriajs/lib/ReactViews/Context/index.ts\");\n/* harmony import */ var _Custom_parseCustomMarkdownToReact__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../../Custom/parseCustomMarkdownToReact */ \"./node_modules/terriajs/lib/ReactViews/Custom/parseCustomMarkdownToReact.ts\");\n/* harmony import */ var _Loader__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../../Loader */ \"./node_modules/terriajs/lib/ReactViews/Loader.tsx\");\n/* harmony import */ var _Workflow_WorkflowPanel__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../Workflow/WorkflowPanel */ \"./node_modules/terriajs/lib/ReactViews/Workflow/WorkflowPanel.tsx\");\n/* harmony import */ var _DatePicker__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./DatePicker */ \"./node_modules/terriajs/lib/ReactViews/Tools/DiffTool/DatePicker.tsx\");\n/* harmony import */ var _LocationPicker__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./LocationPicker */ \"./node_modules/terriajs/lib/ReactViews/Tools/DiffTool/LocationPicker.tsx\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! react/jsx-runtime */ \"./node_modules/react/jsx-runtime.js\");\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DiffTool = (0,mobx_react__WEBPACK_IMPORTED_MODULE_4__.observer)(props => {\n  const [leftItem, setLeftItem] = (0,react__WEBPACK_IMPORTED_MODULE_5__.useState)();\n  const [rightItem, setRightItem] = (0,react__WEBPACK_IMPORTED_MODULE_5__.useState)();\n  const [userSelectedSourceItem, setUserSelectedSourceItem] = (0,react__WEBPACK_IMPORTED_MODULE_5__.useState)();\n  const viewState = (0,_Context__WEBPACK_IMPORTED_MODULE_31__.useViewState)();\n  const changeSourceItem = sourceItem => {\n    setUserSelectedSourceItem(sourceItem);\n  };\n  const sourceItem = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => userSelectedSourceItem || props.sourceItem, [props.sourceItem, userSelectedSourceItem]);\n  (0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    const terria = viewState.terria;\n    const originalSettings = {\n      showSplitter: terria.showSplitter,\n      isMapFullScreen: viewState.isMapFullScreen\n    };\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      terria.showSplitter = true;\n      sourceItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"show\", false);\n      terria.elements.set(\"timeline\", {\n        visible: false\n      });\n    });\n    const itemsPromise = Promise.all([createSplitItem(sourceItem, terriajs_cesium_Source_Scene_SplitDirection__WEBPACK_IMPORTED_MODULE_13__[\"default\"].LEFT), createSplitItem(sourceItem, terriajs_cesium_Source_Scene_SplitDirection__WEBPACK_IMPORTED_MODULE_13__[\"default\"].RIGHT)]);\n    itemsPromise.then(_ref => {\n      let [lItem, rItem] = _ref;\n      setLeftItem(lItem);\n      setRightItem(rItem);\n    }).catch();\n    return () => {\n      (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n        terria.showSplitter = originalSettings.showSplitter;\n        viewState.setIsMapFullScreen(originalSettings.isMapFullScreen);\n        sourceItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"show\", true);\n        terria.elements.set(\"timeline\", {\n          visible: true\n        });\n      });\n      itemsPromise.then(_ref2 => {\n        let [lItem, rItem] = _ref2;\n        if (lItem) removeSplitItem(lItem);\n        if (rItem) removeSplitItem(rItem);\n      });\n    };\n  }, [sourceItem, viewState]);\n  if (leftItem && rightItem) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Main, _objectSpread(_objectSpread({}, props), {}, {\n      terria: props.viewState.terria,\n      sourceItem: sourceItem,\n      changeSourceItem: changeSourceItem,\n      leftItem: leftItem,\n      rightItem: rightItem\n    }));\n  }\n  return null;\n});\nDiffTool.displayName = \"DiffTool\";\nconst Main = (0,mobx_react__WEBPACK_IMPORTED_MODULE_4__.observer)(props => {\n  var _diffItem$styleSelect3;\n  const {\n    terria,\n    viewState,\n    sourceItem,\n    leftItem,\n    rightItem\n  } = props;\n  const {\n    t\n  } = (0,react_i18next__WEBPACK_IMPORTED_MODULE_7__.useTranslation)();\n  const theme = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__.useTheme)();\n  const [location, setLocation] = (0,react__WEBPACK_IMPORTED_MODULE_5__.useState)();\n  const [, setLocationPickError] = (0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(false);\n  const [isPickingNewLocation, setIsPickingNewLocation] = (0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(false);\n  const leftDatePickerHandle = (0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const rightDatePickerHandle = (0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const diffItem = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return leftItem;\n  }, [leftItem]);\n  const currentLeftDate = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return leftItem.currentDiscreteJulianDate;\n  }, [leftItem.currentDiscreteJulianDate]);\n  const currentRightDate = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return rightItem.currentDiscreteJulianDate;\n  }, [rightItem.currentDiscreteJulianDate]);\n  const diffItemName = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    const name = sourceItem.name || \"\";\n    const format = \"yyyy/mm/dd\";\n    if (!currentLeftDate || !currentRightDate) {\n      return name;\n    } else {\n      const d1 = (0,dateformat__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(terriajs_cesium_Source_Core_JulianDate__WEBPACK_IMPORTED_MODULE_10__[\"default\"].toDate(currentLeftDate), format);\n      const d2 = (0,dateformat__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(terriajs_cesium_Source_Core_JulianDate__WEBPACK_IMPORTED_MODULE_10__[\"default\"].toDate(currentRightDate), format);\n      return \"\".concat(name, \" - difference for dates \").concat(d1, \", \").concat(d2);\n    }\n  }, [currentLeftDate, currentRightDate, sourceItem.name]);\n  const diffableItemsInWorkbench = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return terria.workbench.items.filter(item => _ModelMixins_DiffableMixin__WEBPACK_IMPORTED_MODULE_17__[\"default\"].isMixedInto(item) && item.canDiffImages);\n  }, [terria.workbench.items]);\n  const previewStyle = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    var _diffItem$styleSelect;\n    return (_diffItem$styleSelect = diffItem.styleSelectableDimensions) === null || _diffItem$styleSelect === void 0 || (_diffItem$styleSelect = _diffItem$styleSelect[0]) === null || _diffItem$styleSelect === void 0 ? void 0 : _diffItem$styleSelect.selectedId;\n  }, [diffItem.styleSelectableDimensions]);\n  const currentDiffStyle = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return diffItem.diffStyleId;\n  }, [diffItem.diffStyleId]);\n  const availableDiffStyles = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return (0,_Core_filterOutUndefined__WEBPACK_IMPORTED_MODULE_14__[\"default\"])(diffItem.availableDiffStyles.map(diffStyleId => {\n      var _diffItem$styleSelect2;\n      return (_diffItem$styleSelect2 = diffItem.styleSelectableDimensions) === null || _diffItem$styleSelect2 === void 0 || (_diffItem$styleSelect2 = _diffItem$styleSelect2[0]) === null || _diffItem$styleSelect2 === void 0 || (_diffItem$styleSelect2 = _diffItem$styleSelect2.options) === null || _diffItem$styleSelect2 === void 0 ? void 0 : _diffItem$styleSelect2.find(style => style.id === diffStyleId);\n    }));\n  }, [diffItem.availableDiffStyles, diffItem.styleSelectableDimensions]);\n  const diffLegendUrl = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return currentDiffStyle && currentLeftDate && currentRightDate && diffItem.getLegendUrlForStyle(currentDiffStyle, currentLeftDate, currentRightDate);\n  }, [currentDiffStyle, currentLeftDate, currentRightDate, diffItem]);\n  const previewLegendUrl = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return previewStyle && diffItem.getLegendUrlForStyle(previewStyle);\n  }, [previewStyle, diffItem]);\n  const showItem = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(model => {\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      if (hasOpacity(model)) {\n        model.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"opacity\", 0.8);\n      }\n    });\n  }, []);\n  const hideItem = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(model => {\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      if (hasOpacity(model)) {\n        model.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"opacity\", 0);\n      }\n    });\n  }, []);\n  const handleChangeSourceItem = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(e => {\n    const newSourceItem = diffableItemsInWorkbench.find(item => item.uniqueId === e.target.value);\n    if (newSourceItem) props.changeSourceItem(newSourceItem);\n  }, [diffableItemsInWorkbench, props]);\n  const handleChangePreviewStyle = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(e => {\n    const styleId = e.target.value;\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      var _leftItem$styleSelect, _rightItem$styleSelec;\n      (_leftItem$styleSelect = leftItem.styleSelectableDimensions) === null || _leftItem$styleSelect === void 0 || (_leftItem$styleSelect = _leftItem$styleSelect[0]) === null || _leftItem$styleSelect === void 0 || _leftItem$styleSelect.setDimensionValue(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, styleId);\n      (_rightItem$styleSelec = rightItem.styleSelectableDimensions) === null || _rightItem$styleSelec === void 0 || (_rightItem$styleSelec = _rightItem$styleSelec[0]) === null || _rightItem$styleSelec === void 0 || _rightItem$styleSelec.setDimensionValue(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, styleId);\n    });\n  }, [leftItem.styleSelectableDimensions, rightItem.styleSelectableDimensions]);\n  const handleChangeDiffStyle = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(e => {\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      diffItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"diffStyleId\", e.target.value);\n    });\n  }, [diffItem]);\n  const onUserPickingLocation = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(_pickingLocation => {\n    setIsPickingNewLocation(true);\n  }, []);\n  const onUserPickLocation = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)((pickedFeatures, pickedLocationValue) => {\n    const feature = pickedFeatures.features.find(f => doesFeatureBelongToItem(f, leftItem) || doesFeatureBelongToItem(f, rightItem));\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      if (feature) {\n        leftItem.setTimeFilterFeature(feature, pickedFeatures.providerCoords);\n        rightItem.setTimeFilterFeature(feature, pickedFeatures.providerCoords);\n        setLocation(pickedLocationValue);\n        setLocationPickError(false);\n      } else {\n        setLocationPickError(true);\n      }\n      setIsPickingNewLocation(false);\n    });\n  }, [leftItem, rightItem]);\n  const unsetDates = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(() => {\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      leftItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"currentTime\", null);\n      rightItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"currentTime\", null);\n    });\n    hideItem(leftItem);\n    hideItem(rightItem);\n  }, [leftItem, rightItem, hideItem]);\n  const generateDiff = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(() => {\n    if (currentLeftDate === undefined || currentRightDate === undefined || currentDiffStyle === undefined) {\n      return;\n    }\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      terria.overlays.remove(leftItem);\n      terria.overlays.remove(rightItem);\n      terria.workbench.add(diffItem);\n      diffItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"name\", diffItemName);\n      diffItem.showDiffImage(currentLeftDate, currentRightDate, currentDiffStyle);\n      const diffItemProperties = diffItem.diffItemProperties;\n      if (diffItemProperties) {\n        (0,_Models_Definition_updateModelFromJson__WEBPACK_IMPORTED_MODULE_22__[\"default\"])(diffItem, _Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, diffItemProperties);\n      }\n      terria.showSplitter = false;\n    });\n  }, [currentDiffStyle, currentLeftDate, currentRightDate, diffItem, diffItemName, leftItem, rightItem, terria]);\n  const resetTool = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(() => {\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      diffItem.clearDiffImage();\n      setDefaultDiffStyle(diffItem);\n      terria.overlays.add(leftItem);\n      terria.overlays.add(rightItem);\n      terria.workbench.remove(diffItem);\n      terria.showSplitter = true;\n      leftItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"splitDirection\", terriajs_cesium_Source_Scene_SplitDirection__WEBPACK_IMPORTED_MODULE_13__[\"default\"].LEFT);\n      rightItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"splitDirection\", terriajs_cesium_Source_Scene_SplitDirection__WEBPACK_IMPORTED_MODULE_13__[\"default\"].RIGHT);\n    });\n  }, [diffItem, leftItem, rightItem, terria]);\n  const setLocationFromActiveSearch = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(async () => {\n    const markerLocation = (0,_Models_LocationMarkerUtils__WEBPACK_IMPORTED_MODULE_23__.getMarkerLocation)(terria);\n    if (markerLocation && _ModelMixins_MappableMixin__WEBPACK_IMPORTED_MODULE_18__[\"default\"].isMixedInto(sourceItem)) {\n      const part = sourceItem.mapItems.find(p => _ModelMixins_MappableMixin__WEBPACK_IMPORTED_MODULE_18__.ImageryParts.is(p));\n      const imageryProvider = part && _ModelMixins_MappableMixin__WEBPACK_IMPORTED_MODULE_18__.ImageryParts.is(part) && part.imageryProvider;\n      if (imageryProvider) {\n        const promises = [setTimeFilterFromLocation(leftItem, markerLocation, imageryProvider), setTimeFilterFromLocation(rightItem, markerLocation, imageryProvider)];\n        const someSuccessful = (await Promise.all(promises)).some(ok => ok);\n        if (someSuccessful) {\n          (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => setLocation(markerLocation));\n        } else {\n          // If we cannot resolve imagery at the marker location, remove it\n          (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => (0,_Models_LocationMarkerUtils__WEBPACK_IMPORTED_MODULE_23__.removeMarker)(terria));\n        }\n      }\n    }\n  }, [leftItem, rightItem, sourceItem, terria]);\n  (0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    const {\n      latitude,\n      longitude,\n      height\n    } = diffItem.timeFilterCoordinates;\n    if (latitude !== undefined && longitude !== undefined) {\n      setLocation({\n        latitude,\n        longitude,\n        height\n      });\n      // Assuming removeMarker is an action or handles its own MobX transactions\n      (0,_Models_LocationMarkerUtils__WEBPACK_IMPORTED_MODULE_23__.removeMarker)(terria);\n    } else {\n      setLocationFromActiveSearch();\n    }\n  }, [diffItem.timeFilterCoordinates, setLocationFromActiveSearch, terria]);\n  const closePanel = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(() => {\n    viewState.closeTool();\n  }, [viewState]);\n  const isShowingDiff = diffItem.isShowingDiff;\n  const datesSelected = currentLeftDate && currentRightDate;\n  const isReadyToGenerateDiff = location && datesSelected && currentDiffStyle !== undefined;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Workflow_WorkflowPanel__WEBPACK_IMPORTED_MODULE_34__[\"default\"], {\n    viewState: viewState,\n    title: t(\"diffTool.title\"),\n    icon: _Styled_Icon__WEBPACK_IMPORTED_MODULE_26__.GLYPHS.difference,\n    onClose: () => {\n      resetTool();\n      closePanel();\n    },\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_StyledDiv, {\n      children: [isShowingDiff && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n        medium: true,\n        textLight: true,\n        children: t(\"diffTool.differenceResultsTitle\")\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n        textLight: true,\n        children: t(\"diffTool.instructions.paneDescription\")\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Group, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(LocationAndDatesDisplayBox, {\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n              medium: true,\n              children: [t(\"diffTool.labels.area\"), \":\"]\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(\"div\", {\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n                bold: true,\n                textLight: true,\n                children: location ? t(\"diffTool.locationDisplay.locationSelected.title\") : t(\"diffTool.locationDisplay.noLocationSelected.title\")\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n                light: true,\n                textLight: true,\n                small: true,\n                children: location ? t(\"diffTool.locationDisplay.locationSelected.description\") : t(\"diffTool.locationDisplay.noLocationSelected.description\")\n              })]\n            })]\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n              medium: true,\n              children: [t(\"diffTool.labels.dates\"), \":\"]\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n              column: true,\n              alignItemsFlexStart: true,\n              children: [currentLeftDate && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n                large: true,\n                children: [\"(A)\", \" \", (0,dateformat__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(terriajs_cesium_Source_Core_JulianDate__WEBPACK_IMPORTED_MODULE_10__[\"default\"].toDate(currentLeftDate), \"dd/mm/yyyy\")]\n              }), !currentLeftDate && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Button__WEBPACK_IMPORTED_MODULE_25__.RawButton, {\n                onClick: () => {\n                  var _leftDatePickerHandle;\n                  return (_leftDatePickerHandle = leftDatePickerHandle.current) === null || _leftDatePickerHandle === void 0 ? void 0 : _leftDatePickerHandle.open();\n                },\n                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__.TextSpan, {\n                  isLink: true,\n                  small: true,\n                  bold: true,\n                  children: t(\"diffTool.instructions.setDateA\")\n                })\n              }), currentRightDate && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n                large: true,\n                children: [\"(B)\", \" \", (0,dateformat__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(terriajs_cesium_Source_Core_JulianDate__WEBPACK_IMPORTED_MODULE_10__[\"default\"].toDate(currentRightDate), \"dd/mm/yyyy\")]\n              }), !currentRightDate && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Button__WEBPACK_IMPORTED_MODULE_25__.RawButton, {\n                onClick: () => {\n                  var _rightDatePickerHandl;\n                  return (_rightDatePickerHandl = rightDatePickerHandle.current) === null || _rightDatePickerHandl === void 0 ? void 0 : _rightDatePickerHandl.open();\n                },\n                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__.TextSpan, {\n                  isLink: true,\n                  small: true,\n                  bold: true,\n                  children: t(\"diffTool.instructions.setDateB\")\n                })\n              }), isShowingDiff === false && currentLeftDate && currentRightDate && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Button__WEBPACK_IMPORTED_MODULE_25__.RawButton, {\n                onClick: unsetDates,\n                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__.TextSpan, {\n                  isLink: true,\n                  small: true,\n                  children: t(\"diffTool.instructions.changeDates\")\n                })\n              })]\n            })]\n          })]\n        })\n      }), !isShowingDiff && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Group, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(Selector, {\n          viewState: viewState,\n          value: sourceItem.uniqueId,\n          onChange: handleChangeSourceItem,\n          label: t(\"diffTool.labels.sourceDataset\"),\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(\"option\", {\n            disabled: true,\n            children: \"Select source item\"\n          }), diffableItemsInWorkbench.map(item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(\"option\", {\n            value: item.uniqueId,\n            children: item.name\n          }, item.uniqueId))]\n        })\n      }), !isShowingDiff && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(Group, {\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(Selector, {\n          viewState: viewState,\n          spacingBottom: true,\n          value: previewStyle,\n          onChange: handleChangePreviewStyle,\n          label: t(\"diffTool.labels.previewStyle\"),\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(\"option\", {\n            disabled: true,\n            value: \"\",\n            children: t(\"diffTool.choosePreview\")\n          }), (_diffItem$styleSelect3 = diffItem.styleSelectableDimensions) === null || _diffItem$styleSelect3 === void 0 || (_diffItem$styleSelect3 = _diffItem$styleSelect3[0]) === null || _diffItem$styleSelect3 === void 0 || (_diffItem$styleSelect3 = _diffItem$styleSelect3.options) === null || _diffItem$styleSelect3 === void 0 ? void 0 : _diffItem$styleSelect3.map(style => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(\"option\", {\n            value: style.id,\n            children: style.name\n          }, style.id))]\n        }), previewLegendUrl && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(LegendImage, {\n          width: \"100%\",\n          src: previewLegendUrl\n        })]\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(Group, {\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(Selector, {\n          viewState: viewState,\n          value: currentDiffStyle || \"\",\n          onChange: handleChangeDiffStyle,\n          label: t(\"diffTool.labels.differenceOutput\"),\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(\"option\", {\n            disabled: true,\n            value: \"\",\n            children: t(\"diffTool.chooseDifference\")\n          }), availableDiffStyles.map(style => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(\"option\", {\n            value: style.id,\n            children: style.name\n          }, style.id))]\n        }), isShowingDiff && diffLegendUrl && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(LegendImage, {\n          width: \"100%\",\n          src: diffLegendUrl\n        })]\n      }), !isShowingDiff && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(\"div\", {\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(GenerateButton, {\n          onClick: generateDiff,\n          disabled: !isReadyToGenerateDiff,\n          \"aria-describedby\": \"TJSDifferenceDisabledButtonPrompt\",\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__.TextSpan, {\n            large: true,\n            children: t(\"diffTool.labels.generateDiffButtonText\")\n          })\n        }), !isReadyToGenerateDiff && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_StyledDiv2, {\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_StyledDiv3, {\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Icon__WEBPACK_IMPORTED_MODULE_26__.StyledIcon, {\n              fillColor: \"#ccc\",\n              styledWidth: \"16px\",\n              styledHeight: \"16px\",\n              glyph: _Styled_Icon__WEBPACK_IMPORTED_MODULE_26__.GLYPHS.info\n            })\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n            small: true,\n            light: true,\n            textLight: true,\n            id: \"TJSDifferenceDisabledButtonPrompt\",\n            children: t(\"diffTool.labels.disabledButtonPrompt\")\n          })]\n        })]\n      }), isShowingDiff && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n        centered: true,\n        left: true,\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_StyledBackButton, {\n          transparentBg: true,\n          onClick: resetTool,\n          $_css: theme.textLight,\n          $_css2: theme.textLight,\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__.BoxSpan, {\n            centered: true,\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_StyledStyledIcon, {\n              light: true,\n              styledWidth: \"16px\",\n              glyph: _Styled_Icon__WEBPACK_IMPORTED_MODULE_26__.GLYPHS.arrowDown\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__.TextSpan, {\n              medium: true,\n              children: t(\"general.back\")\n            })]\n          })\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_StyledButton, {\n          primary: true,\n          onClick: closePanel,\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__.TextSpan, {\n            medium: true,\n            children: t(\"diffTool.labels.saveToWorkbench\")\n          })\n        })]\n      }), !isShowingDiff && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_LocationPicker__WEBPACK_IMPORTED_MODULE_36__[\"default\"], {\n        terria: terria,\n        location: location,\n        onPicking: onUserPickingLocation,\n        onPicked: onUserPickLocation\n      }), !isShowingDiff && /*#__PURE__*/react_dom__WEBPACK_IMPORTED_MODULE_6__.createPortal(/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n        centered: true,\n        fullWidth: true,\n        flexWrap: true,\n        backgroundColor: theme.dark,\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_DatePicker__WEBPACK_IMPORTED_MODULE_35__[\"default\"], {\n          ref: leftDatePickerHandle,\n          heading: t(\"diffTool.labels.dateComparisonA\"),\n          item: leftItem,\n          onDateSet: () => showItem(leftItem)\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(AreaFilterSelection, {\n          location: location,\n          isPickingNewLocation: isPickingNewLocation\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_DatePicker__WEBPACK_IMPORTED_MODULE_35__[\"default\"], {\n          ref: rightDatePickerHandle,\n          heading: t(\"diffTool.labels.dateComparisonB\"),\n          item: rightItem,\n          onDateSet: () => showItem(rightItem)\n        })]\n      }), document.getElementById(\"TJS-BottomDockLastPortal\"))]\n    })\n  });\n});\nMain.displayName = \"Main\";\nconst BackButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Button__WEBPACK_IMPORTED_MODULE_25__[\"default\"]).attrs({\n  secondary: true\n}).withConfig({\n  displayName: \"DiffTool__BackButton\",\n  componentId: \"sc-3vyhxu-0\"\n})([\"\"]);\nvar _StyledBackButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(BackButton).withConfig({\n  displayName: \"DiffTool___StyledBackButton\",\n  componentId: \"sc-3vyhxu-1\"\n})([\"color:\", \";border-color:\", \";\"], p => p.$_css, p => p.$_css2);\nconst GenerateButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Button__WEBPACK_IMPORTED_MODULE_25__[\"default\"]).attrs({\n  primary: true,\n  fullWidth: true\n}).withConfig({\n  displayName: \"DiffTool__GenerateButton\",\n  componentId: \"sc-3vyhxu-2\"\n})([\"\"]);\nconst Selector = props => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n  fullWidth: true,\n  column: true,\n  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(\"label\", {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_StyledText, {\n      textLight: true,\n      $_css3: \"p {margin: 0;}\",\n      children: (0,_Custom_parseCustomMarkdownToReact__WEBPACK_IMPORTED_MODULE_32__.parseCustomMarkdownToReactWithOptions)(\"\".concat(props.label, \":\"), {\n        injectTermsAsTooltips: true,\n        tooltipTerms: props.viewState.terria.configParameters.helpContentTerms\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_28__[\"default\"], {\n      bottom: 1\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Select__WEBPACK_IMPORTED_MODULE_27__[\"default\"], _objectSpread(_objectSpread({}, props), {}, {\n      children: props.children\n    })), props.spacingBottom && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_28__[\"default\"], {\n      bottom: 2\n    })]\n  })\n});\nconst AreaFilterSelection = props => {\n  const {\n    location,\n    isPickingNewLocation\n  } = props;\n  const {\n    t\n  } = (0,react_i18next__WEBPACK_IMPORTED_MODULE_7__.useTranslation)();\n  let locationText = \"-\";\n  if (location) {\n    const {\n      longitude,\n      latitude\n    } = (0,_Map_Vector_prettifyCoordinates__WEBPACK_IMPORTED_MODULE_16__[\"default\"])(location.longitude, location.latitude, {\n      digits: 2\n    });\n    locationText = \"\".concat(longitude, \" \").concat(latitude);\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_StyledBox, {\n    column: true,\n    centered: true,\n    styledMinWidth: \"230px\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n      centered: true,\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Icon__WEBPACK_IMPORTED_MODULE_26__.StyledIcon, {\n        light: true,\n        styledWidth: \"16px\",\n        glyph: _Styled_Icon__WEBPACK_IMPORTED_MODULE_26__.GLYPHS.location2\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_28__[\"default\"], {\n        right: 2\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n        textLight: true,\n        extraLarge: true,\n        children: t(\"diffTool.labels.areaFilterSelection\")\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_28__[\"default\"], {\n      bottom: 3\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n      styledMinHeight: \"40px\",\n      children: isPickingNewLocation ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_StyledText2, {\n        textLight: true,\n        extraExtraLarge: true,\n        bold: true\n        // Using legacy Loader.jsx means we override at a higher level to inherit\n        // this fills tyle\n        ,\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Loader__WEBPACK_IMPORTED_MODULE_33__[\"default\"], {\n          light: true,\n          message: \"Querying \".concat(location ? \"new\" : \"\", \" position...\")\n        })\n      }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n        textLight: true,\n        bold: true,\n        heading: true,\n        textAlignCenter: true,\n        children: locationText\n      })\n    })]\n  });\n};\nconst Group = styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"].div.withConfig({\n  displayName: \"DiffTool__Group\",\n  componentId: \"sc-3vyhxu-3\"\n})([\"background-color:\", \";padding:15px;border-radius:5px;\"], p => p.theme.darkWithOverlay);\nconst LocationAndDatesDisplayBox = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"]).attrs({\n  column: true\n}).withConfig({\n  displayName: \"DiffTool__LocationAndDatesDisplayBox\",\n  componentId: \"sc-3vyhxu-4\"\n})([\"color:\", \";padding:15px;> \", \":first-child{margin-bottom:13px;}> div > div:first-child{margin-right:5px;min-width:50px;}\"], p => p.theme.textLight, _Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"]);\nconst LegendImage = function (props) {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(\"img\", _objectSpread(_objectSpread({}, props), {}, {\n    // Show the legend only if it loads successfully, so we start out hidden\n    style: {\n      display: \"none\",\n      marginTop: \"10px\"\n    },\n    onLoad: e => e.currentTarget.style.display = \"block\",\n    onError: e => e.currentTarget.style.display = \"none\"\n  }));\n};\nasync function createSplitItem(sourceItem, splitDirection) {\n  const terria = sourceItem.terria;\n  const ref = new _Models_Catalog_CatalogReferences_SplitItemReference__WEBPACK_IMPORTED_MODULE_19__[\"default\"]((0,terriajs_cesium_Source_Core_createGuid__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(), terria);\n  ref.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"splitSourceItemId\", sourceItem.uniqueId);\n  terria.addModel(ref);\n  await ref.loadReference();\n  return (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n    var _newItem$styleSelecta;\n    if (ref.target === undefined) {\n      throw Error(\"failed to split item\");\n    }\n    const newItem = ref.target;\n    newItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"show\", true);\n    newItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"splitDirection\", splitDirection);\n    newItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"currentTime\", null);\n    newItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"initialTimeSource\", \"none\");\n    if (hasOpacity(newItem)) {\n      // We want to show the item on the map only after date selection. At the\n      // same time we cannot set `show` to false because if we\n      // do so, date picking which relies on feature picking, will not work. So\n      // we simply set the opacity of the item to 0.\n      newItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"opacity\", 0);\n    }\n\n    // Override feature info template as the parent featureInfoTemplate might\n    // not be relevant for the difference item. This has to be done in the user\n    // stratum to override template set in definition stratum.\n    (0,_Models_Definition_updateModelFromJson__WEBPACK_IMPORTED_MODULE_22__[\"default\"])(newItem, _Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, {\n      featureInfoTemplate: {\n        template: \"\"\n      }\n    });\n    setDefaultDiffStyle(newItem);\n\n    // Set the default style to true color style if it exists\n    const trueColor = (_newItem$styleSelecta = newItem.styleSelectableDimensions) === null || _newItem$styleSelecta === void 0 || (_newItem$styleSelecta = _newItem$styleSelecta[0]) === null || _newItem$styleSelecta === void 0 || (_newItem$styleSelecta = _newItem$styleSelecta.options) === null || _newItem$styleSelecta === void 0 ? void 0 : _newItem$styleSelecta.find(style => (0,_Core_isDefined__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(style.name) && style.name.search(/true/i) >= 0);\n    if (trueColor !== null && trueColor !== void 0 && trueColor.id) {\n      var _newItem$styleSelecta2;\n      (_newItem$styleSelecta2 = newItem.styleSelectableDimensions) === null || _newItem$styleSelecta2 === void 0 || (_newItem$styleSelecta2 = _newItem$styleSelecta2[0]) === null || _newItem$styleSelecta2 === void 0 || _newItem$styleSelecta2.setDimensionValue(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, trueColor.id);\n    }\n    terria.overlays.add(newItem);\n    return newItem;\n  });\n}\n\n/**\n * If the item has only one available diff style, auto-select it\n */\nfunction setDefaultDiffStyle(item) {\n  if (item.diffStyleId !== undefined) {\n    return;\n  }\n  const availableStyles = (0,_Core_filterOutUndefined__WEBPACK_IMPORTED_MODULE_14__[\"default\"])(item.availableDiffStyles.map(diffStyleId => {\n    var _item$styleSelectable;\n    return (_item$styleSelectable = item.styleSelectableDimensions) === null || _item$styleSelectable === void 0 || (_item$styleSelectable = _item$styleSelectable[0]) === null || _item$styleSelectable === void 0 || (_item$styleSelectable = _item$styleSelectable.options) === null || _item$styleSelectable === void 0 ? void 0 : _item$styleSelectable.find(style => style.id === diffStyleId);\n  }));\n  if (availableStyles.length === 1) {\n    item.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"diffStyleId\", availableStyles[0].id);\n  }\n}\nfunction removeSplitItem(item) {\n  const terria = item.terria;\n  terria.overlays.remove(item);\n  if (item.sourceReference && terria.workbench.contains(item) === false) {\n    terria.removeModelReferences(item.sourceReference);\n  }\n}\nfunction doesFeatureBelongToItem(feature, item) {\n  var _feature$imageryLayer;\n  if (!_ModelMixins_MappableMixin__WEBPACK_IMPORTED_MODULE_18__[\"default\"].isMixedInto(item)) return false;\n  const imageryProvider = (_feature$imageryLayer = feature.imageryLayer) === null || _feature$imageryLayer === void 0 ? void 0 : _feature$imageryLayer.imageryProvider;\n  if (imageryProvider === undefined) return false;\n  return item.mapItems.find(m => _ModelMixins_MappableMixin__WEBPACK_IMPORTED_MODULE_18__.ImageryParts.is(m) && m.imageryProvider === imageryProvider) !== undefined;\n}\nfunction setTimeFilterFromLocation(item, location, im) {\n  const carto = new terriajs_cesium_Source_Core_Cartographic__WEBPACK_IMPORTED_MODULE_9__[\"default\"](terriajs_cesium_Source_Core_Math__WEBPACK_IMPORTED_MODULE_11__[\"default\"].toRadians(location.longitude), terriajs_cesium_Source_Core_Math__WEBPACK_IMPORTED_MODULE_11__[\"default\"].toRadians(location.latitude));\n  // We just need to set this to a high enough level supported by the service\n  const level = 30;\n  const tile = im.tilingScheme.positionToTileXY(carto, level);\n  return item.setTimeFilterFromLocation({\n    position: {\n      latitude: location.latitude,\n      longitude: location.longitude,\n      height: location.height\n    },\n    tileCoords: {\n      x: tile.x,\n      y: tile.y,\n      level\n    }\n  });\n}\nfunction hasOpacity(model) {\n  return (0,_Models_Definition_hasTraits__WEBPACK_IMPORTED_MODULE_21__[\"default\"])(model, _Traits_TraitsClasses_ImageryProviderTraits__WEBPACK_IMPORTED_MODULE_30__[\"default\"], \"opacity\");\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DiffTool);\nvar _StyledDiv = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(\"div\").withConfig({\n  displayName: \"DiffTool___StyledDiv\",\n  componentId: \"sc-3vyhxu-5\"\n})([\"display:flex;flex-direction:column;height:100%;padding:15px;gap:20px;\"]);\nvar _StyledDiv2 = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(\"div\").withConfig({\n  displayName: \"DiffTool___StyledDiv2\",\n  componentId: \"sc-3vyhxu-6\"\n})([\"display:flex;flex-direction:row;padding:5px;\"]);\nvar _StyledDiv3 = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(\"div\").withConfig({\n  displayName: \"DiffTool___StyledDiv3\",\n  componentId: \"sc-3vyhxu-7\"\n})([\"margin-right:10px;\"]);\nvar _StyledStyledIcon = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Icon__WEBPACK_IMPORTED_MODULE_26__.StyledIcon).withConfig({\n  displayName: \"DiffTool___StyledStyledIcon\",\n  componentId: \"sc-3vyhxu-8\"\n})([\"transform:rotate(90deg);\"]);\nvar _StyledButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Button__WEBPACK_IMPORTED_MODULE_25__[\"default\"]).withConfig({\n  displayName: \"DiffTool___StyledButton\",\n  componentId: \"sc-3vyhxu-9\"\n})([\"flex-grow:1;margin-left:10px;\"]);\nvar _StyledText = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"]).withConfig({\n  displayName: \"DiffTool___StyledText\",\n  componentId: \"sc-3vyhxu-10\"\n})([\"\", \"\"], p => p.$_css3);\nvar _StyledBox = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"]).withConfig({\n  displayName: \"DiffTool___StyledBox\",\n  componentId: \"sc-3vyhxu-11\"\n})([\"@media (max-width:\", \"px){width:100%;}\"], props => props.theme.md);\nvar _StyledText2 = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"]).withConfig({\n  displayName: \"DiffTool___StyledText2\",\n  componentId: \"sc-3vyhxu-12\"\n})([\"fill:\", \";\"], _ref3 => {\n  let {\n    theme\n  } = _ref3;\n  return theme.textLight;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdGVycmlhanMvbGliL1JlYWN0Vmlld3MvVG9vbHMvRGlmZlRvb2wvRGlmZlRvb2wudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQVFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBR0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFHQTtBQUVBO0FBQ0E7QUFVQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBR0E7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFJQTtBQUlBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBSUE7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBVUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUdBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFLQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFJQTtBQUFBO0FBS0E7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBTUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFBQTtBQUNBO0FBR0E7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUdBO0FBT0E7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBSUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQUFBO0FBSkE7QUFDQTtBQUtBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFPQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFNQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBYUE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBOztBQUVBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBR0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFFQTtBQUtBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBdk1BO0FBQUE7QUFBQTtBQUFBO0FBc0JBO0FBQUE7QUFBQTtBQUFBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZXJyaWFqcy1tYXAvLi9ub2RlX21vZHVsZXMvdGVycmlhanMvbGliL1JlYWN0Vmlld3MvVG9vbHMvRGlmZlRvb2wvRGlmZlRvb2wudHN4PzUyZGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRhdGVGb3JtYXQgZnJvbSBcImRhdGVmb3JtYXRcIjtcbmltcG9ydCB7IHJ1bkluQWN0aW9uIH0gZnJvbSBcIm1vYnhcIjtcbmltcG9ydCB7IG9ic2VydmVyIH0gZnJvbSBcIm1vYngtcmVhY3RcIjtcbmltcG9ydCB7XG4gIENoYW5nZUV2ZW50LFxuICB1c2VDYWxsYmFjayxcbiAgdXNlRWZmZWN0LFxuICB1c2VNZW1vLFxuICB1c2VSZWYsXG4gIHVzZVN0YXRlXG59IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gXCJyZWFjdC1kb21cIjtcbmltcG9ydCB7IHVzZVRyYW5zbGF0aW9uIH0gZnJvbSBcInJlYWN0LWkxOG5leHRcIjtcbmltcG9ydCBzdHlsZWQsIHsgdXNlVGhlbWUgfSBmcm9tIFwic3R5bGVkLWNvbXBvbmVudHNcIjtcbmltcG9ydCBDYXJ0b2dyYXBoaWMgZnJvbSBcInRlcnJpYWpzLWNlc2l1bS9Tb3VyY2UvQ29yZS9DYXJ0b2dyYXBoaWNcIjtcbmltcG9ydCBKdWxpYW5EYXRlIGZyb20gXCJ0ZXJyaWFqcy1jZXNpdW0vU291cmNlL0NvcmUvSnVsaWFuRGF0ZVwiO1xuaW1wb3J0IENlc2l1bU1hdGggZnJvbSBcInRlcnJpYWpzLWNlc2l1bS9Tb3VyY2UvQ29yZS9NYXRoXCI7XG5pbXBvcnQgY3JlYXRlR3VpZCBmcm9tIFwidGVycmlhanMtY2VzaXVtL1NvdXJjZS9Db3JlL2NyZWF0ZUd1aWRcIjtcbmltcG9ydCBJbWFnZXJ5UHJvdmlkZXIgZnJvbSBcInRlcnJpYWpzLWNlc2l1bS9Tb3VyY2UvU2NlbmUvSW1hZ2VyeVByb3ZpZGVyXCI7XG5pbXBvcnQgU3BsaXREaXJlY3Rpb24gZnJvbSBcInRlcnJpYWpzLWNlc2l1bS9Tb3VyY2UvU2NlbmUvU3BsaXREaXJlY3Rpb25cIjtcbmltcG9ydCBMYXRMb25IZWlnaHQgZnJvbSBcIi4uLy4uLy4uL0NvcmUvTGF0TG9uSGVpZ2h0XCI7XG5pbXBvcnQgZmlsdGVyT3V0VW5kZWZpbmVkIGZyb20gXCIuLi8uLi8uLi9Db3JlL2ZpbHRlck91dFVuZGVmaW5lZFwiO1xuaW1wb3J0IGlzRGVmaW5lZCBmcm9tIFwiLi4vLi4vLi4vQ29yZS9pc0RlZmluZWRcIjtcbmltcG9ydCBQaWNrZWRGZWF0dXJlcyBmcm9tIFwiLi4vLi4vLi4vTWFwL1BpY2tlZEZlYXR1cmVzL1BpY2tlZEZlYXR1cmVzXCI7XG5pbXBvcnQgcHJldHRpZnlDb29yZGluYXRlcyBmcm9tIFwiLi4vLi4vLi4vTWFwL1ZlY3Rvci9wcmV0dGlmeUNvb3JkaW5hdGVzXCI7XG5pbXBvcnQgRGlmZmFibGVNaXhpbiBmcm9tIFwiLi4vLi4vLi4vTW9kZWxNaXhpbnMvRGlmZmFibGVNaXhpblwiO1xuaW1wb3J0IE1hcHBhYmxlTWl4aW4sIHtcbiAgSW1hZ2VyeVBhcnRzXG59IGZyb20gXCIuLi8uLi8uLi9Nb2RlbE1peGlucy9NYXBwYWJsZU1peGluXCI7XG5pbXBvcnQgU3BsaXRJdGVtUmVmZXJlbmNlIGZyb20gXCIuLi8uLi8uLi9Nb2RlbHMvQ2F0YWxvZy9DYXRhbG9nUmVmZXJlbmNlcy9TcGxpdEl0ZW1SZWZlcmVuY2VcIjtcbmltcG9ydCBDb21tb25TdHJhdGEgZnJvbSBcIi4uLy4uLy4uL01vZGVscy9EZWZpbml0aW9uL0NvbW1vblN0cmF0YVwiO1xuaW1wb3J0IGhhc1RyYWl0cywgeyBIYXNUcmFpdCB9IGZyb20gXCIuLi8uLi8uLi9Nb2RlbHMvRGVmaW5pdGlvbi9oYXNUcmFpdHNcIjtcbmltcG9ydCB1cGRhdGVNb2RlbEZyb21Kc29uIGZyb20gXCIuLi8uLi8uLi9Nb2RlbHMvRGVmaW5pdGlvbi91cGRhdGVNb2RlbEZyb21Kc29uXCI7XG5pbXBvcnQgVGVycmlhRmVhdHVyZSBmcm9tIFwiLi4vLi4vLi4vTW9kZWxzL0ZlYXR1cmUvRmVhdHVyZVwiO1xuaW1wb3J0IHtcbiAgZ2V0TWFya2VyTG9jYXRpb24sXG4gIHJlbW92ZU1hcmtlclxufSBmcm9tIFwiLi4vLi4vLi4vTW9kZWxzL0xvY2F0aW9uTWFya2VyVXRpbHNcIjtcbmltcG9ydCBUZXJyaWEgZnJvbSBcIi4uLy4uLy4uL01vZGVscy9UZXJyaWFcIjtcbmltcG9ydCBWaWV3U3RhdGUgZnJvbSBcIi4uLy4uLy4uL1JlYWN0Vmlld01vZGVscy9WaWV3U3RhdGVcIjtcbmltcG9ydCBCb3gsIHsgQm94U3BhbiB9IGZyb20gXCIuLi8uLi8uLi9TdHlsZWQvQm94XCI7XG5pbXBvcnQgQnV0dG9uLCB7IFJhd0J1dHRvbiB9IGZyb20gXCIuLi8uLi8uLi9TdHlsZWQvQnV0dG9uXCI7XG5pbXBvcnQgeyBHTFlQSFMsIFN0eWxlZEljb24gfSBmcm9tIFwiLi4vLi4vLi4vU3R5bGVkL0ljb25cIjtcbmltcG9ydCBTZWxlY3QgZnJvbSBcIi4uLy4uLy4uL1N0eWxlZC9TZWxlY3RcIjtcbmltcG9ydCBTcGFjaW5nIGZyb20gXCIuLi8uLi8uLi9TdHlsZWQvU3BhY2luZ1wiO1xuaW1wb3J0IFRleHQsIHsgVGV4dFNwYW4gfSBmcm9tIFwiLi4vLi4vLi4vU3R5bGVkL1RleHRcIjtcbmltcG9ydCBJbWFnZXJ5UHJvdmlkZXJUcmFpdHMgZnJvbSBcIi4uLy4uLy4uL1RyYWl0cy9UcmFpdHNDbGFzc2VzL0ltYWdlcnlQcm92aWRlclRyYWl0c1wiO1xuaW1wb3J0IHsgdXNlVmlld1N0YXRlIH0gZnJvbSBcIi4uLy4uL0NvbnRleHRcIjtcbmltcG9ydCB7IHBhcnNlQ3VzdG9tTWFya2Rvd25Ub1JlYWN0V2l0aE9wdGlvbnMgfSBmcm9tIFwiLi4vLi4vQ3VzdG9tL3BhcnNlQ3VzdG9tTWFya2Rvd25Ub1JlYWN0XCI7XG5pbXBvcnQgTG9hZGVyIGZyb20gXCIuLi8uLi9Mb2FkZXJcIjtcbmltcG9ydCBXb3JrZmxvd1BhbmVsIGZyb20gXCIuLi8uLi9Xb3JrZmxvdy9Xb3JrZmxvd1BhbmVsXCI7XG5pbXBvcnQgRGF0ZVBpY2tlciwgeyBJRGF0ZVBpY2tlckhhbmRsZSB9IGZyb20gXCIuL0RhdGVQaWNrZXJcIjtcbmltcG9ydCBMb2NhdGlvblBpY2tlciBmcm9tIFwiLi9Mb2NhdGlvblBpY2tlclwiO1xuXG50eXBlIERpZmZhYmxlSXRlbSA9IERpZmZhYmxlTWl4aW4uSW5zdGFuY2U7XG5cbmludGVyZmFjZSBQcm9wc1R5cGUge1xuICB2aWV3U3RhdGU6IFZpZXdTdGF0ZTtcbiAgc291cmNlSXRlbTogRGlmZmFibGVJdGVtO1xufVxuXG5jb25zdCBEaWZmVG9vbDogUmVhY3QuRkM8UHJvcHNUeXBlPiA9IG9ic2VydmVyKChwcm9wczogUHJvcHNUeXBlKSA9PiB7XG4gIGNvbnN0IFtsZWZ0SXRlbSwgc2V0TGVmdEl0ZW1dID0gdXNlU3RhdGU8RGlmZmFibGVJdGVtPigpO1xuICBjb25zdCBbcmlnaHRJdGVtLCBzZXRSaWdodEl0ZW1dID0gdXNlU3RhdGU8RGlmZmFibGVJdGVtPigpO1xuICBjb25zdCBbdXNlclNlbGVjdGVkU291cmNlSXRlbSwgc2V0VXNlclNlbGVjdGVkU291cmNlSXRlbV0gPVxuICAgIHVzZVN0YXRlPERpZmZhYmxlSXRlbT4oKTtcbiAgY29uc3Qgdmlld1N0YXRlID0gdXNlVmlld1N0YXRlKCk7XG5cbiAgY29uc3QgY2hhbmdlU291cmNlSXRlbSA9IChzb3VyY2VJdGVtOiBEaWZmYWJsZUl0ZW0pID0+IHtcbiAgICBzZXRVc2VyU2VsZWN0ZWRTb3VyY2VJdGVtKHNvdXJjZUl0ZW0pO1xuICB9O1xuXG4gIGNvbnN0IHNvdXJjZUl0ZW0gPSB1c2VNZW1vKFxuICAgICgpID0+IHVzZXJTZWxlY3RlZFNvdXJjZUl0ZW0gfHwgcHJvcHMuc291cmNlSXRlbSxcbiAgICBbcHJvcHMuc291cmNlSXRlbSwgdXNlclNlbGVjdGVkU291cmNlSXRlbV1cbiAgKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHRlcnJpYSA9IHZpZXdTdGF0ZS50ZXJyaWE7XG4gICAgY29uc3Qgb3JpZ2luYWxTZXR0aW5ncyA9IHtcbiAgICAgIHNob3dTcGxpdHRlcjogdGVycmlhLnNob3dTcGxpdHRlcixcbiAgICAgIGlzTWFwRnVsbFNjcmVlbjogdmlld1N0YXRlLmlzTWFwRnVsbFNjcmVlblxuICAgIH07XG4gICAgcnVuSW5BY3Rpb24oKCkgPT4ge1xuICAgICAgdGVycmlhLnNob3dTcGxpdHRlciA9IHRydWU7XG4gICAgICBzb3VyY2VJdGVtLnNldFRyYWl0KENvbW1vblN0cmF0YS51c2VyLCBcInNob3dcIiwgZmFsc2UpO1xuICAgICAgdGVycmlhLmVsZW1lbnRzLnNldChcInRpbWVsaW5lXCIsIHsgdmlzaWJsZTogZmFsc2UgfSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBpdGVtc1Byb21pc2UgPSBQcm9taXNlLmFsbChbXG4gICAgICBjcmVhdGVTcGxpdEl0ZW0oc291cmNlSXRlbSwgU3BsaXREaXJlY3Rpb24uTEVGVCksXG4gICAgICBjcmVhdGVTcGxpdEl0ZW0oc291cmNlSXRlbSwgU3BsaXREaXJlY3Rpb24uUklHSFQpXG4gICAgXSk7XG5cbiAgICBpdGVtc1Byb21pc2VcbiAgICAgIC50aGVuKChbbEl0ZW0sIHJJdGVtXSkgPT4ge1xuICAgICAgICBzZXRMZWZ0SXRlbShsSXRlbSk7XG4gICAgICAgIHNldFJpZ2h0SXRlbShySXRlbSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcnVuSW5BY3Rpb24oKCkgPT4ge1xuICAgICAgICB0ZXJyaWEuc2hvd1NwbGl0dGVyID0gb3JpZ2luYWxTZXR0aW5ncy5zaG93U3BsaXR0ZXI7XG4gICAgICAgIHZpZXdTdGF0ZS5zZXRJc01hcEZ1bGxTY3JlZW4ob3JpZ2luYWxTZXR0aW5ncy5pc01hcEZ1bGxTY3JlZW4pO1xuICAgICAgICBzb3VyY2VJdGVtLnNldFRyYWl0KENvbW1vblN0cmF0YS51c2VyLCBcInNob3dcIiwgdHJ1ZSk7XG4gICAgICAgIHRlcnJpYS5lbGVtZW50cy5zZXQoXCJ0aW1lbGluZVwiLCB7IHZpc2libGU6IHRydWUgfSk7XG4gICAgICB9KTtcblxuICAgICAgaXRlbXNQcm9taXNlLnRoZW4oKFtsSXRlbSwgckl0ZW1dKSA9PiB7XG4gICAgICAgIGlmIChsSXRlbSkgcmVtb3ZlU3BsaXRJdGVtKGxJdGVtKTtcbiAgICAgICAgaWYgKHJJdGVtKSByZW1vdmVTcGxpdEl0ZW0ockl0ZW0pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSwgW3NvdXJjZUl0ZW0sIHZpZXdTdGF0ZV0pO1xuXG4gIGlmIChsZWZ0SXRlbSAmJiByaWdodEl0ZW0pIHtcbiAgICByZXR1cm4gKFxuICAgICAgPE1haW5cbiAgICAgICAgey4uLnByb3BzfVxuICAgICAgICB0ZXJyaWE9e3Byb3BzLnZpZXdTdGF0ZS50ZXJyaWF9XG4gICAgICAgIHNvdXJjZUl0ZW09e3NvdXJjZUl0ZW19XG4gICAgICAgIGNoYW5nZVNvdXJjZUl0ZW09e2NoYW5nZVNvdXJjZUl0ZW19XG4gICAgICAgIGxlZnRJdGVtPXtsZWZ0SXRlbX1cbiAgICAgICAgcmlnaHRJdGVtPXtyaWdodEl0ZW19XG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn0pO1xuRGlmZlRvb2wuZGlzcGxheU5hbWUgPSBcIkRpZmZUb29sXCI7XG5pbnRlcmZhY2UgTWFpblByb3BzVHlwZSBleHRlbmRzIFByb3BzVHlwZSB7XG4gIHRlcnJpYTogVGVycmlhO1xuICBsZWZ0SXRlbTogRGlmZmFibGVJdGVtO1xuICByaWdodEl0ZW06IERpZmZhYmxlSXRlbTtcbiAgY2hhbmdlU291cmNlSXRlbTogKG5ld1NvdXJjZUl0ZW06IERpZmZhYmxlSXRlbSkgPT4gdm9pZDtcbn1cblxuY29uc3QgTWFpbjogUmVhY3QuRkM8TWFpblByb3BzVHlwZT4gPSBvYnNlcnZlcigocHJvcHMpID0+IHtcbiAgY29uc3QgeyB0ZXJyaWEsIHZpZXdTdGF0ZSwgc291cmNlSXRlbSwgbGVmdEl0ZW0sIHJpZ2h0SXRlbSB9ID0gcHJvcHM7XG5cbiAgY29uc3QgeyB0IH0gPSB1c2VUcmFuc2xhdGlvbigpO1xuICBjb25zdCB0aGVtZSA9IHVzZVRoZW1lKCk7XG5cbiAgY29uc3QgW2xvY2F0aW9uLCBzZXRMb2NhdGlvbl0gPSB1c2VTdGF0ZTxMYXRMb25IZWlnaHQgfCB1bmRlZmluZWQ+KCk7XG4gIGNvbnN0IFssIHNldExvY2F0aW9uUGlja0Vycm9yXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzUGlja2luZ05ld0xvY2F0aW9uLCBzZXRJc1BpY2tpbmdOZXdMb2NhdGlvbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgY29uc3QgbGVmdERhdGVQaWNrZXJIYW5kbGUgPSB1c2VSZWY8SURhdGVQaWNrZXJIYW5kbGU+KG51bGwpO1xuICBjb25zdCByaWdodERhdGVQaWNrZXJIYW5kbGUgPSB1c2VSZWY8SURhdGVQaWNrZXJIYW5kbGU+KG51bGwpO1xuXG4gIGNvbnN0IGRpZmZJdGVtID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGxlZnRJdGVtO1xuICB9LCBbbGVmdEl0ZW1dKTtcblxuICBjb25zdCBjdXJyZW50TGVmdERhdGUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gbGVmdEl0ZW0uY3VycmVudERpc2NyZXRlSnVsaWFuRGF0ZTtcbiAgfSwgW2xlZnRJdGVtLmN1cnJlbnREaXNjcmV0ZUp1bGlhbkRhdGVdKTtcblxuICBjb25zdCBjdXJyZW50UmlnaHREYXRlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHJpZ2h0SXRlbS5jdXJyZW50RGlzY3JldGVKdWxpYW5EYXRlO1xuICB9LCBbcmlnaHRJdGVtLmN1cnJlbnREaXNjcmV0ZUp1bGlhbkRhdGVdKTtcblxuICBjb25zdCBkaWZmSXRlbU5hbWUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICBjb25zdCBuYW1lID0gc291cmNlSXRlbS5uYW1lIHx8IFwiXCI7XG4gICAgY29uc3QgZm9ybWF0ID0gXCJ5eXl5L21tL2RkXCI7XG4gICAgaWYgKCFjdXJyZW50TGVmdERhdGUgfHwgIWN1cnJlbnRSaWdodERhdGUpIHtcbiAgICAgIHJldHVybiBuYW1lO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkMSA9IGRhdGVGb3JtYXQoSnVsaWFuRGF0ZS50b0RhdGUoY3VycmVudExlZnREYXRlKSwgZm9ybWF0KTtcbiAgICAgIGNvbnN0IGQyID0gZGF0ZUZvcm1hdChKdWxpYW5EYXRlLnRvRGF0ZShjdXJyZW50UmlnaHREYXRlKSwgZm9ybWF0KTtcbiAgICAgIHJldHVybiBgJHtuYW1lfSAtIGRpZmZlcmVuY2UgZm9yIGRhdGVzICR7ZDF9LCAke2QyfWA7XG4gICAgfVxuICB9LCBbY3VycmVudExlZnREYXRlLCBjdXJyZW50UmlnaHREYXRlLCBzb3VyY2VJdGVtLm5hbWVdKTtcblxuICBjb25zdCBkaWZmYWJsZUl0ZW1zSW5Xb3JrYmVuY2ggPSB1c2VNZW1vKCgpOiBEaWZmYWJsZUl0ZW1bXSA9PiB7XG4gICAgcmV0dXJuIHRlcnJpYS53b3JrYmVuY2guaXRlbXMuZmlsdGVyKFxuICAgICAgKGl0ZW0pID0+IERpZmZhYmxlTWl4aW4uaXNNaXhlZEludG8oaXRlbSkgJiYgaXRlbS5jYW5EaWZmSW1hZ2VzXG4gICAgKSBhcyBEaWZmYWJsZUl0ZW1bXTtcbiAgfSwgW3RlcnJpYS53b3JrYmVuY2guaXRlbXNdKTtcblxuICBjb25zdCBwcmV2aWV3U3R5bGUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gZGlmZkl0ZW0uc3R5bGVTZWxlY3RhYmxlRGltZW5zaW9ucz8uWzBdPy5zZWxlY3RlZElkO1xuICB9LCBbZGlmZkl0ZW0uc3R5bGVTZWxlY3RhYmxlRGltZW5zaW9uc10pO1xuXG4gIGNvbnN0IGN1cnJlbnREaWZmU3R5bGUgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gZGlmZkl0ZW0uZGlmZlN0eWxlSWQ7XG4gIH0sIFtkaWZmSXRlbS5kaWZmU3R5bGVJZF0pO1xuXG4gIGNvbnN0IGF2YWlsYWJsZURpZmZTdHlsZXMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gZmlsdGVyT3V0VW5kZWZpbmVkKFxuICAgICAgZGlmZkl0ZW0uYXZhaWxhYmxlRGlmZlN0eWxlcy5tYXAoKGRpZmZTdHlsZUlkKSA9PlxuICAgICAgICBkaWZmSXRlbS5zdHlsZVNlbGVjdGFibGVEaW1lbnNpb25zPy5bMF0/Lm9wdGlvbnM/LmZpbmQoXG4gICAgICAgICAgKHN0eWxlKSA9PiBzdHlsZS5pZCA9PT0gZGlmZlN0eWxlSWRcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7XG4gIH0sIFtkaWZmSXRlbS5hdmFpbGFibGVEaWZmU3R5bGVzLCBkaWZmSXRlbS5zdHlsZVNlbGVjdGFibGVEaW1lbnNpb25zXSk7XG5cbiAgY29uc3QgZGlmZkxlZ2VuZFVybCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICBjdXJyZW50RGlmZlN0eWxlICYmXG4gICAgICBjdXJyZW50TGVmdERhdGUgJiZcbiAgICAgIGN1cnJlbnRSaWdodERhdGUgJiZcbiAgICAgIGRpZmZJdGVtLmdldExlZ2VuZFVybEZvclN0eWxlKFxuICAgICAgICBjdXJyZW50RGlmZlN0eWxlLFxuICAgICAgICBjdXJyZW50TGVmdERhdGUsXG4gICAgICAgIGN1cnJlbnRSaWdodERhdGVcbiAgICAgIClcbiAgICApO1xuICB9LCBbY3VycmVudERpZmZTdHlsZSwgY3VycmVudExlZnREYXRlLCBjdXJyZW50UmlnaHREYXRlLCBkaWZmSXRlbV0pO1xuXG4gIGNvbnN0IHByZXZpZXdMZWdlbmRVcmwgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gcHJldmlld1N0eWxlICYmIGRpZmZJdGVtLmdldExlZ2VuZFVybEZvclN0eWxlKHByZXZpZXdTdHlsZSk7XG4gIH0sIFtwcmV2aWV3U3R5bGUsIGRpZmZJdGVtXSk7XG5cbiAgY29uc3Qgc2hvd0l0ZW0gPSB1c2VDYWxsYmFjaygobW9kZWw6IERpZmZhYmxlSXRlbSkgPT4ge1xuICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgIGlmIChoYXNPcGFjaXR5KG1vZGVsKSkge1xuICAgICAgICBtb2RlbC5zZXRUcmFpdChDb21tb25TdHJhdGEudXNlciwgXCJvcGFjaXR5XCIsIDAuOCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBoaWRlSXRlbSA9IHVzZUNhbGxiYWNrKChtb2RlbDogRGlmZmFibGVJdGVtKSA9PiB7XG4gICAgcnVuSW5BY3Rpb24oKCkgPT4ge1xuICAgICAgaWYgKGhhc09wYWNpdHkobW9kZWwpKSB7XG4gICAgICAgIG1vZGVsLnNldFRyYWl0KENvbW1vblN0cmF0YS51c2VyLCBcIm9wYWNpdHlcIiwgMCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCBoYW5kbGVDaGFuZ2VTb3VyY2VJdGVtID0gdXNlQ2FsbGJhY2soXG4gICAgKGU6IENoYW5nZUV2ZW50PEhUTUxTZWxlY3RFbGVtZW50PikgPT4ge1xuICAgICAgY29uc3QgbmV3U291cmNlSXRlbSA9IGRpZmZhYmxlSXRlbXNJbldvcmtiZW5jaC5maW5kKFxuICAgICAgICAoaXRlbSkgPT4gaXRlbS51bmlxdWVJZCA9PT0gZS50YXJnZXQudmFsdWVcbiAgICAgICk7XG4gICAgICBpZiAobmV3U291cmNlSXRlbSkgcHJvcHMuY2hhbmdlU291cmNlSXRlbShuZXdTb3VyY2VJdGVtKTtcbiAgICB9LFxuICAgIFtkaWZmYWJsZUl0ZW1zSW5Xb3JrYmVuY2gsIHByb3BzXVxuICApO1xuXG4gIGNvbnN0IGhhbmRsZUNoYW5nZVByZXZpZXdTdHlsZSA9IHVzZUNhbGxiYWNrKFxuICAgIChlOiBDaGFuZ2VFdmVudDxIVE1MU2VsZWN0RWxlbWVudD4pID0+IHtcbiAgICAgIGNvbnN0IHN0eWxlSWQgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgICAgbGVmdEl0ZW0uc3R5bGVTZWxlY3RhYmxlRGltZW5zaW9ucz8uWzBdPy5zZXREaW1lbnNpb25WYWx1ZShcbiAgICAgICAgICBDb21tb25TdHJhdGEudXNlcixcbiAgICAgICAgICBzdHlsZUlkXG4gICAgICAgICk7XG4gICAgICAgIHJpZ2h0SXRlbS5zdHlsZVNlbGVjdGFibGVEaW1lbnNpb25zPy5bMF0/LnNldERpbWVuc2lvblZhbHVlKFxuICAgICAgICAgIENvbW1vblN0cmF0YS51c2VyLFxuICAgICAgICAgIHN0eWxlSWRcbiAgICAgICAgKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW2xlZnRJdGVtLnN0eWxlU2VsZWN0YWJsZURpbWVuc2lvbnMsIHJpZ2h0SXRlbS5zdHlsZVNlbGVjdGFibGVEaW1lbnNpb25zXVxuICApO1xuXG4gIGNvbnN0IGhhbmRsZUNoYW5nZURpZmZTdHlsZSA9IHVzZUNhbGxiYWNrKFxuICAgIChlOiBDaGFuZ2VFdmVudDxIVE1MU2VsZWN0RWxlbWVudD4pID0+IHtcbiAgICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgICAgZGlmZkl0ZW0uc2V0VHJhaXQoQ29tbW9uU3RyYXRhLnVzZXIsIFwiZGlmZlN0eWxlSWRcIiwgZS50YXJnZXQudmFsdWUpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbZGlmZkl0ZW1dXG4gICk7XG5cbiAgY29uc3Qgb25Vc2VyUGlja2luZ0xvY2F0aW9uID0gdXNlQ2FsbGJhY2soXG4gICAgKF9waWNraW5nTG9jYXRpb246IExhdExvbkhlaWdodCkgPT4ge1xuICAgICAgc2V0SXNQaWNraW5nTmV3TG9jYXRpb24odHJ1ZSk7XG4gICAgfSxcbiAgICBbXVxuICApO1xuXG4gIGNvbnN0IG9uVXNlclBpY2tMb2NhdGlvbiA9IHVzZUNhbGxiYWNrKFxuICAgIChwaWNrZWRGZWF0dXJlczogUGlja2VkRmVhdHVyZXMsIHBpY2tlZExvY2F0aW9uVmFsdWU6IExhdExvbkhlaWdodCkgPT4ge1xuICAgICAgY29uc3QgZmVhdHVyZSA9IHBpY2tlZEZlYXR1cmVzLmZlYXR1cmVzLmZpbmQoXG4gICAgICAgIChmKSA9PlxuICAgICAgICAgIGRvZXNGZWF0dXJlQmVsb25nVG9JdGVtKGYsIGxlZnRJdGVtKSB8fFxuICAgICAgICAgIGRvZXNGZWF0dXJlQmVsb25nVG9JdGVtKGYsIHJpZ2h0SXRlbSlcbiAgICAgICk7XG5cbiAgICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgICAgaWYgKGZlYXR1cmUpIHtcbiAgICAgICAgICBsZWZ0SXRlbS5zZXRUaW1lRmlsdGVyRmVhdHVyZShmZWF0dXJlLCBwaWNrZWRGZWF0dXJlcy5wcm92aWRlckNvb3Jkcyk7XG4gICAgICAgICAgcmlnaHRJdGVtLnNldFRpbWVGaWx0ZXJGZWF0dXJlKFxuICAgICAgICAgICAgZmVhdHVyZSxcbiAgICAgICAgICAgIHBpY2tlZEZlYXR1cmVzLnByb3ZpZGVyQ29vcmRzXG4gICAgICAgICAgKTtcbiAgICAgICAgICBzZXRMb2NhdGlvbihwaWNrZWRMb2NhdGlvblZhbHVlKTtcbiAgICAgICAgICBzZXRMb2NhdGlvblBpY2tFcnJvcihmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2V0TG9jYXRpb25QaWNrRXJyb3IodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0SXNQaWNraW5nTmV3TG9jYXRpb24oZmFsc2UpO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBbbGVmdEl0ZW0sIHJpZ2h0SXRlbV1cbiAgKTtcblxuICBjb25zdCB1bnNldERhdGVzID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgIGxlZnRJdGVtLnNldFRyYWl0KENvbW1vblN0cmF0YS51c2VyLCBcImN1cnJlbnRUaW1lXCIsIG51bGwpO1xuICAgICAgcmlnaHRJdGVtLnNldFRyYWl0KENvbW1vblN0cmF0YS51c2VyLCBcImN1cnJlbnRUaW1lXCIsIG51bGwpO1xuICAgIH0pO1xuICAgIGhpZGVJdGVtKGxlZnRJdGVtKTtcbiAgICBoaWRlSXRlbShyaWdodEl0ZW0pO1xuICB9LCBbbGVmdEl0ZW0sIHJpZ2h0SXRlbSwgaGlkZUl0ZW1dKTtcblxuICBjb25zdCBnZW5lcmF0ZURpZmYgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaWYgKFxuICAgICAgY3VycmVudExlZnREYXRlID09PSB1bmRlZmluZWQgfHxcbiAgICAgIGN1cnJlbnRSaWdodERhdGUgPT09IHVuZGVmaW5lZCB8fFxuICAgICAgY3VycmVudERpZmZTdHlsZSA9PT0gdW5kZWZpbmVkXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgIHRlcnJpYS5vdmVybGF5cy5yZW1vdmUobGVmdEl0ZW0pO1xuICAgICAgdGVycmlhLm92ZXJsYXlzLnJlbW92ZShyaWdodEl0ZW0pO1xuICAgICAgdGVycmlhLndvcmtiZW5jaC5hZGQoZGlmZkl0ZW0pO1xuICAgICAgZGlmZkl0ZW0uc2V0VHJhaXQoQ29tbW9uU3RyYXRhLnVzZXIsIFwibmFtZVwiLCBkaWZmSXRlbU5hbWUpO1xuICAgICAgZGlmZkl0ZW0uc2hvd0RpZmZJbWFnZShcbiAgICAgICAgY3VycmVudExlZnREYXRlLFxuICAgICAgICBjdXJyZW50UmlnaHREYXRlLFxuICAgICAgICBjdXJyZW50RGlmZlN0eWxlXG4gICAgICApO1xuXG4gICAgICBjb25zdCBkaWZmSXRlbVByb3BlcnRpZXMgPSBkaWZmSXRlbS5kaWZmSXRlbVByb3BlcnRpZXM7XG4gICAgICBpZiAoZGlmZkl0ZW1Qcm9wZXJ0aWVzKSB7XG4gICAgICAgIHVwZGF0ZU1vZGVsRnJvbUpzb24oZGlmZkl0ZW0sIENvbW1vblN0cmF0YS51c2VyLCBkaWZmSXRlbVByb3BlcnRpZXMpO1xuICAgICAgfVxuICAgICAgdGVycmlhLnNob3dTcGxpdHRlciA9IGZhbHNlO1xuICAgIH0pO1xuICB9LCBbXG4gICAgY3VycmVudERpZmZTdHlsZSxcbiAgICBjdXJyZW50TGVmdERhdGUsXG4gICAgY3VycmVudFJpZ2h0RGF0ZSxcbiAgICBkaWZmSXRlbSxcbiAgICBkaWZmSXRlbU5hbWUsXG4gICAgbGVmdEl0ZW0sXG4gICAgcmlnaHRJdGVtLFxuICAgIHRlcnJpYVxuICBdKTtcblxuICBjb25zdCByZXNldFRvb2wgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgcnVuSW5BY3Rpb24oKCkgPT4ge1xuICAgICAgZGlmZkl0ZW0uY2xlYXJEaWZmSW1hZ2UoKTtcbiAgICAgIHNldERlZmF1bHREaWZmU3R5bGUoZGlmZkl0ZW0pO1xuICAgICAgdGVycmlhLm92ZXJsYXlzLmFkZChsZWZ0SXRlbSk7XG4gICAgICB0ZXJyaWEub3ZlcmxheXMuYWRkKHJpZ2h0SXRlbSk7XG4gICAgICB0ZXJyaWEud29ya2JlbmNoLnJlbW92ZShkaWZmSXRlbSk7XG4gICAgICB0ZXJyaWEuc2hvd1NwbGl0dGVyID0gdHJ1ZTtcbiAgICAgIGxlZnRJdGVtLnNldFRyYWl0KFxuICAgICAgICBDb21tb25TdHJhdGEudXNlcixcbiAgICAgICAgXCJzcGxpdERpcmVjdGlvblwiLFxuICAgICAgICBTcGxpdERpcmVjdGlvbi5MRUZUXG4gICAgICApO1xuICAgICAgcmlnaHRJdGVtLnNldFRyYWl0KFxuICAgICAgICBDb21tb25TdHJhdGEudXNlcixcbiAgICAgICAgXCJzcGxpdERpcmVjdGlvblwiLFxuICAgICAgICBTcGxpdERpcmVjdGlvbi5SSUdIVFxuICAgICAgKTtcbiAgICB9KTtcbiAgfSwgW2RpZmZJdGVtLCBsZWZ0SXRlbSwgcmlnaHRJdGVtLCB0ZXJyaWFdKTtcblxuICBjb25zdCBzZXRMb2NhdGlvbkZyb21BY3RpdmVTZWFyY2ggPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbWFya2VyTG9jYXRpb24gPSBnZXRNYXJrZXJMb2NhdGlvbih0ZXJyaWEpO1xuICAgIGlmIChtYXJrZXJMb2NhdGlvbiAmJiBNYXBwYWJsZU1peGluLmlzTWl4ZWRJbnRvKHNvdXJjZUl0ZW0pKSB7XG4gICAgICBjb25zdCBwYXJ0ID0gc291cmNlSXRlbS5tYXBJdGVtcy5maW5kKChwKSA9PiBJbWFnZXJ5UGFydHMuaXMocCkpO1xuICAgICAgY29uc3QgaW1hZ2VyeVByb3ZpZGVyID1cbiAgICAgICAgcGFydCAmJiBJbWFnZXJ5UGFydHMuaXMocGFydCkgJiYgcGFydC5pbWFnZXJ5UHJvdmlkZXI7XG4gICAgICBpZiAoaW1hZ2VyeVByb3ZpZGVyKSB7XG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gW1xuICAgICAgICAgIHNldFRpbWVGaWx0ZXJGcm9tTG9jYXRpb24obGVmdEl0ZW0sIG1hcmtlckxvY2F0aW9uLCBpbWFnZXJ5UHJvdmlkZXIpLFxuICAgICAgICAgIHNldFRpbWVGaWx0ZXJGcm9tTG9jYXRpb24ocmlnaHRJdGVtLCBtYXJrZXJMb2NhdGlvbiwgaW1hZ2VyeVByb3ZpZGVyKVxuICAgICAgICBdO1xuICAgICAgICBjb25zdCBzb21lU3VjY2Vzc2Z1bCA9IChhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcykpLnNvbWUoKG9rKSA9PiBvayk7XG4gICAgICAgIGlmIChzb21lU3VjY2Vzc2Z1bCkge1xuICAgICAgICAgIHJ1bkluQWN0aW9uKCgpID0+IHNldExvY2F0aW9uKG1hcmtlckxvY2F0aW9uKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgd2UgY2Fubm90IHJlc29sdmUgaW1hZ2VyeSBhdCB0aGUgbWFya2VyIGxvY2F0aW9uLCByZW1vdmUgaXRcbiAgICAgICAgICBydW5JbkFjdGlvbigoKSA9PiByZW1vdmVNYXJrZXIodGVycmlhKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtsZWZ0SXRlbSwgcmlnaHRJdGVtLCBzb3VyY2VJdGVtLCB0ZXJyaWFdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHsgbGF0aXR1ZGUsIGxvbmdpdHVkZSwgaGVpZ2h0IH0gPSBkaWZmSXRlbS50aW1lRmlsdGVyQ29vcmRpbmF0ZXM7XG4gICAgaWYgKGxhdGl0dWRlICE9PSB1bmRlZmluZWQgJiYgbG9uZ2l0dWRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHNldExvY2F0aW9uKHsgbGF0aXR1ZGUsIGxvbmdpdHVkZSwgaGVpZ2h0IH0pO1xuICAgICAgLy8gQXNzdW1pbmcgcmVtb3ZlTWFya2VyIGlzIGFuIGFjdGlvbiBvciBoYW5kbGVzIGl0cyBvd24gTW9iWCB0cmFuc2FjdGlvbnNcbiAgICAgIHJlbW92ZU1hcmtlcih0ZXJyaWEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRMb2NhdGlvbkZyb21BY3RpdmVTZWFyY2goKTtcbiAgICB9XG4gIH0sIFtkaWZmSXRlbS50aW1lRmlsdGVyQ29vcmRpbmF0ZXMsIHNldExvY2F0aW9uRnJvbUFjdGl2ZVNlYXJjaCwgdGVycmlhXSk7XG5cbiAgY29uc3QgY2xvc2VQYW5lbCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICB2aWV3U3RhdGUuY2xvc2VUb29sKCk7XG4gIH0sIFt2aWV3U3RhdGVdKTtcblxuICBjb25zdCBpc1Nob3dpbmdEaWZmID0gZGlmZkl0ZW0uaXNTaG93aW5nRGlmZjtcbiAgY29uc3QgZGF0ZXNTZWxlY3RlZCA9IGN1cnJlbnRMZWZ0RGF0ZSAmJiBjdXJyZW50UmlnaHREYXRlO1xuICBjb25zdCBpc1JlYWR5VG9HZW5lcmF0ZURpZmYgPVxuICAgIGxvY2F0aW9uICYmIGRhdGVzU2VsZWN0ZWQgJiYgY3VycmVudERpZmZTdHlsZSAhPT0gdW5kZWZpbmVkO1xuXG4gIHJldHVybiAoXG4gICAgPFdvcmtmbG93UGFuZWxcbiAgICAgIHZpZXdTdGF0ZT17dmlld1N0YXRlfVxuICAgICAgdGl0bGU9e3QoXCJkaWZmVG9vbC50aXRsZVwiKX1cbiAgICAgIGljb249e0dMWVBIUy5kaWZmZXJlbmNlfVxuICAgICAgb25DbG9zZT17KCkgPT4ge1xuICAgICAgICByZXNldFRvb2woKTtcbiAgICAgICAgY2xvc2VQYW5lbCgpO1xuICAgICAgfX1cbiAgICA+XG4gICAgICA8ZGl2XG4gICAgICAgIGNzcz17YFxuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICBnYXA6IDIwcHg7XG4gICAgICAgIGB9XG4gICAgICA+XG4gICAgICAgIHtpc1Nob3dpbmdEaWZmICYmIChcbiAgICAgICAgICA8VGV4dCBtZWRpdW0gdGV4dExpZ2h0PlxuICAgICAgICAgICAge3QoXCJkaWZmVG9vbC5kaWZmZXJlbmNlUmVzdWx0c1RpdGxlXCIpfVxuICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgKX1cbiAgICAgICAgPFRleHQgdGV4dExpZ2h0Pnt0KFwiZGlmZlRvb2wuaW5zdHJ1Y3Rpb25zLnBhbmVEZXNjcmlwdGlvblwiKX08L1RleHQ+XG4gICAgICAgIDxHcm91cD5cbiAgICAgICAgICA8TG9jYXRpb25BbmREYXRlc0Rpc3BsYXlCb3g+XG4gICAgICAgICAgICA8Qm94PlxuICAgICAgICAgICAgICA8VGV4dCBtZWRpdW0+e3QoXCJkaWZmVG9vbC5sYWJlbHMuYXJlYVwiKX06PC9UZXh0PlxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxUZXh0IGJvbGQgdGV4dExpZ2h0PlxuICAgICAgICAgICAgICAgICAge2xvY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgID8gdChcImRpZmZUb29sLmxvY2F0aW9uRGlzcGxheS5sb2NhdGlvblNlbGVjdGVkLnRpdGxlXCIpXG4gICAgICAgICAgICAgICAgICAgIDogdChcImRpZmZUb29sLmxvY2F0aW9uRGlzcGxheS5ub0xvY2F0aW9uU2VsZWN0ZWQudGl0bGVcIil9XG4gICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgIDxUZXh0IGxpZ2h0IHRleHRMaWdodCBzbWFsbD5cbiAgICAgICAgICAgICAgICAgIHtsb2NhdGlvblxuICAgICAgICAgICAgICAgICAgICA/IHQoXCJkaWZmVG9vbC5sb2NhdGlvbkRpc3BsYXkubG9jYXRpb25TZWxlY3RlZC5kZXNjcmlwdGlvblwiKVxuICAgICAgICAgICAgICAgICAgICA6IHQoXG4gICAgICAgICAgICAgICAgICAgICAgICBcImRpZmZUb29sLmxvY2F0aW9uRGlzcGxheS5ub0xvY2F0aW9uU2VsZWN0ZWQuZGVzY3JpcHRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgPEJveD5cbiAgICAgICAgICAgICAgPFRleHQgbWVkaXVtPnt0KFwiZGlmZlRvb2wubGFiZWxzLmRhdGVzXCIpfTo8L1RleHQ+XG4gICAgICAgICAgICAgIDxCb3ggY29sdW1uIGFsaWduSXRlbXNGbGV4U3RhcnQ+XG4gICAgICAgICAgICAgICAge2N1cnJlbnRMZWZ0RGF0ZSAmJiAoXG4gICAgICAgICAgICAgICAgICA8VGV4dCBsYXJnZT5cbiAgICAgICAgICAgICAgICAgICAgKEEpe1wiIFwifVxuICAgICAgICAgICAgICAgICAgICB7ZGF0ZUZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgICBKdWxpYW5EYXRlLnRvRGF0ZShjdXJyZW50TGVmdERhdGUpLFxuICAgICAgICAgICAgICAgICAgICAgIFwiZGQvbW0veXl5eVwiXG4gICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICB7IWN1cnJlbnRMZWZ0RGF0ZSAmJiAoXG4gICAgICAgICAgICAgICAgICA8UmF3QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGxlZnREYXRlUGlja2VySGFuZGxlLmN1cnJlbnQ/Lm9wZW4oKX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFRleHRTcGFuIGlzTGluayBzbWFsbCBib2xkPlxuICAgICAgICAgICAgICAgICAgICAgIHt0KFwiZGlmZlRvb2wuaW5zdHJ1Y3Rpb25zLnNldERhdGVBXCIpfVxuICAgICAgICAgICAgICAgICAgICA8L1RleHRTcGFuPlxuICAgICAgICAgICAgICAgICAgPC9SYXdCdXR0b24+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICB7Y3VycmVudFJpZ2h0RGF0ZSAmJiAoXG4gICAgICAgICAgICAgICAgICA8VGV4dCBsYXJnZT5cbiAgICAgICAgICAgICAgICAgICAgKEIpe1wiIFwifVxuICAgICAgICAgICAgICAgICAgICB7ZGF0ZUZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgICBKdWxpYW5EYXRlLnRvRGF0ZShjdXJyZW50UmlnaHREYXRlKSxcbiAgICAgICAgICAgICAgICAgICAgICBcImRkL21tL3l5eXlcIlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgeyFjdXJyZW50UmlnaHREYXRlICYmIChcbiAgICAgICAgICAgICAgICAgIDxSYXdCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcmlnaHREYXRlUGlja2VySGFuZGxlLmN1cnJlbnQ/Lm9wZW4oKX1cbiAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPFRleHRTcGFuIGlzTGluayBzbWFsbCBib2xkPlxuICAgICAgICAgICAgICAgICAgICAgIHt0KFwiZGlmZlRvb2wuaW5zdHJ1Y3Rpb25zLnNldERhdGVCXCIpfVxuICAgICAgICAgICAgICAgICAgICA8L1RleHRTcGFuPlxuICAgICAgICAgICAgICAgICAgPC9SYXdCdXR0b24+XG4gICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICB7aXNTaG93aW5nRGlmZiA9PT0gZmFsc2UgJiZcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRMZWZ0RGF0ZSAmJlxuICAgICAgICAgICAgICAgICAgY3VycmVudFJpZ2h0RGF0ZSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIDxSYXdCdXR0b24gb25DbGljaz17dW5zZXREYXRlc30+XG4gICAgICAgICAgICAgICAgICAgICAgPFRleHRTcGFuIGlzTGluayBzbWFsbD5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt0KFwiZGlmZlRvb2wuaW5zdHJ1Y3Rpb25zLmNoYW5nZURhdGVzXCIpfVxuICAgICAgICAgICAgICAgICAgICAgIDwvVGV4dFNwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvUmF3QnV0dG9uPlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICA8L0xvY2F0aW9uQW5kRGF0ZXNEaXNwbGF5Qm94PlxuICAgICAgICA8L0dyb3VwPlxuICAgICAgICB7IWlzU2hvd2luZ0RpZmYgJiYgKFxuICAgICAgICAgIDxHcm91cD5cbiAgICAgICAgICAgIDxTZWxlY3RvclxuICAgICAgICAgICAgICB2aWV3U3RhdGU9e3ZpZXdTdGF0ZX1cbiAgICAgICAgICAgICAgdmFsdWU9e3NvdXJjZUl0ZW0udW5pcXVlSWR9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2VTb3VyY2VJdGVtfVxuICAgICAgICAgICAgICBsYWJlbD17dChcImRpZmZUb29sLmxhYmVscy5zb3VyY2VEYXRhc2V0XCIpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkPlNlbGVjdCBzb3VyY2UgaXRlbTwvb3B0aW9uPlxuICAgICAgICAgICAgICB7ZGlmZmFibGVJdGVtc0luV29ya2JlbmNoLm1hcCgoaXRlbSkgPT4gKFxuICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtpdGVtLnVuaXF1ZUlkfSB2YWx1ZT17aXRlbS51bmlxdWVJZH0+XG4gICAgICAgICAgICAgICAgICB7aXRlbS5uYW1lfVxuICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvU2VsZWN0b3I+XG4gICAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgKX1cbiAgICAgICAgeyFpc1Nob3dpbmdEaWZmICYmIChcbiAgICAgICAgICA8R3JvdXA+XG4gICAgICAgICAgICA8U2VsZWN0b3JcbiAgICAgICAgICAgICAgdmlld1N0YXRlPXt2aWV3U3RhdGV9XG4gICAgICAgICAgICAgIHNwYWNpbmdCb3R0b21cbiAgICAgICAgICAgICAgdmFsdWU9e3ByZXZpZXdTdHlsZX1cbiAgICAgICAgICAgICAgb25DaGFuZ2U9e2hhbmRsZUNoYW5nZVByZXZpZXdTdHlsZX1cbiAgICAgICAgICAgICAgbGFiZWw9e3QoXCJkaWZmVG9vbC5sYWJlbHMucHJldmlld1N0eWxlXCIpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHZhbHVlPVwiXCI+XG4gICAgICAgICAgICAgICAge3QoXCJkaWZmVG9vbC5jaG9vc2VQcmV2aWV3XCIpfVxuICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAge2RpZmZJdGVtLnN0eWxlU2VsZWN0YWJsZURpbWVuc2lvbnM/LlswXT8ub3B0aW9ucz8ubWFwKFxuICAgICAgICAgICAgICAgIChzdHlsZSkgPT4gKFxuICAgICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e3N0eWxlLmlkfSB2YWx1ZT17c3R5bGUuaWR9PlxuICAgICAgICAgICAgICAgICAgICB7c3R5bGUubmFtZX1cbiAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvU2VsZWN0b3I+XG4gICAgICAgICAgICB7cHJldmlld0xlZ2VuZFVybCAmJiAoXG4gICAgICAgICAgICAgIDxMZWdlbmRJbWFnZSB3aWR0aD1cIjEwMCVcIiBzcmM9e3ByZXZpZXdMZWdlbmRVcmx9IC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICl9XG4gICAgICAgIDxHcm91cD5cbiAgICAgICAgICA8U2VsZWN0b3JcbiAgICAgICAgICAgIHZpZXdTdGF0ZT17dmlld1N0YXRlfVxuICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnREaWZmU3R5bGUgfHwgXCJcIn1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2VEaWZmU3R5bGV9XG4gICAgICAgICAgICBsYWJlbD17dChcImRpZmZUb29sLmxhYmVscy5kaWZmZXJlbmNlT3V0cHV0XCIpfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxvcHRpb24gZGlzYWJsZWQgdmFsdWU9XCJcIj5cbiAgICAgICAgICAgICAge3QoXCJkaWZmVG9vbC5jaG9vc2VEaWZmZXJlbmNlXCIpfVxuICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICB7YXZhaWxhYmxlRGlmZlN0eWxlcy5tYXAoKHN0eWxlKSA9PiAoXG4gICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtzdHlsZS5pZH0gdmFsdWU9e3N0eWxlLmlkfT5cbiAgICAgICAgICAgICAgICB7c3R5bGUubmFtZX1cbiAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L1NlbGVjdG9yPlxuICAgICAgICAgIHtpc1Nob3dpbmdEaWZmICYmIGRpZmZMZWdlbmRVcmwgJiYgKFxuICAgICAgICAgICAgPExlZ2VuZEltYWdlIHdpZHRoPVwiMTAwJVwiIHNyYz17ZGlmZkxlZ2VuZFVybH0gLz5cbiAgICAgICAgICApfVxuICAgICAgICA8L0dyb3VwPlxuICAgICAgICB7IWlzU2hvd2luZ0RpZmYgJiYgKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8R2VuZXJhdGVCdXR0b25cbiAgICAgICAgICAgICAgb25DbGljaz17Z2VuZXJhdGVEaWZmfVxuICAgICAgICAgICAgICBkaXNhYmxlZD17IWlzUmVhZHlUb0dlbmVyYXRlRGlmZn1cbiAgICAgICAgICAgICAgYXJpYS1kZXNjcmliZWRieT1cIlRKU0RpZmZlcmVuY2VEaXNhYmxlZEJ1dHRvblByb21wdFwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxUZXh0U3BhbiBsYXJnZT5cbiAgICAgICAgICAgICAgICB7dChcImRpZmZUb29sLmxhYmVscy5nZW5lcmF0ZURpZmZCdXR0b25UZXh0XCIpfVxuICAgICAgICAgICAgICA8L1RleHRTcGFuPlxuICAgICAgICAgICAgPC9HZW5lcmF0ZUJ1dHRvbj5cbiAgICAgICAgICAgIHshaXNSZWFkeVRvR2VuZXJhdGVEaWZmICYmIChcbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIGNzcz17YFxuICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICAgICAgICAgICAgICBwYWRkaW5nOiA1cHg7XG4gICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgIGNzcz17YFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG4gICAgICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIDxTdHlsZWRJY29uXG4gICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcj1cIiNjY2NcIlxuICAgICAgICAgICAgICAgICAgICBzdHlsZWRXaWR0aD1cIjE2cHhcIlxuICAgICAgICAgICAgICAgICAgICBzdHlsZWRIZWlnaHQ9XCIxNnB4XCJcbiAgICAgICAgICAgICAgICAgICAgZ2x5cGg9e0dMWVBIUy5pbmZvfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8VGV4dFxuICAgICAgICAgICAgICAgICAgc21hbGxcbiAgICAgICAgICAgICAgICAgIGxpZ2h0XG4gICAgICAgICAgICAgICAgICB0ZXh0TGlnaHRcbiAgICAgICAgICAgICAgICAgIGlkPVwiVEpTRGlmZmVyZW5jZURpc2FibGVkQnV0dG9uUHJvbXB0XCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7dChcImRpZmZUb29sLmxhYmVscy5kaXNhYmxlZEJ1dHRvblByb21wdFwiKX1cbiAgICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgICAge2lzU2hvd2luZ0RpZmYgJiYgKFxuICAgICAgICAgIDxCb3ggY2VudGVyZWQgbGVmdD5cbiAgICAgICAgICAgIDxCYWNrQnV0dG9uXG4gICAgICAgICAgICAgIGNzcz17YFxuICAgICAgICAgICAgICAgIGNvbG9yOiAke3RoZW1lLnRleHRMaWdodH07XG4gICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiAke3RoZW1lLnRleHRMaWdodH07XG4gICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgIHRyYW5zcGFyZW50QmdcbiAgICAgICAgICAgICAgb25DbGljaz17cmVzZXRUb29sfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8Qm94U3BhbiBjZW50ZXJlZD5cbiAgICAgICAgICAgICAgICA8U3R5bGVkSWNvblxuICAgICAgICAgICAgICAgICAgY3NzPVwidHJhbnNmb3JtOnJvdGF0ZSg5MGRlZyk7XCJcbiAgICAgICAgICAgICAgICAgIGxpZ2h0XG4gICAgICAgICAgICAgICAgICBzdHlsZWRXaWR0aD1cIjE2cHhcIlxuICAgICAgICAgICAgICAgICAgZ2x5cGg9e0dMWVBIUy5hcnJvd0Rvd259XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICA8VGV4dFNwYW4gbWVkaXVtPnt0KFwiZ2VuZXJhbC5iYWNrXCIpfTwvVGV4dFNwYW4+XG4gICAgICAgICAgICAgIDwvQm94U3Bhbj5cbiAgICAgICAgICAgIDwvQmFja0J1dHRvbj5cbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgcHJpbWFyeVxuICAgICAgICAgICAgICBvbkNsaWNrPXtjbG9zZVBhbmVsfVxuICAgICAgICAgICAgICBjc3M9e2BcbiAgICAgICAgICAgICAgICBmbGV4LWdyb3c6IDE7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7XG4gICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxUZXh0U3BhbiBtZWRpdW0+e3QoXCJkaWZmVG9vbC5sYWJlbHMuc2F2ZVRvV29ya2JlbmNoXCIpfTwvVGV4dFNwYW4+XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICA8L0JveD5cbiAgICAgICAgKX1cbiAgICAgICAgeyFpc1Nob3dpbmdEaWZmICYmIChcbiAgICAgICAgICA8TG9jYXRpb25QaWNrZXJcbiAgICAgICAgICAgIHRlcnJpYT17dGVycmlhfVxuICAgICAgICAgICAgbG9jYXRpb249e2xvY2F0aW9ufVxuICAgICAgICAgICAgb25QaWNraW5nPXtvblVzZXJQaWNraW5nTG9jYXRpb259XG4gICAgICAgICAgICBvblBpY2tlZD17b25Vc2VyUGlja0xvY2F0aW9ufVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIHshaXNTaG93aW5nRGlmZiAmJlxuICAgICAgICAgIFJlYWN0RE9NLmNyZWF0ZVBvcnRhbChcbiAgICAgICAgICAgIDxCb3ggY2VudGVyZWQgZnVsbFdpZHRoIGZsZXhXcmFwIGJhY2tncm91bmRDb2xvcj17dGhlbWUuZGFya30+XG4gICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgcmVmPXtsZWZ0RGF0ZVBpY2tlckhhbmRsZX1cbiAgICAgICAgICAgICAgICBoZWFkaW5nPXt0KFwiZGlmZlRvb2wubGFiZWxzLmRhdGVDb21wYXJpc29uQVwiKX1cbiAgICAgICAgICAgICAgICBpdGVtPXtsZWZ0SXRlbX1cbiAgICAgICAgICAgICAgICBvbkRhdGVTZXQ9eygpID0+IHNob3dJdGVtKGxlZnRJdGVtKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPEFyZWFGaWx0ZXJTZWxlY3Rpb25cbiAgICAgICAgICAgICAgICBsb2NhdGlvbj17bG9jYXRpb259XG4gICAgICAgICAgICAgICAgaXNQaWNraW5nTmV3TG9jYXRpb249e2lzUGlja2luZ05ld0xvY2F0aW9ufVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgIHJlZj17cmlnaHREYXRlUGlja2VySGFuZGxlfVxuICAgICAgICAgICAgICAgIGhlYWRpbmc9e3QoXCJkaWZmVG9vbC5sYWJlbHMuZGF0ZUNvbXBhcmlzb25CXCIpfVxuICAgICAgICAgICAgICAgIGl0ZW09e3JpZ2h0SXRlbX1cbiAgICAgICAgICAgICAgICBvbkRhdGVTZXQ9eygpID0+IHNob3dJdGVtKHJpZ2h0SXRlbSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0JveD4sXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIlRKUy1Cb3R0b21Eb2NrTGFzdFBvcnRhbFwiKSFcbiAgICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9Xb3JrZmxvd1BhbmVsPlxuICApO1xufSk7XG5NYWluLmRpc3BsYXlOYW1lID0gXCJNYWluXCI7XG5cbmNvbnN0IEJhY2tCdXR0b24gPSBzdHlsZWQoQnV0dG9uKS5hdHRycyh7XG4gIHNlY29uZGFyeTogdHJ1ZVxufSlgYDtcblxuY29uc3QgR2VuZXJhdGVCdXR0b24gPSBzdHlsZWQoQnV0dG9uKS5hdHRycyh7XG4gIHByaW1hcnk6IHRydWUsXG4gIGZ1bGxXaWR0aDogdHJ1ZVxufSlgYDtcblxuY29uc3QgU2VsZWN0b3IgPSAocHJvcHM6IGFueSkgPT4gKFxuICA8Qm94IGZ1bGxXaWR0aCBjb2x1bW4+XG4gICAgPGxhYmVsPlxuICAgICAgey8qIDxUZXh0IHRleHRMaWdodD57cHJvcHMubGFiZWx9OjwvVGV4dD4gKi99XG4gICAgICA8VGV4dCB0ZXh0TGlnaHQgY3NzPXtcInAge21hcmdpbjogMDt9XCJ9PlxuICAgICAgICB7cGFyc2VDdXN0b21NYXJrZG93blRvUmVhY3RXaXRoT3B0aW9ucyhgJHtwcm9wcy5sYWJlbH06YCwge1xuICAgICAgICAgIGluamVjdFRlcm1zQXNUb29sdGlwczogdHJ1ZSxcbiAgICAgICAgICB0b29sdGlwVGVybXM6IHByb3BzLnZpZXdTdGF0ZS50ZXJyaWEuY29uZmlnUGFyYW1ldGVycy5oZWxwQ29udGVudFRlcm1zXG4gICAgICAgIH0pfVxuICAgICAgPC9UZXh0PlxuICAgICAgPFNwYWNpbmcgYm90dG9tPXsxfSAvPlxuICAgICAgPFNlbGVjdCB7Li4ucHJvcHN9Pntwcm9wcy5jaGlsZHJlbn08L1NlbGVjdD5cbiAgICAgIHtwcm9wcy5zcGFjaW5nQm90dG9tICYmIDxTcGFjaW5nIGJvdHRvbT17Mn0gLz59XG4gICAgPC9sYWJlbD5cbiAgPC9Cb3g+XG4pO1xuXG5jb25zdCBBcmVhRmlsdGVyU2VsZWN0aW9uID0gKHByb3BzOiB7XG4gIGxvY2F0aW9uPzogTGF0TG9uSGVpZ2h0O1xuICBpc1BpY2tpbmdOZXdMb2NhdGlvbjogYm9vbGVhbjtcbiAgdGhlbWU/OiBhbnk7XG59KSA9PiB7XG4gIGNvbnN0IHsgbG9jYXRpb24sIGlzUGlja2luZ05ld0xvY2F0aW9uIH0gPSBwcm9wcztcbiAgY29uc3QgeyB0IH0gPSB1c2VUcmFuc2xhdGlvbigpO1xuICBsZXQgbG9jYXRpb25UZXh0ID0gXCItXCI7XG4gIGlmIChsb2NhdGlvbikge1xuICAgIGNvbnN0IHsgbG9uZ2l0dWRlLCBsYXRpdHVkZSB9ID0gcHJldHRpZnlDb29yZGluYXRlcyhcbiAgICAgIGxvY2F0aW9uLmxvbmdpdHVkZSxcbiAgICAgIGxvY2F0aW9uLmxhdGl0dWRlLFxuICAgICAge1xuICAgICAgICBkaWdpdHM6IDJcbiAgICAgIH1cbiAgICApO1xuICAgIGxvY2F0aW9uVGV4dCA9IGAke2xvbmdpdHVkZX0gJHtsYXRpdHVkZX1gO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8Qm94XG4gICAgICBjb2x1bW5cbiAgICAgIGNlbnRlcmVkXG4gICAgICBzdHlsZWRNaW5XaWR0aD1cIjIzMHB4XCJcbiAgICAgIGNzcz17YFxuICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogJHsocHJvcHM6IGFueSkgPT4gcHJvcHMudGhlbWUubWR9cHgpIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgYH1cbiAgICA+XG4gICAgICA8Qm94IGNlbnRlcmVkPlxuICAgICAgICA8U3R5bGVkSWNvbiBsaWdodCBzdHlsZWRXaWR0aD1cIjE2cHhcIiBnbHlwaD17R0xZUEhTLmxvY2F0aW9uMn0gLz5cbiAgICAgICAgPFNwYWNpbmcgcmlnaHQ9ezJ9IC8+XG4gICAgICAgIDxUZXh0IHRleHRMaWdodCBleHRyYUxhcmdlPlxuICAgICAgICAgIHt0KFwiZGlmZlRvb2wubGFiZWxzLmFyZWFGaWx0ZXJTZWxlY3Rpb25cIil9XG4gICAgICAgIDwvVGV4dD5cbiAgICAgIDwvQm94PlxuICAgICAgPFNwYWNpbmcgYm90dG9tPXszfSAvPlxuICAgICAgPEJveCBzdHlsZWRNaW5IZWlnaHQ9XCI0MHB4XCI+XG4gICAgICAgIHtpc1BpY2tpbmdOZXdMb2NhdGlvbiA/IChcbiAgICAgICAgICA8VGV4dFxuICAgICAgICAgICAgdGV4dExpZ2h0XG4gICAgICAgICAgICBleHRyYUV4dHJhTGFyZ2VcbiAgICAgICAgICAgIGJvbGRcbiAgICAgICAgICAgIC8vIFVzaW5nIGxlZ2FjeSBMb2FkZXIuanN4IG1lYW5zIHdlIG92ZXJyaWRlIGF0IGEgaGlnaGVyIGxldmVsIHRvIGluaGVyaXRcbiAgICAgICAgICAgIC8vIHRoaXMgZmlsbHMgdHlsZVxuICAgICAgICAgICAgY3NzPXtgXG4gICAgICAgICAgICAgIGZpbGw6ICR7KHsgdGhlbWUgfTogYW55KSA9PiB0aGVtZS50ZXh0TGlnaHR9O1xuICAgICAgICAgICAgYH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8TG9hZGVyXG4gICAgICAgICAgICAgIGxpZ2h0XG4gICAgICAgICAgICAgIG1lc3NhZ2U9e2BRdWVyeWluZyAke2xvY2F0aW9uID8gXCJuZXdcIiA6IFwiXCJ9IHBvc2l0aW9uLi4uYH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9UZXh0PlxuICAgICAgICApIDogKFxuICAgICAgICAgIDxUZXh0IHRleHRMaWdodCBib2xkIGhlYWRpbmcgdGV4dEFsaWduQ2VudGVyPlxuICAgICAgICAgICAge2xvY2F0aW9uVGV4dH1cbiAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICl9XG4gICAgICA8L0JveD5cbiAgICA8L0JveD5cbiAgKTtcbn07XG5cbmNvbnN0IEdyb3VwID0gc3R5bGVkLmRpdmBcbiAgYmFja2dyb3VuZC1jb2xvcjogJHsocCkgPT4gcC50aGVtZS5kYXJrV2l0aE92ZXJsYXl9O1xuICBwYWRkaW5nOiAxNXB4O1xuICBib3JkZXItcmFkaXVzOiA1cHg7XG5gO1xuXG5jb25zdCBMb2NhdGlvbkFuZERhdGVzRGlzcGxheUJveCA9IHN0eWxlZChCb3gpLmF0dHJzKHtcbiAgY29sdW1uOiB0cnVlXG59KWBcbiAgY29sb3I6ICR7KHApID0+IHAudGhlbWUudGV4dExpZ2h0fTtcbiAgcGFkZGluZzogMTVweDtcbiAgPiAke0JveH06Zmlyc3QtY2hpbGQge1xuICAgIG1hcmdpbi1ib3R0b206IDEzcHg7XG4gIH1cbiAgPiBkaXYgPiBkaXY6Zmlyc3QtY2hpbGQge1xuICAgIC8qIFRoZSBsYWJlbHMgKi9cbiAgICBtYXJnaW4tcmlnaHQ6IDVweDtcbiAgICBtaW4td2lkdGg6IDUwcHg7XG4gIH1cbmA7XG5cbmNvbnN0IExlZ2VuZEltYWdlID0gZnVuY3Rpb24gKHByb3BzOiBhbnkpIHtcbiAgcmV0dXJuIChcbiAgICA8aW1nXG4gICAgICB7Li4ucHJvcHN9XG4gICAgICAvLyBTaG93IHRoZSBsZWdlbmQgb25seSBpZiBpdCBsb2FkcyBzdWNjZXNzZnVsbHksIHNvIHdlIHN0YXJ0IG91dCBoaWRkZW5cbiAgICAgIHN0eWxlPXt7IGRpc3BsYXk6IFwibm9uZVwiLCBtYXJnaW5Ub3A6IFwiMTBweFwiIH19XG4gICAgICBvbkxvYWQ9eyhlKSA9PiAoZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCIpfVxuICAgICAgb25FcnJvcj17KGUpID0+IChlLmN1cnJlbnRUYXJnZXQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiKX1cbiAgICAvPlxuICApO1xufTtcblxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlU3BsaXRJdGVtKFxuICBzb3VyY2VJdGVtOiBEaWZmYWJsZUl0ZW0sXG4gIHNwbGl0RGlyZWN0aW9uOiBTcGxpdERpcmVjdGlvblxuKTogUHJvbWlzZTxEaWZmYWJsZUl0ZW0+IHtcbiAgY29uc3QgdGVycmlhID0gc291cmNlSXRlbS50ZXJyaWE7XG4gIGNvbnN0IHJlZiA9IG5ldyBTcGxpdEl0ZW1SZWZlcmVuY2UoY3JlYXRlR3VpZCgpLCB0ZXJyaWEpO1xuICByZWYuc2V0VHJhaXQoQ29tbW9uU3RyYXRhLnVzZXIsIFwic3BsaXRTb3VyY2VJdGVtSWRcIiwgc291cmNlSXRlbS51bmlxdWVJZCk7XG4gIHRlcnJpYS5hZGRNb2RlbChyZWYpO1xuICBhd2FpdCByZWYubG9hZFJlZmVyZW5jZSgpO1xuICByZXR1cm4gcnVuSW5BY3Rpb24oKCkgPT4ge1xuICAgIGlmIChyZWYudGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IEVycm9yKFwiZmFpbGVkIHRvIHNwbGl0IGl0ZW1cIik7XG4gICAgfVxuICAgIGNvbnN0IG5ld0l0ZW0gPSByZWYudGFyZ2V0IGFzIERpZmZhYmxlSXRlbTtcbiAgICBuZXdJdGVtLnNldFRyYWl0KENvbW1vblN0cmF0YS51c2VyLCBcInNob3dcIiwgdHJ1ZSk7XG4gICAgbmV3SXRlbS5zZXRUcmFpdChDb21tb25TdHJhdGEudXNlciwgXCJzcGxpdERpcmVjdGlvblwiLCBzcGxpdERpcmVjdGlvbik7XG4gICAgbmV3SXRlbS5zZXRUcmFpdChDb21tb25TdHJhdGEudXNlciwgXCJjdXJyZW50VGltZVwiLCBudWxsKTtcbiAgICBuZXdJdGVtLnNldFRyYWl0KENvbW1vblN0cmF0YS51c2VyLCBcImluaXRpYWxUaW1lU291cmNlXCIsIFwibm9uZVwiKTtcbiAgICBpZiAoaGFzT3BhY2l0eShuZXdJdGVtKSkge1xuICAgICAgLy8gV2Ugd2FudCB0byBzaG93IHRoZSBpdGVtIG9uIHRoZSBtYXAgb25seSBhZnRlciBkYXRlIHNlbGVjdGlvbi4gQXQgdGhlXG4gICAgICAvLyBzYW1lIHRpbWUgd2UgY2Fubm90IHNldCBgc2hvd2AgdG8gZmFsc2UgYmVjYXVzZSBpZiB3ZVxuICAgICAgLy8gZG8gc28sIGRhdGUgcGlja2luZyB3aGljaCByZWxpZXMgb24gZmVhdHVyZSBwaWNraW5nLCB3aWxsIG5vdCB3b3JrLiBTb1xuICAgICAgLy8gd2Ugc2ltcGx5IHNldCB0aGUgb3BhY2l0eSBvZiB0aGUgaXRlbSB0byAwLlxuICAgICAgbmV3SXRlbS5zZXRUcmFpdChDb21tb25TdHJhdGEudXNlciwgXCJvcGFjaXR5XCIsIDApO1xuICAgIH1cblxuICAgIC8vIE92ZXJyaWRlIGZlYXR1cmUgaW5mbyB0ZW1wbGF0ZSBhcyB0aGUgcGFyZW50IGZlYXR1cmVJbmZvVGVtcGxhdGUgbWlnaHRcbiAgICAvLyBub3QgYmUgcmVsZXZhbnQgZm9yIHRoZSBkaWZmZXJlbmNlIGl0ZW0uIFRoaXMgaGFzIHRvIGJlIGRvbmUgaW4gdGhlIHVzZXJcbiAgICAvLyBzdHJhdHVtIHRvIG92ZXJyaWRlIHRlbXBsYXRlIHNldCBpbiBkZWZpbml0aW9uIHN0cmF0dW0uXG4gICAgdXBkYXRlTW9kZWxGcm9tSnNvbihuZXdJdGVtLCBDb21tb25TdHJhdGEudXNlciwge1xuICAgICAgZmVhdHVyZUluZm9UZW1wbGF0ZTogeyB0ZW1wbGF0ZTogXCJcIiB9XG4gICAgfSk7XG5cbiAgICBzZXREZWZhdWx0RGlmZlN0eWxlKG5ld0l0ZW0pO1xuXG4gICAgLy8gU2V0IHRoZSBkZWZhdWx0IHN0eWxlIHRvIHRydWUgY29sb3Igc3R5bGUgaWYgaXQgZXhpc3RzXG4gICAgY29uc3QgdHJ1ZUNvbG9yID0gbmV3SXRlbS5zdHlsZVNlbGVjdGFibGVEaW1lbnNpb25zPy5bMF0/Lm9wdGlvbnM/LmZpbmQoXG4gICAgICAoc3R5bGUpID0+IGlzRGVmaW5lZChzdHlsZS5uYW1lKSAmJiBzdHlsZS5uYW1lLnNlYXJjaCgvdHJ1ZS9pKSA+PSAwXG4gICAgKTtcbiAgICBpZiAodHJ1ZUNvbG9yPy5pZCkge1xuICAgICAgbmV3SXRlbS5zdHlsZVNlbGVjdGFibGVEaW1lbnNpb25zPy5bMF0/LnNldERpbWVuc2lvblZhbHVlKFxuICAgICAgICBDb21tb25TdHJhdGEudXNlcixcbiAgICAgICAgdHJ1ZUNvbG9yLmlkXG4gICAgICApO1xuICAgIH1cblxuICAgIHRlcnJpYS5vdmVybGF5cy5hZGQobmV3SXRlbSk7XG4gICAgcmV0dXJuIG5ld0l0ZW07XG4gIH0pO1xufVxuXG4vKipcbiAqIElmIHRoZSBpdGVtIGhhcyBvbmx5IG9uZSBhdmFpbGFibGUgZGlmZiBzdHlsZSwgYXV0by1zZWxlY3QgaXRcbiAqL1xuZnVuY3Rpb24gc2V0RGVmYXVsdERpZmZTdHlsZShpdGVtOiBEaWZmYWJsZUl0ZW0pIHtcbiAgaWYgKGl0ZW0uZGlmZlN0eWxlSWQgIT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGF2YWlsYWJsZVN0eWxlcyA9IGZpbHRlck91dFVuZGVmaW5lZChcbiAgICBpdGVtLmF2YWlsYWJsZURpZmZTdHlsZXMubWFwKChkaWZmU3R5bGVJZCkgPT5cbiAgICAgIGl0ZW0uc3R5bGVTZWxlY3RhYmxlRGltZW5zaW9ucz8uWzBdPy5vcHRpb25zPy5maW5kKFxuICAgICAgICAoc3R5bGUpID0+IHN0eWxlLmlkID09PSBkaWZmU3R5bGVJZFxuICAgICAgKVxuICAgIClcbiAgKTtcblxuICBpZiAoYXZhaWxhYmxlU3R5bGVzLmxlbmd0aCA9PT0gMSkge1xuICAgIGl0ZW0uc2V0VHJhaXQoQ29tbW9uU3RyYXRhLnVzZXIsIFwiZGlmZlN0eWxlSWRcIiwgYXZhaWxhYmxlU3R5bGVzWzBdLmlkKTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW1vdmVTcGxpdEl0ZW0oaXRlbTogRGlmZmFibGVJdGVtKSB7XG4gIGNvbnN0IHRlcnJpYSA9IGl0ZW0udGVycmlhO1xuICB0ZXJyaWEub3ZlcmxheXMucmVtb3ZlKGl0ZW0pO1xuICBpZiAoaXRlbS5zb3VyY2VSZWZlcmVuY2UgJiYgdGVycmlhLndvcmtiZW5jaC5jb250YWlucyhpdGVtKSA9PT0gZmFsc2UpIHtcbiAgICB0ZXJyaWEucmVtb3ZlTW9kZWxSZWZlcmVuY2VzKGl0ZW0uc291cmNlUmVmZXJlbmNlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBkb2VzRmVhdHVyZUJlbG9uZ1RvSXRlbShcbiAgZmVhdHVyZTogVGVycmlhRmVhdHVyZSxcbiAgaXRlbTogRGlmZmFibGVJdGVtXG4pOiBib29sZWFuIHtcbiAgaWYgKCFNYXBwYWJsZU1peGluLmlzTWl4ZWRJbnRvKGl0ZW0pKSByZXR1cm4gZmFsc2U7XG4gIGNvbnN0IGltYWdlcnlQcm92aWRlciA9IGZlYXR1cmUuaW1hZ2VyeUxheWVyPy5pbWFnZXJ5UHJvdmlkZXI7XG4gIGlmIChpbWFnZXJ5UHJvdmlkZXIgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gKFxuICAgIGl0ZW0ubWFwSXRlbXMuZmluZChcbiAgICAgIChtKSA9PiBJbWFnZXJ5UGFydHMuaXMobSkgJiYgbS5pbWFnZXJ5UHJvdmlkZXIgPT09IGltYWdlcnlQcm92aWRlclxuICAgICkgIT09IHVuZGVmaW5lZFxuICApO1xufVxuXG5mdW5jdGlvbiBzZXRUaW1lRmlsdGVyRnJvbUxvY2F0aW9uKFxuICBpdGVtOiBEaWZmYWJsZUl0ZW0sXG4gIGxvY2F0aW9uOiBMYXRMb25IZWlnaHQsXG4gIGltOiBJbWFnZXJ5UHJvdmlkZXJcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCBjYXJ0byA9IG5ldyBDYXJ0b2dyYXBoaWMoXG4gICAgQ2VzaXVtTWF0aC50b1JhZGlhbnMobG9jYXRpb24ubG9uZ2l0dWRlKSxcbiAgICBDZXNpdW1NYXRoLnRvUmFkaWFucyhsb2NhdGlvbi5sYXRpdHVkZSlcbiAgKTtcbiAgLy8gV2UganVzdCBuZWVkIHRvIHNldCB0aGlzIHRvIGEgaGlnaCBlbm91Z2ggbGV2ZWwgc3VwcG9ydGVkIGJ5IHRoZSBzZXJ2aWNlXG4gIGNvbnN0IGxldmVsID0gMzA7XG4gIGNvbnN0IHRpbGUgPSBpbS50aWxpbmdTY2hlbWUucG9zaXRpb25Ub1RpbGVYWShjYXJ0bywgbGV2ZWwpO1xuICByZXR1cm4gaXRlbS5zZXRUaW1lRmlsdGVyRnJvbUxvY2F0aW9uKHtcbiAgICBwb3NpdGlvbjoge1xuICAgICAgbGF0aXR1ZGU6IGxvY2F0aW9uLmxhdGl0dWRlLFxuICAgICAgbG9uZ2l0dWRlOiBsb2NhdGlvbi5sb25naXR1ZGUsXG4gICAgICBoZWlnaHQ6IGxvY2F0aW9uLmhlaWdodFxuICAgIH0sXG4gICAgdGlsZUNvb3Jkczoge1xuICAgICAgeDogdGlsZS54LFxuICAgICAgeTogdGlsZS55LFxuICAgICAgbGV2ZWxcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBoYXNPcGFjaXR5KFxuICBtb2RlbDogYW55XG4pOiBtb2RlbCBpcyBIYXNUcmFpdDxJbWFnZXJ5UHJvdmlkZXJUcmFpdHMsIFwib3BhY2l0eVwiPiB7XG4gIHJldHVybiBoYXNUcmFpdHMobW9kZWwsIEltYWdlcnlQcm92aWRlclRyYWl0cywgXCJvcGFjaXR5XCIpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBEaWZmVG9vbDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/terriajs/lib/ReactViews/Tools/DiffTool/DiffTool.tsx\n\n}");

/***/ }),

/***/ "./node_modules/terriajs/lib/ReactViews/Tools/DiffTool/LocationPicker.tsx":
/*!********************************************************************************!*\
  !*** ./node_modules/terriajs/lib/ReactViews/Tools/DiffTool/LocationPicker.tsx ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ LocationPicker)\n/* harmony export */ });\n/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.reverse.js */ \"./node_modules/core-js/modules/es.array.reverse.js\");\n/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"./node_modules/core-js/modules/web.dom-collections.iterator.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mobx */ \"./node_modules/mobx/dist/mobx.esm.js\");\n/* harmony import */ var mobx_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! mobx-react */ \"./node_modules/mobx-react/dist/mobxreact.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var terriajs_cesium_Source_Core_Ellipsoid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! terriajs-cesium/Source/Core/Ellipsoid */ \"./node_modules/terriajs-cesium/Source/Core/Ellipsoid.js\");\n/* harmony import */ var terriajs_cesium_Source_Core_Math__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! terriajs-cesium/Source/Core/Math */ \"./node_modules/terriajs-cesium/Source/Core/Math.js\");\n/* harmony import */ var _wwwroot_images_difference_pin_png__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../wwwroot/images/difference-pin.png */ \"./node_modules/terriajs/wwwroot/images/difference-pin.png\");\n/* harmony import */ var _Models_LocationMarkerUtils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../Models/LocationMarkerUtils */ \"./node_modules/terriajs/lib/Models/LocationMarkerUtils.ts\");\n/* harmony import */ var _Models_MapInteractionMode__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../Models/MapInteractionMode */ \"./node_modules/terriajs/lib/Models/MapInteractionMode.ts\");\n/* harmony import */ var _Loader__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../Loader */ \"./node_modules/terriajs/lib/ReactViews/Loader.tsx\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react/jsx-runtime */ \"./node_modules/react/jsx-runtime.js\");\n\nvar _class, _class2, _descriptor, _descriptor2, _descriptor3;\nfunction _initializerDefineProperty(e, i, r, l) { r && Object.defineProperty(e, i, { enumerable: r.enumerable, configurable: r.configurable, writable: r.writable, value: r.initializer ? r.initializer.call(l) : void 0 }); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _applyDecoratedDescriptor(i, e, r, n, l) { var a = {}; return Object.keys(n).forEach(function (i) { a[i] = n[i]; }), a.enumerable = !!a.enumerable, a.configurable = !!a.configurable, (\"value\" in a || a.initializer) && (a.writable = !0), a = r.slice().reverse().reduce(function (r, n) { return n(i, e, r) || r; }, a), l && void 0 !== a.initializer && (a.value = a.initializer ? a.initializer.call(l) : void 0, a.initializer = void 0), void 0 === a.initializer ? (Object.defineProperty(i, e, a), null) : a; }\nfunction _initializerWarningHelper(r, e) { throw Error(\"Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.\"); }\n\n\n\n\n\n\n\n\n\n\n\nlet LocationPicker = (0,mobx_react__WEBPACK_IMPORTED_MODULE_3__.observer)(_class = (_class2 = class LocationPicker extends react__WEBPACK_IMPORTED_MODULE_4__.Component {\n  constructor(props) {\n    super(props);\n    _initializerDefineProperty(this, \"pickMode\", _descriptor, this);\n    _initializerDefineProperty(this, \"currentPick\", _descriptor2, this);\n    _initializerDefineProperty(this, \"pickDisposer\", _descriptor3, this);\n    (0,mobx__WEBPACK_IMPORTED_MODULE_2__.makeObservable)(this);\n  }\n  setupPicker() {\n    const {\n      terria,\n      location,\n      onPicking,\n      onPicked\n    } = this.props;\n    this.pickMode = new _Models_MapInteractionMode__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n      message: \"\",\n      messageAsNode: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(\"div\", {}),\n      uiMode: _Models_MapInteractionMode__WEBPACK_IMPORTED_MODULE_9__.UIMode.Difference\n    });\n    addInteractionModeToMap(terria, this.pickMode);\n    if (location) showMarker(terria, location);\n    this.pickDisposer = (0,mobx__WEBPACK_IMPORTED_MODULE_2__.reaction)(() => this.pickMode.pickedFeatures, (0,mobx__WEBPACK_IMPORTED_MODULE_2__.action)(newPick => {\n      var _newPick$allFeaturesA;\n      if (newPick === undefined || newPick.pickPosition === undefined) {\n        return;\n      }\n      this.pickMode.customUi = () => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_Loader__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n        message: \"Querying \".concat(location ? \"new\" : \"\", \" position...\")\n      });\n      const position = cartesianToDegrees(newPick.pickPosition);\n      showMarker(this.props.terria, position);\n      this.currentPick = newPick;\n      onPicking(position);\n      (_newPick$allFeaturesA = newPick.allFeaturesAvailablePromise) === null || _newPick$allFeaturesA === void 0 || _newPick$allFeaturesA.then(() => {\n        if (newPick === this.currentPick) {\n          onPicked(newPick, position);\n        }\n      });\n    }));\n  }\n  destroyPicker() {\n    var _this$pickDisposer;\n    const {\n      terria\n    } = this.props;\n    if (this.pickMode) {\n      removeInteractionModeFromMap(terria, this.pickMode);\n    }\n    (0,_Models_LocationMarkerUtils__WEBPACK_IMPORTED_MODULE_8__.removeMarker)(terria);\n    this.pickMode = undefined;\n    this.currentPick = undefined;\n    (_this$pickDisposer = this.pickDisposer) === null || _this$pickDisposer === void 0 || _this$pickDisposer.call(this);\n    this.pickDisposer = undefined;\n  }\n  componentDidMount() {\n    this.setupPicker();\n  }\n  componentDidUpdate() {\n    this.destroyPicker();\n    this.setupPicker();\n  }\n  componentWillUnmount() {\n    this.destroyPicker();\n  }\n  render() {\n    return null;\n  }\n}, _descriptor = _applyDecoratedDescriptor(_class2.prototype, \"pickMode\", [mobx__WEBPACK_IMPORTED_MODULE_2__.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"currentPick\", [mobx__WEBPACK_IMPORTED_MODULE_2__.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"pickDisposer\", [mobx__WEBPACK_IMPORTED_MODULE_2__.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _applyDecoratedDescriptor(_class2.prototype, \"setupPicker\", [mobx__WEBPACK_IMPORTED_MODULE_2__.action], Object.getOwnPropertyDescriptor(_class2.prototype, \"setupPicker\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"destroyPicker\", [mobx__WEBPACK_IMPORTED_MODULE_2__.action], Object.getOwnPropertyDescriptor(_class2.prototype, \"destroyPicker\"), _class2.prototype), _class2)) || _class;\n\nfunction addInteractionModeToMap(terria, mode) {\n  terria.mapInteractionModeStack.push(mode);\n}\nfunction removeInteractionModeFromMap(terria, mode) {\n  const [currentMode] = terria.mapInteractionModeStack.slice(-1);\n  if (currentMode === mode) {\n    terria.mapInteractionModeStack.pop();\n  }\n}\nfunction showMarker(terria, location) {\n  (0,_Models_LocationMarkerUtils__WEBPACK_IMPORTED_MODULE_8__.addMarker)(terria, {\n    name: \"User selection\",\n    location,\n    customMarkerIcon: _wwwroot_images_difference_pin_png__WEBPACK_IMPORTED_MODULE_7__\n  });\n}\nfunction cartesianToDegrees(cartesian) {\n  const carto = terriajs_cesium_Source_Core_Ellipsoid__WEBPACK_IMPORTED_MODULE_5__[\"default\"].WGS84.cartesianToCartographic(cartesian);\n  return {\n    longitude: terriajs_cesium_Source_Core_Math__WEBPACK_IMPORTED_MODULE_6__[\"default\"].toDegrees(carto.longitude),\n    latitude: terriajs_cesium_Source_Core_Math__WEBPACK_IMPORTED_MODULE_6__[\"default\"].toDegrees(carto.latitude)\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdGVycmlhanMvbGliL1JlYWN0Vmlld3MvVG9vbHMvRGlmZlRvb2wvTG9jYXRpb25QaWNrZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBa0JBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUExRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBMkNBO0FBK0JBO0FBQ0E7QUFDQTtBQUVBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZXJyaWFqcy1tYXAvLi9ub2RlX21vZHVsZXMvdGVycmlhanMvbGliL1JlYWN0Vmlld3MvVG9vbHMvRGlmZlRvb2wvTG9jYXRpb25QaWNrZXIudHN4P2I5OWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYWN0aW9uLCBtYWtlT2JzZXJ2YWJsZSwgb2JzZXJ2YWJsZSwgcmVhY3Rpb24gfSBmcm9tIFwibW9ieFwiO1xuaW1wb3J0IHsgb2JzZXJ2ZXIgfSBmcm9tIFwibW9ieC1yZWFjdFwiO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgQ2FydGVzaWFuMyBmcm9tIFwidGVycmlhanMtY2VzaXVtL1NvdXJjZS9Db3JlL0NhcnRlc2lhbjNcIjtcbmltcG9ydCBFbGxpcHNvaWQgZnJvbSBcInRlcnJpYWpzLWNlc2l1bS9Tb3VyY2UvQ29yZS9FbGxpcHNvaWRcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCJ0ZXJyaWFqcy1jZXNpdW0vU291cmNlL0NvcmUvTWF0aFwiO1xuaW1wb3J0IG1hcmtlckljb24gZnJvbSBcIi4uLy4uLy4uLy4uL3d3d3Jvb3QvaW1hZ2VzL2RpZmZlcmVuY2UtcGluLnBuZ1wiO1xuaW1wb3J0IExhdExvbkhlaWdodCBmcm9tIFwiLi4vLi4vLi4vQ29yZS9MYXRMb25IZWlnaHRcIjtcbmltcG9ydCBQaWNrZWRGZWF0dXJlcyBmcm9tIFwiLi4vLi4vLi4vTWFwL1BpY2tlZEZlYXR1cmVzL1BpY2tlZEZlYXR1cmVzXCI7XG5pbXBvcnQgeyBhZGRNYXJrZXIsIHJlbW92ZU1hcmtlciB9IGZyb20gXCIuLi8uLi8uLi9Nb2RlbHMvTG9jYXRpb25NYXJrZXJVdGlsc1wiO1xuaW1wb3J0IE1hcEludGVyYWN0aW9uTW9kZSwgeyBVSU1vZGUgfSBmcm9tIFwiLi4vLi4vLi4vTW9kZWxzL01hcEludGVyYWN0aW9uTW9kZVwiO1xuaW1wb3J0IFRlcnJpYSBmcm9tIFwiLi4vLi4vLi4vTW9kZWxzL1RlcnJpYVwiO1xuaW1wb3J0IExvYWRlciBmcm9tIFwiLi4vLi4vTG9hZGVyXCI7XG5cbmludGVyZmFjZSBQcm9wc1R5cGUge1xuICB0ZXJyaWE6IFRlcnJpYTtcbiAgbG9jYXRpb24/OiBMYXRMb25IZWlnaHQ7XG4gIG9uUGlja2luZzogKHBpY2tpbmdMb2NhdGlvbjogTGF0TG9uSGVpZ2h0KSA9PiB2b2lkO1xuICBvblBpY2tlZDogKFxuICAgIHBpY2tlZEZlYXR1cmVzOiBQaWNrZWRGZWF0dXJlcyxcbiAgICBwaWNrZWRMb2NhdGlvbjogTGF0TG9uSGVpZ2h0XG4gICkgPT4gdm9pZDtcbn1cblxuQG9ic2VydmVyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMb2NhdGlvblBpY2tlciBleHRlbmRzIENvbXBvbmVudDxQcm9wc1R5cGU+IHtcbiAgQG9ic2VydmFibGUgcHJpdmF0ZSBwaWNrTW9kZT86IE1hcEludGVyYWN0aW9uTW9kZTtcbiAgQG9ic2VydmFibGUgcHJpdmF0ZSBjdXJyZW50UGljaz86IFBpY2tlZEZlYXR1cmVzO1xuICBAb2JzZXJ2YWJsZSBwcml2YXRlIHBpY2tEaXNwb3Nlcj86ICgpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzVHlwZSkge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICBtYWtlT2JzZXJ2YWJsZSh0aGlzKTtcbiAgfVxuXG4gIEBhY3Rpb25cbiAgc2V0dXBQaWNrZXIoKSB7XG4gICAgY29uc3QgeyB0ZXJyaWEsIGxvY2F0aW9uLCBvblBpY2tpbmcsIG9uUGlja2VkIH0gPSB0aGlzLnByb3BzO1xuICAgIHRoaXMucGlja01vZGUgPSBuZXcgTWFwSW50ZXJhY3Rpb25Nb2RlKHtcbiAgICAgIG1lc3NhZ2U6IFwiXCIsXG4gICAgICBtZXNzYWdlQXNOb2RlOiA8ZGl2IC8+LFxuICAgICAgdWlNb2RlOiBVSU1vZGUuRGlmZmVyZW5jZVxuICAgIH0pO1xuICAgIGFkZEludGVyYWN0aW9uTW9kZVRvTWFwKHRlcnJpYSwgdGhpcy5waWNrTW9kZSk7XG4gICAgaWYgKGxvY2F0aW9uKSBzaG93TWFya2VyKHRlcnJpYSwgbG9jYXRpb24pO1xuXG4gICAgdGhpcy5waWNrRGlzcG9zZXIgPSByZWFjdGlvbihcbiAgICAgICgpID0+IHRoaXMucGlja01vZGUhLnBpY2tlZEZlYXR1cmVzLFxuICAgICAgYWN0aW9uKChuZXdQaWNrOiBQaWNrZWRGZWF0dXJlcyB8IHVuZGVmaW5lZCkgPT4ge1xuICAgICAgICBpZiAobmV3UGljayA9PT0gdW5kZWZpbmVkIHx8IG5ld1BpY2sucGlja1Bvc2l0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBpY2tNb2RlIS5jdXN0b21VaSA9ICgpID0+IChcbiAgICAgICAgICA8TG9hZGVyIG1lc3NhZ2U9e2BRdWVyeWluZyAke2xvY2F0aW9uID8gXCJuZXdcIiA6IFwiXCJ9IHBvc2l0aW9uLi4uYH0gLz5cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGNhcnRlc2lhblRvRGVncmVlcyhuZXdQaWNrLnBpY2tQb3NpdGlvbik7XG4gICAgICAgIHNob3dNYXJrZXIodGhpcy5wcm9wcy50ZXJyaWEsIHBvc2l0aW9uKTtcblxuICAgICAgICB0aGlzLmN1cnJlbnRQaWNrID0gbmV3UGljaztcbiAgICAgICAgb25QaWNraW5nKHBvc2l0aW9uKTtcbiAgICAgICAgbmV3UGljay5hbGxGZWF0dXJlc0F2YWlsYWJsZVByb21pc2U/LnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGlmIChuZXdQaWNrID09PSB0aGlzLmN1cnJlbnRQaWNrKSB7XG4gICAgICAgICAgICBvblBpY2tlZChuZXdQaWNrLCBwb3NpdGlvbik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIEBhY3Rpb25cbiAgZGVzdHJveVBpY2tlcigpIHtcbiAgICBjb25zdCB7IHRlcnJpYSB9ID0gdGhpcy5wcm9wcztcbiAgICBpZiAodGhpcy5waWNrTW9kZSkge1xuICAgICAgcmVtb3ZlSW50ZXJhY3Rpb25Nb2RlRnJvbU1hcCh0ZXJyaWEsIHRoaXMucGlja01vZGUpO1xuICAgIH1cbiAgICByZW1vdmVNYXJrZXIodGVycmlhKTtcbiAgICB0aGlzLnBpY2tNb2RlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuY3VycmVudFBpY2sgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5waWNrRGlzcG9zZXI/LigpO1xuICAgIHRoaXMucGlja0Rpc3Bvc2VyID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5zZXR1cFBpY2tlcigpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCkge1xuICAgIHRoaXMuZGVzdHJveVBpY2tlcigpO1xuICAgIHRoaXMuc2V0dXBQaWNrZXIoKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMuZGVzdHJveVBpY2tlcigpO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFkZEludGVyYWN0aW9uTW9kZVRvTWFwKHRlcnJpYTogVGVycmlhLCBtb2RlOiBNYXBJbnRlcmFjdGlvbk1vZGUpIHtcbiAgdGVycmlhLm1hcEludGVyYWN0aW9uTW9kZVN0YWNrLnB1c2gobW9kZSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUludGVyYWN0aW9uTW9kZUZyb21NYXAoXG4gIHRlcnJpYTogVGVycmlhLFxuICBtb2RlOiBNYXBJbnRlcmFjdGlvbk1vZGVcbikge1xuICBjb25zdCBbY3VycmVudE1vZGVdID0gdGVycmlhLm1hcEludGVyYWN0aW9uTW9kZVN0YWNrLnNsaWNlKC0xKTtcbiAgaWYgKGN1cnJlbnRNb2RlID09PSBtb2RlKSB7XG4gICAgdGVycmlhLm1hcEludGVyYWN0aW9uTW9kZVN0YWNrLnBvcCgpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNob3dNYXJrZXIodGVycmlhOiBUZXJyaWEsIGxvY2F0aW9uOiBMYXRMb25IZWlnaHQpIHtcbiAgYWRkTWFya2VyKHRlcnJpYSwge1xuICAgIG5hbWU6IFwiVXNlciBzZWxlY3Rpb25cIixcbiAgICBsb2NhdGlvbixcbiAgICBjdXN0b21NYXJrZXJJY29uOiBtYXJrZXJJY29uXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjYXJ0ZXNpYW5Ub0RlZ3JlZXMoY2FydGVzaWFuOiBDYXJ0ZXNpYW4zKSB7XG4gIGNvbnN0IGNhcnRvID0gRWxsaXBzb2lkLldHUzg0LmNhcnRlc2lhblRvQ2FydG9ncmFwaGljKGNhcnRlc2lhbik7XG4gIHJldHVybiB7XG4gICAgbG9uZ2l0dWRlOiBDZXNpdW1NYXRoLnRvRGVncmVlcyhjYXJ0by5sb25naXR1ZGUpLFxuICAgIGxhdGl0dWRlOiBDZXNpdW1NYXRoLnRvRGVncmVlcyhjYXJ0by5sYXRpdHVkZSlcbiAgfTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/terriajs/lib/ReactViews/Tools/DiffTool/LocationPicker.tsx\n\n}");

/***/ }),

/***/ "./node_modules/terriajs/wwwroot/images/difference-pin.png":
/*!*****************************************************************!*\
  !*** ./node_modules/terriajs/wwwroot/images/difference-pin.png ***!
  \*****************************************************************/
/***/ ((module) => {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAA2CAYAAAAyEzKAAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGaADAAQAAAABAAAANgAAAAAbYi+LAAADOUlEQVRYCe1YPWgUQRT+3pEoqEWilSRBjSGNWKhga7DwBwTRKgqChXVM0igKGhRMFCXRQhsbFWOlIAhBm5ythRaCmCBGBAmIwRSx0EjW783tbnb3Zvbn7gqLe7A3M9977/tm3s7OLidIMW8QuyE4ihW2wA5em3it5/WL+A94+IAS3rJ9LhNsHSZJ3POYPoSTxC8xuTfpd44Fs/RdwTgmRZgZsZiIN4QOup/x2huJKdYVvOE0j8s4vgWJoQgFdpJ8ildH4Ky5FQoIDlPovXIYEW8EG7CIdxToqZk4mSj4hDbskhEslYxvETcbKqCkOmHlpQnLtJHAPK81CjTUBH9Yq80tJO3PJSD4wthH3LKz3NK6604xbytbt+nEBf0tDDzkjgo9L1jfE1rfAOF9vIGfeMLxkQCztuTXe9Jlda6CC1iH01EBdZkxcXYXdJxiXSrSmRKgrrKM2ol8vJyR36kieky4TfDd7aQny0/+Eu/Jx1QSYE9dfvLrSqZSSXjEcJsfs8UYPPsImtLnpIdbUg+38IipIhSeusA5dOO+DOC3dwdr8RlniF1nJdLK7XHL91aOlUFMM7ivirwaWCb0ldPZwnh9xrJsWm5jv5ZLj4C7WdG+v5Xt9pwCmnJPfyoi7XjK2c0o0DBTPuWlGRE+WCuc3bWGCSgR+QxvIGLI2zHJds706/+Z4yqUz1ilXOxS9S9LdtnH62vIY/h8llDEjNvwmELmbVaziuYrT8RiIqaGJZyP+It3mW94IpnWB5CfQmXeuH2RuHxdwWt+GvUlg2MriTiHWbaVyDi7W4kftgVaRfwPtYe2BCfm4YHrA88q4hNdYBu+CZ3kFccSV37RFeMU4azmmTjmSozhJYya+Bi4OnCKmJBuftIIz9s0U/823EoLSRXRY50i1psZktJv4kKgumPdwskwbumX3NIHkjgn8IplOliFJ4DUlYSxHgbY13dJ1JYprHim5RLhi2eG5/VEjI1jg8dA+yCXiEltxdUYRXIcc8YHue5JkOKdZYF84ypy5+ZfScBeQ9sUKVS0Zrma5SpUgULBzd3VLFehChQK/g93l/7roxa0OddTbCWe+f9qiS9h8z9WTg38A1O1vXOERmoNAAAAAElFTkSuQmCC";

/***/ })

}]);