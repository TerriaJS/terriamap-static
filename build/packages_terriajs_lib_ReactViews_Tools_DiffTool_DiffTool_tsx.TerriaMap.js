"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
((self || window)["webpackChunkterriajs_map"] = (self || window)["webpackChunkterriajs_map"] || []).push([["packages_terriajs_lib_ReactViews_Tools_DiffTool_DiffTool_tsx"],{

/***/ "./packages/terriajs/lib/ReactViews/Tools/DiffTool/DatePicker.tsx":
/*!************************************************************************!*\
  !*** ./packages/terriajs/lib/ReactViews/Tools/DiffTool/DatePicker.tsx ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"./node_modules/core-js/modules/web.dom-collections.iterator.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dateformat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dateformat */ \"./node_modules/dateformat/lib/dateformat.js\");\n/* harmony import */ var mobx_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mobx-react */ \"./node_modules/mobx-react/dist/mobxreact.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react-i18next */ \"./node_modules/react-i18next/dist/es/useTranslation.js\");\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! styled-components */ \"./node_modules/styled-components/dist/styled-components.browser.esm.js\");\n/* harmony import */ var terriajs_cesium_Source_Core_JulianDate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! terriajs-cesium/Source/Core/JulianDate */ \"./node_modules/terriajs-cesium/Source/Core/JulianDate.js\");\n/* harmony import */ var _Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../Models/Definition/CommonStrata */ \"./packages/terriajs/lib/Models/Definition/CommonStrata.ts\");\n/* harmony import */ var _Styled_Box__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../Styled/Box */ \"./packages/terriajs/lib/Styled/Box.tsx\");\n/* harmony import */ var _Styled_Button__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../Styled/Button */ \"./packages/terriajs/lib/Styled/Button.tsx\");\n/* harmony import */ var _Styled_Icon__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../Styled/Icon */ \"./packages/terriajs/lib/Styled/Icon.tsx\");\n/* harmony import */ var _Styled_Spacing__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../Styled/Spacing */ \"./packages/terriajs/lib/Styled/Spacing.tsx\");\n/* harmony import */ var _Styled_Text__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../Styled/Text */ \"./packages/terriajs/lib/Styled/Text.tsx\");\n/* harmony import */ var _BottomDock_Timeline_DateFormats__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../BottomDock/Timeline/DateFormats */ \"./packages/terriajs/lib/ReactViews/BottomDock/Timeline/DateFormats.ts\");\n/* harmony import */ var _BottomDock_Timeline_DateTimePicker__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../BottomDock/Timeline/DateTimePicker */ \"./packages/terriajs/lib/ReactViews/BottomDock/Timeline/DateTimePicker.tsx\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react/jsx-runtime */ \"./node_modules/react/jsx-runtime.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DatePicker = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.forwardRef)((props, ref) => {\n  const {\n    heading,\n    item,\n    onDateSet\n  } = props;\n  const {\n    t\n  } = (0,react_i18next__WEBPACK_IMPORTED_MODULE_4__.useTranslation)();\n  const [isOpen, setIsOpen] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n  const currentDate = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    const date = item.currentDiscreteJulianDate;\n    return date && terriajs_cesium_Source_Core_JulianDate__WEBPACK_IMPORTED_MODULE_6__[\"default\"].toDate(date);\n  }, [item.currentDiscreteJulianDate]);\n  const formattedCurrentDate = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(() => {\n    if (currentDate === undefined) {\n      return;\n    }\n    const dateFormatting = undefined; // TODO\n    const formattedDate = dateFormatting !== undefined ? (0,dateformat__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(currentDate, dateFormatting) : (0,_BottomDock_Timeline_DateFormats__WEBPACK_IMPORTED_MODULE_13__.formatDateTime)(currentDate);\n    return formattedDate;\n  }, [currentDate]);\n  const toggleOpen = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n    setIsOpen(!isOpen);\n  }, [isOpen]);\n  const changeCurrentDate = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(date => {\n    item.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_7__[\"default\"].user, \"currentTime\", date.toISOString());\n    onDateSet();\n  }, [item, onDateSet]);\n  const moveToPreviousDate = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n    item.moveToPreviousDiscreteTime(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_7__[\"default\"].user);\n    onDateSet();\n  }, [item, onDateSet]);\n  const moveToNextDate = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(() => {\n    item.moveToNextDiscreteTime(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_7__[\"default\"].user);\n    onDateSet();\n  }, [item, onDateSet]);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useImperativeHandle)(ref, () => {\n    return {\n      open: () => {\n        setIsOpen(true);\n      },\n      close: () => {\n        setIsOpen(false);\n      }\n    };\n  }, []);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n    column: true,\n    centered: true,\n    flex: 1,\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n      bottom: 4\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n      centered: true,\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_StyledStyledIcon, {\n        light: true,\n        styledWidth: \"21px\",\n        glyph: _Styled_Icon__WEBPACK_IMPORTED_MODULE_10__[\"default\"].GLYPHS.calendar2,\n        $_css: \"margin-top:-2px;\"\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n        right: 2\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n        textLight: true,\n        extraLarge: true,\n        children: heading\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n      bottom: 2\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(PrevButton, {\n        disabled: item.isPreviousDiscreteTimeAvailable === false,\n        title: t(\"diffTool.datePicker.previousDateTitle\"),\n        onClick: moveToPreviousDate\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(DateButton, {\n        primary: true,\n        isOpen: isOpen,\n        onClick: toggleOpen,\n        title: t(\"diffTool.datePicker.dateButtonTitle\"),\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_12__.TextSpan, {\n          extraLarge: true,\n          children: formattedCurrentDate || \"-\"\n        })\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(NextButton, {\n        disabled: item.isNextDiscreteTimeAvailable === false,\n        title: t(\"diffTool.datePicker.nextDateTitle\"),\n        onClick: moveToNextDate\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(\"div\", {\n      style: {\n        display: isOpen ? \"block\" : \"none\",\n        position: \"absolute\"\n      },\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_BottomDock_Timeline_DateTimePicker__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n        currentDate: currentDate,\n        dates: item.objectifiedDates,\n        onChange: changeCurrentDate,\n        openDirection: \"up\",\n        isOpen: isOpen,\n        onClose: () => setIsOpen(false)\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n      bottom: 4\n    })]\n  });\n});\nDatePicker.displayName = \"DatePicker\";\nconst PagerButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(_Styled_Button__WEBPACK_IMPORTED_MODULE_9__[\"default\"]).attrs({\n  iconProps: {\n    css: \"margin-right:0;\"\n  }\n}).withConfig({\n  displayName: \"DatePicker__PagerButton\",\n  componentId: \"sc-11kes1x-0\"\n})([\"cursor:pointer;background-color:\", \";width:40px;border:1px solid transparent;\", \" flex-direction:column;\"], props => props.theme.colorPrimary, _ref => {\n  let {\n    theme\n  } = _ref;\n  return theme.centerWithFlex();\n});\nconst PrevButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(PagerButton).attrs({\n  renderIcon: () => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_StyledStyledIcon2, {\n    light: true,\n    styledWidth: \"15px\",\n    glyph: _Styled_Icon__WEBPACK_IMPORTED_MODULE_10__[\"default\"].GLYPHS.arrowDown\n  })\n}).withConfig({\n  displayName: \"DatePicker__PrevButton\",\n  componentId: \"sc-11kes1x-1\"\n})([\"\", \" margin-right:1px;\"], _ref2 => {\n  let {\n    theme\n  } = _ref2;\n  return theme.borderRadiusLeft(theme.radius40Button);\n});\nconst NextButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(PagerButton).attrs({\n  renderIcon: () => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_15__.jsx)(_StyledStyledIcon3, {\n    light: true,\n    styledWidth: \"15px\",\n    glyph: _Styled_Icon__WEBPACK_IMPORTED_MODULE_10__[\"default\"].GLYPHS.arrowDown\n  })\n}).withConfig({\n  displayName: \"DatePicker__NextButton\",\n  componentId: \"sc-11kes1x-2\"\n})([\"\", \" margin-left:1px;\"], _ref3 => {\n  let {\n    theme\n  } = _ref3;\n  return theme.borderRadiusRight(theme.radius40Button);\n});\nconst DateButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(_Styled_Button__WEBPACK_IMPORTED_MODULE_9__[\"default\"]).withConfig({\n  displayName: \"DatePicker__DateButton\",\n  componentId: \"sc-11kes1x-3\"\n})([\"z-index:0;\", \";border-radius:0px;border:1px solid \", \";min-width:235px;@media (max-width:\", \"px){min-width:150px;}\"], props => props.isOpen && \"z-index: 1000;\", props => props.theme.colorPrimary, props => props.theme.lg);\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,mobx_react__WEBPACK_IMPORTED_MODULE_2__.observer)(DatePicker));\nvar _StyledStyledIcon = (0,styled_components__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(_Styled_Icon__WEBPACK_IMPORTED_MODULE_10__.StyledIcon).withConfig({\n  displayName: \"DatePicker___StyledStyledIcon\",\n  componentId: \"sc-11kes1x-4\"\n})([\"\", \"\"], p => p.$_css);\nvar _StyledStyledIcon2 = (0,styled_components__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(_Styled_Icon__WEBPACK_IMPORTED_MODULE_10__.StyledIcon).withConfig({\n  displayName: \"DatePicker___StyledStyledIcon2\",\n  componentId: \"sc-11kes1x-5\"\n})([\"transform:rotate(90deg);\"]);\nvar _StyledStyledIcon3 = (0,styled_components__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(_Styled_Icon__WEBPACK_IMPORTED_MODULE_10__.StyledIcon).withConfig({\n  displayName: \"DatePicker___StyledStyledIcon3\",\n  componentId: \"sc-11kes1x-6\"\n})([\"transform:rotate(270deg);\"]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy90ZXJyaWFqcy9saWIvUmVhY3RWaWV3cy9Ub29scy9EaWZmVG9vbC9EYXRlUGlja2VyLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFhQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFBQTtBQWNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGVycmlhanMtbWFwLy4vcGFja2FnZXMvdGVycmlhanMvbGliL1JlYWN0Vmlld3MvVG9vbHMvRGlmZlRvb2wvRGF0ZVBpY2tlci50c3g/MDE5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGF0ZUZvcm1hdCBmcm9tIFwiZGF0ZWZvcm1hdFwiO1xuaW1wb3J0IHsgb2JzZXJ2ZXIgfSBmcm9tIFwibW9ieC1yZWFjdFwiO1xuaW1wb3J0IHtcbiAgZm9yd2FyZFJlZixcbiAgdXNlQ2FsbGJhY2ssXG4gIHVzZUltcGVyYXRpdmVIYW5kbGUsXG4gIHVzZU1lbW8sXG4gIHVzZVN0YXRlXG59IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlVHJhbnNsYXRpb24gfSBmcm9tIFwicmVhY3QtaTE4bmV4dFwiO1xuaW1wb3J0IHN0eWxlZCBmcm9tIFwic3R5bGVkLWNvbXBvbmVudHNcIjtcbmltcG9ydCBKdWxpYW5EYXRlIGZyb20gXCJ0ZXJyaWFqcy1jZXNpdW0vU291cmNlL0NvcmUvSnVsaWFuRGF0ZVwiO1xuaW1wb3J0IERpZmZhYmxlTWl4aW4gZnJvbSBcIi4uLy4uLy4uL01vZGVsTWl4aW5zL0RpZmZhYmxlTWl4aW5cIjtcbmltcG9ydCBDb21tb25TdHJhdGEgZnJvbSBcIi4uLy4uLy4uL01vZGVscy9EZWZpbml0aW9uL0NvbW1vblN0cmF0YVwiO1xuaW1wb3J0IEJveCBmcm9tIFwiLi4vLi4vLi4vU3R5bGVkL0JveFwiO1xuaW1wb3J0IEJ1dHRvbiBmcm9tIFwiLi4vLi4vLi4vU3R5bGVkL0J1dHRvblwiO1xuaW1wb3J0IEljb24sIHsgU3R5bGVkSWNvbiB9IGZyb20gXCIuLi8uLi8uLi9TdHlsZWQvSWNvblwiO1xuaW1wb3J0IFNwYWNpbmcgZnJvbSBcIi4uLy4uLy4uL1N0eWxlZC9TcGFjaW5nXCI7XG5pbXBvcnQgVGV4dCwgeyBUZXh0U3BhbiB9IGZyb20gXCIuLi8uLi8uLi9TdHlsZWQvVGV4dFwiO1xuaW1wb3J0IHsgZm9ybWF0RGF0ZVRpbWUgfSBmcm9tIFwiLi4vLi4vQm90dG9tRG9jay9UaW1lbGluZS9EYXRlRm9ybWF0c1wiO1xuaW1wb3J0IERhdGVUaW1lUGlja2VyIGZyb20gXCIuLi8uLi9Cb3R0b21Eb2NrL1RpbWVsaW5lL0RhdGVUaW1lUGlja2VyXCI7XG5cbmludGVyZmFjZSBQcm9wc1R5cGUge1xuICBoZWFkaW5nOiBzdHJpbmc7XG4gIGl0ZW06IERpZmZhYmxlTWl4aW4uSW5zdGFuY2U7XG4gIG9uRGF0ZVNldDogKCkgPT4gdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRGF0ZVBpY2tlckhhbmRsZSB7XG4gIG9wZW46ICgpID0+IHZvaWQ7XG4gIGNsb3NlOiAoKSA9PiB2b2lkO1xufVxuXG5jb25zdCBEYXRlUGlja2VyID0gZm9yd2FyZFJlZjxJRGF0ZVBpY2tlckhhbmRsZSwgUHJvcHNUeXBlPigocHJvcHMsIHJlZikgPT4ge1xuICBjb25zdCB7IGhlYWRpbmcsIGl0ZW0sIG9uRGF0ZVNldCB9ID0gcHJvcHM7XG4gIGNvbnN0IHsgdCB9ID0gdXNlVHJhbnNsYXRpb24oKTtcbiAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCBjdXJyZW50RGF0ZSA9IHVzZU1lbW8oKCk6IERhdGUgfCB1bmRlZmluZWQgPT4ge1xuICAgIGNvbnN0IGRhdGUgPSBpdGVtLmN1cnJlbnREaXNjcmV0ZUp1bGlhbkRhdGU7XG4gICAgcmV0dXJuIGRhdGUgJiYgSnVsaWFuRGF0ZS50b0RhdGUoZGF0ZSk7XG4gIH0sIFtpdGVtLmN1cnJlbnREaXNjcmV0ZUp1bGlhbkRhdGVdKTtcblxuICBjb25zdCBmb3JtYXR0ZWRDdXJyZW50RGF0ZSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmIChjdXJyZW50RGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRhdGVGb3JtYXR0aW5nID0gdW5kZWZpbmVkOyAvLyBUT0RPXG4gICAgY29uc3QgZm9ybWF0dGVkRGF0ZSA9XG4gICAgICBkYXRlRm9ybWF0dGluZyAhPT0gdW5kZWZpbmVkXG4gICAgICAgID8gZGF0ZUZvcm1hdChjdXJyZW50RGF0ZSwgZGF0ZUZvcm1hdHRpbmcpXG4gICAgICAgIDogZm9ybWF0RGF0ZVRpbWUoY3VycmVudERhdGUpO1xuICAgIHJldHVybiBmb3JtYXR0ZWREYXRlO1xuICB9LCBbY3VycmVudERhdGVdKTtcblxuICBjb25zdCB0b2dnbGVPcGVuID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldElzT3BlbighaXNPcGVuKTtcbiAgfSwgW2lzT3Blbl0pO1xuXG4gIGNvbnN0IGNoYW5nZUN1cnJlbnREYXRlID0gdXNlQ2FsbGJhY2soXG4gICAgKGRhdGU6IERhdGUpID0+IHtcbiAgICAgIGl0ZW0uc2V0VHJhaXQoQ29tbW9uU3RyYXRhLnVzZXIsIFwiY3VycmVudFRpbWVcIiwgZGF0ZS50b0lTT1N0cmluZygpKTtcbiAgICAgIG9uRGF0ZVNldCgpO1xuICAgIH0sXG4gICAgW2l0ZW0sIG9uRGF0ZVNldF1cbiAgKTtcblxuICBjb25zdCBtb3ZlVG9QcmV2aW91c0RhdGUgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgaXRlbS5tb3ZlVG9QcmV2aW91c0Rpc2NyZXRlVGltZShDb21tb25TdHJhdGEudXNlcik7XG4gICAgb25EYXRlU2V0KCk7XG4gIH0sIFtpdGVtLCBvbkRhdGVTZXRdKTtcblxuICBjb25zdCBtb3ZlVG9OZXh0RGF0ZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpdGVtLm1vdmVUb05leHREaXNjcmV0ZVRpbWUoQ29tbW9uU3RyYXRhLnVzZXIpO1xuICAgIG9uRGF0ZVNldCgpO1xuICB9LCBbaXRlbSwgb25EYXRlU2V0XSk7XG5cbiAgdXNlSW1wZXJhdGl2ZUhhbmRsZShcbiAgICByZWYsXG4gICAgKCkgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgb3BlbjogKCkgPT4ge1xuICAgICAgICAgIHNldElzT3Blbih0cnVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICBzZXRJc09wZW4oZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG4gICAgW11cbiAgKTtcblxuICByZXR1cm4gKFxuICAgIDxCb3ggY29sdW1uIGNlbnRlcmVkIGZsZXg9ezF9PlxuICAgICAgPFNwYWNpbmcgYm90dG9tPXs0fSAvPlxuICAgICAgPEJveCBjZW50ZXJlZD5cbiAgICAgICAgPFN0eWxlZEljb25cbiAgICAgICAgICBsaWdodFxuICAgICAgICAgIHN0eWxlZFdpZHRoPVwiMjFweFwiXG4gICAgICAgICAgZ2x5cGg9e0ljb24uR0xZUEhTLmNhbGVuZGFyMn1cbiAgICAgICAgICBjc3M9e1wibWFyZ2luLXRvcDotMnB4O1wifVxuICAgICAgICAvPlxuICAgICAgICA8U3BhY2luZyByaWdodD17Mn0gLz5cbiAgICAgICAgPFRleHQgdGV4dExpZ2h0IGV4dHJhTGFyZ2U+XG4gICAgICAgICAge2hlYWRpbmd9XG4gICAgICAgIDwvVGV4dD5cbiAgICAgIDwvQm94PlxuICAgICAgPFNwYWNpbmcgYm90dG9tPXsyfSAvPlxuICAgICAgPEJveD5cbiAgICAgICAgPFByZXZCdXR0b25cbiAgICAgICAgICBkaXNhYmxlZD17aXRlbS5pc1ByZXZpb3VzRGlzY3JldGVUaW1lQXZhaWxhYmxlID09PSBmYWxzZX1cbiAgICAgICAgICB0aXRsZT17dChcImRpZmZUb29sLmRhdGVQaWNrZXIucHJldmlvdXNEYXRlVGl0bGVcIil9XG4gICAgICAgICAgb25DbGljaz17bW92ZVRvUHJldmlvdXNEYXRlfVxuICAgICAgICAvPlxuICAgICAgICA8RGF0ZUJ1dHRvblxuICAgICAgICAgIHByaW1hcnlcbiAgICAgICAgICBpc09wZW49e2lzT3Blbn1cbiAgICAgICAgICBvbkNsaWNrPXt0b2dnbGVPcGVufVxuICAgICAgICAgIHRpdGxlPXt0KFwiZGlmZlRvb2wuZGF0ZVBpY2tlci5kYXRlQnV0dG9uVGl0bGVcIil9XG4gICAgICAgID5cbiAgICAgICAgICA8VGV4dFNwYW4gZXh0cmFMYXJnZT57Zm9ybWF0dGVkQ3VycmVudERhdGUgfHwgXCItXCJ9PC9UZXh0U3Bhbj5cbiAgICAgICAgPC9EYXRlQnV0dG9uPlxuICAgICAgICA8TmV4dEJ1dHRvblxuICAgICAgICAgIGRpc2FibGVkPXtpdGVtLmlzTmV4dERpc2NyZXRlVGltZUF2YWlsYWJsZSA9PT0gZmFsc2V9XG4gICAgICAgICAgdGl0bGU9e3QoXCJkaWZmVG9vbC5kYXRlUGlja2VyLm5leHREYXRlVGl0bGVcIil9XG4gICAgICAgICAgb25DbGljaz17bW92ZVRvTmV4dERhdGV9XG4gICAgICAgIC8+XG4gICAgICA8L0JveD5cbiAgICAgIDxkaXZcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICBkaXNwbGF5OiBpc09wZW4gPyBcImJsb2NrXCIgOiBcIm5vbmVcIixcbiAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiXG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIDxEYXRlVGltZVBpY2tlclxuICAgICAgICAgIGN1cnJlbnREYXRlPXtjdXJyZW50RGF0ZX1cbiAgICAgICAgICBkYXRlcz17aXRlbS5vYmplY3RpZmllZERhdGVzfVxuICAgICAgICAgIG9uQ2hhbmdlPXtjaGFuZ2VDdXJyZW50RGF0ZX1cbiAgICAgICAgICBvcGVuRGlyZWN0aW9uPVwidXBcIlxuICAgICAgICAgIGlzT3Blbj17aXNPcGVufVxuICAgICAgICAgIG9uQ2xvc2U9eygpID0+IHNldElzT3BlbihmYWxzZSl9XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxTcGFjaW5nIGJvdHRvbT17NH0gLz5cbiAgICA8L0JveD5cbiAgKTtcbn0pO1xuRGF0ZVBpY2tlci5kaXNwbGF5TmFtZSA9IFwiRGF0ZVBpY2tlclwiO1xuXG5jb25zdCBQYWdlckJ1dHRvbiA9IHN0eWxlZChCdXR0b24pLmF0dHJzKHtcbiAgaWNvblByb3BzOiB7XG4gICAgY3NzOiBcIm1hcmdpbi1yaWdodDowO1wiXG4gIH1cbn0pYFxuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGJhY2tncm91bmQtY29sb3I6ICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS5jb2xvclByaW1hcnl9O1xuICB3aWR0aDogNDBweDtcbiAgYm9yZGVyOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XG5cbiAgJHsoeyB0aGVtZSB9KSA9PiB0aGVtZS5jZW50ZXJXaXRoRmxleCgpfVxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuYDtcblxuY29uc3QgUHJldkJ1dHRvbiA9IHN0eWxlZChQYWdlckJ1dHRvbikuYXR0cnMoe1xuICByZW5kZXJJY29uOiAoKSA9PiAoXG4gICAgPFN0eWxlZEljb25cbiAgICAgIGNzcz1cInRyYW5zZm9ybTpyb3RhdGUoOTBkZWcpO1wiXG4gICAgICBsaWdodFxuICAgICAgc3R5bGVkV2lkdGg9XCIxNXB4XCJcbiAgICAgIGdseXBoPXtJY29uLkdMWVBIUy5hcnJvd0Rvd259XG4gICAgLz5cbiAgKVxufSlgXG4gICR7KHsgdGhlbWUgfSkgPT4gdGhlbWUuYm9yZGVyUmFkaXVzTGVmdCh0aGVtZS5yYWRpdXM0MEJ1dHRvbil9XG4gIG1hcmdpbi1yaWdodDogMXB4O1xuYDtcblxuY29uc3QgTmV4dEJ1dHRvbiA9IHN0eWxlZChQYWdlckJ1dHRvbikuYXR0cnMoe1xuICByZW5kZXJJY29uOiAoKSA9PiAoXG4gICAgPFN0eWxlZEljb25cbiAgICAgIGNzcz1cInRyYW5zZm9ybTpyb3RhdGUoMjcwZGVnKTtcIlxuICAgICAgbGlnaHRcbiAgICAgIHN0eWxlZFdpZHRoPVwiMTVweFwiXG4gICAgICBnbHlwaD17SWNvbi5HTFlQSFMuYXJyb3dEb3dufVxuICAgIC8+XG4gIClcbn0pYFxuICAkeyh7IHRoZW1lIH0pID0+IHRoZW1lLmJvcmRlclJhZGl1c1JpZ2h0KHRoZW1lLnJhZGl1czQwQnV0dG9uKX1cbiAgbWFyZ2luLWxlZnQ6IDFweDtcbmA7XG5cbmNvbnN0IERhdGVCdXR0b24gPSBzdHlsZWQoQnV0dG9uKTx7IGlzT3BlbjogYm9vbGVhbiB9PmBcbiAgLy8gei1pbmRleDogMTAwMDsgLy8gKE5hbmRhKTogU28gdGhhdCB3ZSBkb24ndCBsb29zZSB0aGUgYnV0dG9uIGNsaWNrcyB0byB0aGUgZGF0ZSBwaWNrZXIgcG9wdXBcbiAgei1pbmRleDogMDtcbiAgJHsocHJvcHMpID0+IHByb3BzLmlzT3BlbiAmJiBgei1pbmRleDogMTAwMDtgfTtcblxuICBib3JkZXItcmFkaXVzOiAwcHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkICR7KHByb3BzKSA9PiBwcm9wcy50aGVtZS5jb2xvclByaW1hcnl9O1xuXG4gIG1pbi13aWR0aDogMjM1cHg7XG4gIEBtZWRpYSAobWF4LXdpZHRoOiAkeyhwcm9wczogYW55KSA9PiBwcm9wcy50aGVtZS5sZ31weCkge1xuICAgIG1pbi13aWR0aDogMTUwcHg7XG4gIH1cbmA7XG5cbmV4cG9ydCBkZWZhdWx0IG9ic2VydmVyKERhdGVQaWNrZXIpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./packages/terriajs/lib/ReactViews/Tools/DiffTool/DatePicker.tsx\n\n}");

/***/ }),

/***/ "./packages/terriajs/lib/ReactViews/Tools/DiffTool/DiffTool.tsx":
/*!**********************************************************************!*\
  !*** ./packages/terriajs/lib/ReactViews/Tools/DiffTool/DiffTool.tsx ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"./node_modules/core-js/modules/es.regexp.exec.js\");\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"./node_modules/core-js/modules/web.dom-collections.iterator.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var dateformat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dateformat */ \"./node_modules/dateformat/lib/dateformat.js\");\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! mobx */ \"./node_modules/mobx/dist/mobx.esm.js\");\n/* harmony import */ var mobx_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! mobx-react */ \"./node_modules/mobx-react/dist/mobxreact.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index.js\");\n/* harmony import */ var react_i18next__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! react-i18next */ \"./node_modules/react-i18next/dist/es/useTranslation.js\");\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! styled-components */ \"./node_modules/styled-components/dist/styled-components.browser.esm.js\");\n/* harmony import */ var terriajs_cesium_Source_Core_Cartographic__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! terriajs-cesium/Source/Core/Cartographic */ \"./node_modules/terriajs-cesium/Source/Core/Cartographic.js\");\n/* harmony import */ var terriajs_cesium_Source_Core_JulianDate__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! terriajs-cesium/Source/Core/JulianDate */ \"./node_modules/terriajs-cesium/Source/Core/JulianDate.js\");\n/* harmony import */ var terriajs_cesium_Source_Core_Math__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! terriajs-cesium/Source/Core/Math */ \"./node_modules/terriajs-cesium/Source/Core/Math.js\");\n/* harmony import */ var terriajs_cesium_Source_Core_createGuid__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! terriajs-cesium/Source/Core/createGuid */ \"./node_modules/terriajs-cesium/Source/Core/createGuid.js\");\n/* harmony import */ var terriajs_cesium_Source_Scene_SplitDirection__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! terriajs-cesium/Source/Scene/SplitDirection */ \"./node_modules/terriajs-cesium/Source/Scene/SplitDirection.js\");\n/* harmony import */ var _Core_filterOutUndefined__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../Core/filterOutUndefined */ \"./packages/terriajs/lib/Core/filterOutUndefined.ts\");\n/* harmony import */ var _Core_isDefined__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../Core/isDefined */ \"./packages/terriajs/lib/Core/isDefined.ts\");\n/* harmony import */ var _Map_Vector_prettifyCoordinates__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../Map/Vector/prettifyCoordinates */ \"./packages/terriajs/lib/Map/Vector/prettifyCoordinates.ts\");\n/* harmony import */ var _ModelMixins_DiffableMixin__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../ModelMixins/DiffableMixin */ \"./packages/terriajs/lib/ModelMixins/DiffableMixin.ts\");\n/* harmony import */ var _ModelMixins_MappableMixin__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../ModelMixins/MappableMixin */ \"./packages/terriajs/lib/ModelMixins/MappableMixin.ts\");\n/* harmony import */ var _Models_Catalog_CatalogReferences_SplitItemReference__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../Models/Catalog/CatalogReferences/SplitItemReference */ \"./packages/terriajs/lib/Models/Catalog/CatalogReferences/SplitItemReference.ts\");\n/* harmony import */ var _Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../Models/Definition/CommonStrata */ \"./packages/terriajs/lib/Models/Definition/CommonStrata.ts\");\n/* harmony import */ var _Models_Definition_hasTraits__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../Models/Definition/hasTraits */ \"./packages/terriajs/lib/Models/Definition/hasTraits.ts\");\n/* harmony import */ var _Models_Definition_updateModelFromJson__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../Models/Definition/updateModelFromJson */ \"./packages/terriajs/lib/Models/Definition/updateModelFromJson.ts\");\n/* harmony import */ var _Models_LocationMarkerUtils__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../Models/LocationMarkerUtils */ \"./packages/terriajs/lib/Models/LocationMarkerUtils.ts\");\n/* harmony import */ var _Styled_Box__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../Styled/Box */ \"./packages/terriajs/lib/Styled/Box.tsx\");\n/* harmony import */ var _Styled_Button__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../Styled/Button */ \"./packages/terriajs/lib/Styled/Button.tsx\");\n/* harmony import */ var _Styled_Icon__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../Styled/Icon */ \"./packages/terriajs/lib/Styled/Icon.tsx\");\n/* harmony import */ var _Styled_Select__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../Styled/Select */ \"./packages/terriajs/lib/Styled/Select.tsx\");\n/* harmony import */ var _Styled_Spacing__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../Styled/Spacing */ \"./packages/terriajs/lib/Styled/Spacing.tsx\");\n/* harmony import */ var _Styled_Text__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../Styled/Text */ \"./packages/terriajs/lib/Styled/Text.tsx\");\n/* harmony import */ var _Traits_TraitsClasses_ImageryProviderTraits__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../../Traits/TraitsClasses/ImageryProviderTraits */ \"./packages/terriajs/lib/Traits/TraitsClasses/ImageryProviderTraits.ts\");\n/* harmony import */ var _Context__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../Context */ \"./packages/terriajs/lib/ReactViews/Context/index.ts\");\n/* harmony import */ var _Custom_parseCustomMarkdownToReact__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../../Custom/parseCustomMarkdownToReact */ \"./packages/terriajs/lib/ReactViews/Custom/parseCustomMarkdownToReact.ts\");\n/* harmony import */ var _Loader__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../../Loader */ \"./packages/terriajs/lib/ReactViews/Loader.tsx\");\n/* harmony import */ var _Workflow_WorkflowPanel__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../Workflow/WorkflowPanel */ \"./packages/terriajs/lib/ReactViews/Workflow/WorkflowPanel.tsx\");\n/* harmony import */ var _DatePicker__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./DatePicker */ \"./packages/terriajs/lib/ReactViews/Tools/DiffTool/DatePicker.tsx\");\n/* harmony import */ var _LocationPicker__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./LocationPicker */ \"./packages/terriajs/lib/ReactViews/Tools/DiffTool/LocationPicker.tsx\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! react/jsx-runtime */ \"./node_modules/react/jsx-runtime.js\");\n\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DiffTool = (0,mobx_react__WEBPACK_IMPORTED_MODULE_4__.observer)(props => {\n  const [leftItem, setLeftItem] = (0,react__WEBPACK_IMPORTED_MODULE_5__.useState)();\n  const [rightItem, setRightItem] = (0,react__WEBPACK_IMPORTED_MODULE_5__.useState)();\n  const [userSelectedSourceItem, setUserSelectedSourceItem] = (0,react__WEBPACK_IMPORTED_MODULE_5__.useState)();\n  const viewState = (0,_Context__WEBPACK_IMPORTED_MODULE_31__.useViewState)();\n  const changeSourceItem = sourceItem => {\n    setUserSelectedSourceItem(sourceItem);\n  };\n  const sourceItem = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => userSelectedSourceItem || props.sourceItem, [props.sourceItem, userSelectedSourceItem]);\n  (0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    const terria = viewState.terria;\n    const originalSettings = {\n      showSplitter: terria.showSplitter,\n      isMapFullScreen: viewState.isMapFullScreen\n    };\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      terria.showSplitter = true;\n      sourceItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"show\", false);\n      terria.elements.set(\"timeline\", {\n        visible: false\n      });\n    });\n    const itemsPromise = Promise.all([createSplitItem(sourceItem, terriajs_cesium_Source_Scene_SplitDirection__WEBPACK_IMPORTED_MODULE_13__[\"default\"].LEFT), createSplitItem(sourceItem, terriajs_cesium_Source_Scene_SplitDirection__WEBPACK_IMPORTED_MODULE_13__[\"default\"].RIGHT)]);\n    itemsPromise.then(_ref => {\n      let [lItem, rItem] = _ref;\n      setLeftItem(lItem);\n      setRightItem(rItem);\n    }).catch();\n    return () => {\n      (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n        terria.showSplitter = originalSettings.showSplitter;\n        viewState.setIsMapFullScreen(originalSettings.isMapFullScreen);\n        sourceItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"show\", true);\n        terria.elements.set(\"timeline\", {\n          visible: true\n        });\n      });\n      itemsPromise.then(_ref2 => {\n        let [lItem, rItem] = _ref2;\n        if (lItem) removeSplitItem(lItem);\n        if (rItem) removeSplitItem(rItem);\n      });\n    };\n  }, [sourceItem, viewState]);\n  if (leftItem && rightItem) {\n    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Main, _objectSpread(_objectSpread({}, props), {}, {\n      terria: props.viewState.terria,\n      sourceItem: sourceItem,\n      changeSourceItem: changeSourceItem,\n      leftItem: leftItem,\n      rightItem: rightItem\n    }));\n  }\n  return null;\n});\nDiffTool.displayName = \"DiffTool\";\nconst Main = (0,mobx_react__WEBPACK_IMPORTED_MODULE_4__.observer)(props => {\n  var _diffItem$styleSelect3;\n  const {\n    terria,\n    viewState,\n    sourceItem,\n    leftItem,\n    rightItem\n  } = props;\n  const {\n    t\n  } = (0,react_i18next__WEBPACK_IMPORTED_MODULE_7__.useTranslation)();\n  const theme = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__.useTheme)();\n  const [location, setLocation] = (0,react__WEBPACK_IMPORTED_MODULE_5__.useState)();\n  const [, setLocationPickError] = (0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(false);\n  const [isPickingNewLocation, setIsPickingNewLocation] = (0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(false);\n  const leftDatePickerHandle = (0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const rightDatePickerHandle = (0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n  const diffItem = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return leftItem;\n  }, [leftItem]);\n  const currentLeftDate = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return leftItem.currentDiscreteJulianDate;\n  }, [leftItem.currentDiscreteJulianDate]);\n  const currentRightDate = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return rightItem.currentDiscreteJulianDate;\n  }, [rightItem.currentDiscreteJulianDate]);\n  const diffItemName = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    const name = sourceItem.name || \"\";\n    const format = \"yyyy/mm/dd\";\n    if (!currentLeftDate || !currentRightDate) {\n      return name;\n    } else {\n      const d1 = (0,dateformat__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(terriajs_cesium_Source_Core_JulianDate__WEBPACK_IMPORTED_MODULE_10__[\"default\"].toDate(currentLeftDate), format);\n      const d2 = (0,dateformat__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(terriajs_cesium_Source_Core_JulianDate__WEBPACK_IMPORTED_MODULE_10__[\"default\"].toDate(currentRightDate), format);\n      return \"\".concat(name, \" - difference for dates \").concat(d1, \", \").concat(d2);\n    }\n  }, [currentLeftDate, currentRightDate, sourceItem.name]);\n  const diffableItemsInWorkbench = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return terria.workbench.items.filter(item => _ModelMixins_DiffableMixin__WEBPACK_IMPORTED_MODULE_17__[\"default\"].isMixedInto(item) && item.canDiffImages);\n  }, [terria.workbench.items]);\n  const previewStyle = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    var _diffItem$styleSelect;\n    return (_diffItem$styleSelect = diffItem.styleSelectableDimensions) === null || _diffItem$styleSelect === void 0 || (_diffItem$styleSelect = _diffItem$styleSelect[0]) === null || _diffItem$styleSelect === void 0 ? void 0 : _diffItem$styleSelect.selectedId;\n  }, [diffItem.styleSelectableDimensions]);\n  const currentDiffStyle = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return diffItem.diffStyleId;\n  }, [diffItem.diffStyleId]);\n  const availableDiffStyles = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return (0,_Core_filterOutUndefined__WEBPACK_IMPORTED_MODULE_14__[\"default\"])(diffItem.availableDiffStyles.map(diffStyleId => {\n      var _diffItem$styleSelect2;\n      return (_diffItem$styleSelect2 = diffItem.styleSelectableDimensions) === null || _diffItem$styleSelect2 === void 0 || (_diffItem$styleSelect2 = _diffItem$styleSelect2[0]) === null || _diffItem$styleSelect2 === void 0 || (_diffItem$styleSelect2 = _diffItem$styleSelect2.options) === null || _diffItem$styleSelect2 === void 0 ? void 0 : _diffItem$styleSelect2.find(style => style.id === diffStyleId);\n    }));\n  }, [diffItem.availableDiffStyles, diffItem.styleSelectableDimensions]);\n  const diffLegendUrl = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return currentDiffStyle && currentLeftDate && currentRightDate && diffItem.getLegendUrlForStyle(currentDiffStyle, currentLeftDate, currentRightDate);\n  }, [currentDiffStyle, currentLeftDate, currentRightDate, diffItem]);\n  const previewLegendUrl = (0,react__WEBPACK_IMPORTED_MODULE_5__.useMemo)(() => {\n    return previewStyle && diffItem.getLegendUrlForStyle(previewStyle);\n  }, [previewStyle, diffItem]);\n  const showItem = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(model => {\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      if (hasOpacity(model)) {\n        model.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"opacity\", 0.8);\n      }\n    });\n  }, []);\n  const hideItem = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(model => {\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      if (hasOpacity(model)) {\n        model.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"opacity\", 0);\n      }\n    });\n  }, []);\n  const handleChangeSourceItem = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(e => {\n    const newSourceItem = diffableItemsInWorkbench.find(item => item.uniqueId === e.target.value);\n    if (newSourceItem) props.changeSourceItem(newSourceItem);\n  }, [diffableItemsInWorkbench, props]);\n  const handleChangePreviewStyle = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(e => {\n    const styleId = e.target.value;\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      var _leftItem$styleSelect, _rightItem$styleSelec;\n      (_leftItem$styleSelect = leftItem.styleSelectableDimensions) === null || _leftItem$styleSelect === void 0 || (_leftItem$styleSelect = _leftItem$styleSelect[0]) === null || _leftItem$styleSelect === void 0 || _leftItem$styleSelect.setDimensionValue(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, styleId);\n      (_rightItem$styleSelec = rightItem.styleSelectableDimensions) === null || _rightItem$styleSelec === void 0 || (_rightItem$styleSelec = _rightItem$styleSelec[0]) === null || _rightItem$styleSelec === void 0 || _rightItem$styleSelec.setDimensionValue(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, styleId);\n    });\n  }, [leftItem.styleSelectableDimensions, rightItem.styleSelectableDimensions]);\n  const handleChangeDiffStyle = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(e => {\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      diffItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"diffStyleId\", e.target.value);\n    });\n  }, [diffItem]);\n  const onUserPickingLocation = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(_pickingLocation => {\n    setIsPickingNewLocation(true);\n  }, []);\n  const onUserPickLocation = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)((pickedFeatures, pickedLocationValue) => {\n    const feature = pickedFeatures.features.find(f => doesFeatureBelongToItem(f, leftItem) || doesFeatureBelongToItem(f, rightItem));\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      if (feature) {\n        leftItem.setTimeFilterFeature(feature, pickedFeatures.providerCoords);\n        rightItem.setTimeFilterFeature(feature, pickedFeatures.providerCoords);\n        setLocation(pickedLocationValue);\n        setLocationPickError(false);\n      } else {\n        setLocationPickError(true);\n      }\n      setIsPickingNewLocation(false);\n    });\n  }, [leftItem, rightItem]);\n  const unsetDates = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(() => {\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      leftItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"currentTime\", null);\n      rightItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"currentTime\", null);\n    });\n    hideItem(leftItem);\n    hideItem(rightItem);\n  }, [leftItem, rightItem, hideItem]);\n  const generateDiff = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(() => {\n    if (currentLeftDate === undefined || currentRightDate === undefined || currentDiffStyle === undefined) {\n      return;\n    }\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      terria.overlays.remove(leftItem);\n      terria.overlays.remove(rightItem);\n      terria.workbench.add(diffItem);\n      diffItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"name\", diffItemName);\n      diffItem.showDiffImage(currentLeftDate, currentRightDate, currentDiffStyle);\n      const diffItemProperties = diffItem.diffItemProperties;\n      if (diffItemProperties) {\n        (0,_Models_Definition_updateModelFromJson__WEBPACK_IMPORTED_MODULE_22__[\"default\"])(diffItem, _Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, diffItemProperties);\n      }\n      terria.showSplitter = false;\n    });\n  }, [currentDiffStyle, currentLeftDate, currentRightDate, diffItem, diffItemName, leftItem, rightItem, terria]);\n  const resetTool = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(() => {\n    (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n      diffItem.clearDiffImage();\n      setDefaultDiffStyle(diffItem);\n      terria.overlays.add(leftItem);\n      terria.overlays.add(rightItem);\n      terria.workbench.remove(diffItem);\n      terria.showSplitter = true;\n      leftItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"splitDirection\", terriajs_cesium_Source_Scene_SplitDirection__WEBPACK_IMPORTED_MODULE_13__[\"default\"].LEFT);\n      rightItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"splitDirection\", terriajs_cesium_Source_Scene_SplitDirection__WEBPACK_IMPORTED_MODULE_13__[\"default\"].RIGHT);\n    });\n  }, [diffItem, leftItem, rightItem, terria]);\n  const setLocationFromActiveSearch = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(async () => {\n    const markerLocation = (0,_Models_LocationMarkerUtils__WEBPACK_IMPORTED_MODULE_23__.getMarkerLocation)(terria);\n    if (markerLocation && _ModelMixins_MappableMixin__WEBPACK_IMPORTED_MODULE_18__[\"default\"].isMixedInto(sourceItem)) {\n      const part = sourceItem.mapItems.find(p => _ModelMixins_MappableMixin__WEBPACK_IMPORTED_MODULE_18__.ImageryParts.is(p));\n      const imageryProvider = part && _ModelMixins_MappableMixin__WEBPACK_IMPORTED_MODULE_18__.ImageryParts.is(part) && part.imageryProvider;\n      if (imageryProvider) {\n        const promises = [setTimeFilterFromLocation(leftItem, markerLocation, imageryProvider), setTimeFilterFromLocation(rightItem, markerLocation, imageryProvider)];\n        const someSuccessful = (await Promise.all(promises)).some(ok => ok);\n        if (someSuccessful) {\n          (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => setLocation(markerLocation));\n        } else {\n          // If we cannot resolve imagery at the marker location, remove it\n          (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => (0,_Models_LocationMarkerUtils__WEBPACK_IMPORTED_MODULE_23__.removeMarker)(terria));\n        }\n      }\n    }\n  }, [leftItem, rightItem, sourceItem, terria]);\n  (0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)(() => {\n    const {\n      latitude,\n      longitude,\n      height\n    } = diffItem.timeFilterCoordinates;\n    if (latitude !== undefined && longitude !== undefined) {\n      setLocation({\n        latitude,\n        longitude,\n        height\n      });\n      // Assuming removeMarker is an action or handles its own MobX transactions\n      (0,_Models_LocationMarkerUtils__WEBPACK_IMPORTED_MODULE_23__.removeMarker)(terria);\n    } else {\n      setLocationFromActiveSearch();\n    }\n  }, [diffItem.timeFilterCoordinates, setLocationFromActiveSearch, terria]);\n  const closePanel = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(() => {\n    viewState.closeTool();\n  }, [viewState]);\n  const isShowingDiff = diffItem.isShowingDiff;\n  const datesSelected = currentLeftDate && currentRightDate;\n  const isReadyToGenerateDiff = location && datesSelected && currentDiffStyle !== undefined;\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Workflow_WorkflowPanel__WEBPACK_IMPORTED_MODULE_34__[\"default\"], {\n    viewState: viewState,\n    title: t(\"diffTool.title\"),\n    icon: _Styled_Icon__WEBPACK_IMPORTED_MODULE_26__.GLYPHS.difference,\n    onClose: () => {\n      resetTool();\n      closePanel();\n    },\n    children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_StyledDiv, {\n      children: [isShowingDiff && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n        medium: true,\n        textLight: true,\n        children: t(\"diffTool.differenceResultsTitle\")\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n        textLight: true,\n        children: t(\"diffTool.instructions.paneDescription\")\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Group, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(LocationAndDatesDisplayBox, {\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n              medium: true,\n              children: [t(\"diffTool.labels.area\"), \":\"]\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(\"div\", {\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n                bold: true,\n                textLight: true,\n                children: location ? t(\"diffTool.locationDisplay.locationSelected.title\") : t(\"diffTool.locationDisplay.noLocationSelected.title\")\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n                light: true,\n                textLight: true,\n                small: true,\n                children: location ? t(\"diffTool.locationDisplay.locationSelected.description\") : t(\"diffTool.locationDisplay.noLocationSelected.description\")\n              })]\n            })]\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n              medium: true,\n              children: [t(\"diffTool.labels.dates\"), \":\"]\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n              column: true,\n              alignItemsFlexStart: true,\n              children: [currentLeftDate && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n                large: true,\n                children: [\"(A)\", \" \", (0,dateformat__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(terriajs_cesium_Source_Core_JulianDate__WEBPACK_IMPORTED_MODULE_10__[\"default\"].toDate(currentLeftDate), \"dd/mm/yyyy\")]\n              }), !currentLeftDate && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Button__WEBPACK_IMPORTED_MODULE_25__.RawButton, {\n                onClick: () => {\n                  var _leftDatePickerHandle;\n                  return (_leftDatePickerHandle = leftDatePickerHandle.current) === null || _leftDatePickerHandle === void 0 ? void 0 : _leftDatePickerHandle.open();\n                },\n                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__.TextSpan, {\n                  isLink: true,\n                  small: true,\n                  bold: true,\n                  children: t(\"diffTool.instructions.setDateA\")\n                })\n              }), currentRightDate && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n                large: true,\n                children: [\"(B)\", \" \", (0,dateformat__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(terriajs_cesium_Source_Core_JulianDate__WEBPACK_IMPORTED_MODULE_10__[\"default\"].toDate(currentRightDate), \"dd/mm/yyyy\")]\n              }), !currentRightDate && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Button__WEBPACK_IMPORTED_MODULE_25__.RawButton, {\n                onClick: () => {\n                  var _rightDatePickerHandl;\n                  return (_rightDatePickerHandl = rightDatePickerHandle.current) === null || _rightDatePickerHandl === void 0 ? void 0 : _rightDatePickerHandl.open();\n                },\n                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__.TextSpan, {\n                  isLink: true,\n                  small: true,\n                  bold: true,\n                  children: t(\"diffTool.instructions.setDateB\")\n                })\n              }), isShowingDiff === false && currentLeftDate && currentRightDate && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Button__WEBPACK_IMPORTED_MODULE_25__.RawButton, {\n                onClick: unsetDates,\n                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__.TextSpan, {\n                  isLink: true,\n                  small: true,\n                  children: t(\"diffTool.instructions.changeDates\")\n                })\n              })]\n            })]\n          })]\n        })\n      }), !isShowingDiff && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(Group, {\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(Selector, {\n          viewState: viewState,\n          value: sourceItem.uniqueId,\n          onChange: handleChangeSourceItem,\n          label: t(\"diffTool.labels.sourceDataset\"),\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(\"option\", {\n            disabled: true,\n            children: \"Select source item\"\n          }), diffableItemsInWorkbench.map(item => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(\"option\", {\n            value: item.uniqueId,\n            children: item.name\n          }, item.uniqueId))]\n        })\n      }), !isShowingDiff && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(Group, {\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(Selector, {\n          viewState: viewState,\n          spacingBottom: true,\n          value: previewStyle,\n          onChange: handleChangePreviewStyle,\n          label: t(\"diffTool.labels.previewStyle\"),\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(\"option\", {\n            disabled: true,\n            value: \"\",\n            children: t(\"diffTool.choosePreview\")\n          }), (_diffItem$styleSelect3 = diffItem.styleSelectableDimensions) === null || _diffItem$styleSelect3 === void 0 || (_diffItem$styleSelect3 = _diffItem$styleSelect3[0]) === null || _diffItem$styleSelect3 === void 0 || (_diffItem$styleSelect3 = _diffItem$styleSelect3.options) === null || _diffItem$styleSelect3 === void 0 ? void 0 : _diffItem$styleSelect3.map(style => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(\"option\", {\n            value: style.id,\n            children: style.name\n          }, style.id))]\n        }), previewLegendUrl && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(LegendImage, {\n          width: \"100%\",\n          src: previewLegendUrl\n        })]\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(Group, {\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(Selector, {\n          viewState: viewState,\n          value: currentDiffStyle || \"\",\n          onChange: handleChangeDiffStyle,\n          label: t(\"diffTool.labels.differenceOutput\"),\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(\"option\", {\n            disabled: true,\n            value: \"\",\n            children: t(\"diffTool.chooseDifference\")\n          }), availableDiffStyles.map(style => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(\"option\", {\n            value: style.id,\n            children: style.name\n          }, style.id))]\n        }), isShowingDiff && diffLegendUrl && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(LegendImage, {\n          width: \"100%\",\n          src: diffLegendUrl\n        })]\n      }), !isShowingDiff && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(\"div\", {\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(GenerateButton, {\n          onClick: generateDiff,\n          disabled: !isReadyToGenerateDiff,\n          \"aria-describedby\": \"TJSDifferenceDisabledButtonPrompt\",\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__.TextSpan, {\n            large: true,\n            children: t(\"diffTool.labels.generateDiffButtonText\")\n          })\n        }), !isReadyToGenerateDiff && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_StyledDiv2, {\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_StyledDiv3, {\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Icon__WEBPACK_IMPORTED_MODULE_26__.StyledIcon, {\n              fillColor: \"#ccc\",\n              styledWidth: \"16px\",\n              styledHeight: \"16px\",\n              glyph: _Styled_Icon__WEBPACK_IMPORTED_MODULE_26__.GLYPHS.info\n            })\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n            small: true,\n            light: true,\n            textLight: true,\n            id: \"TJSDifferenceDisabledButtonPrompt\",\n            children: t(\"diffTool.labels.disabledButtonPrompt\")\n          })]\n        })]\n      }), isShowingDiff && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n        centered: true,\n        left: true,\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_StyledBackButton, {\n          transparentBg: true,\n          onClick: resetTool,\n          $_css: theme.textLight,\n          $_css2: theme.textLight,\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__.BoxSpan, {\n            centered: true,\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_StyledStyledIcon, {\n              light: true,\n              styledWidth: \"16px\",\n              glyph: _Styled_Icon__WEBPACK_IMPORTED_MODULE_26__.GLYPHS.arrowDown\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__.TextSpan, {\n              medium: true,\n              children: t(\"general.back\")\n            })]\n          })\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_StyledButton, {\n          primary: true,\n          onClick: closePanel,\n          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__.TextSpan, {\n            medium: true,\n            children: t(\"diffTool.labels.saveToWorkbench\")\n          })\n        })]\n      }), !isShowingDiff && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_LocationPicker__WEBPACK_IMPORTED_MODULE_36__[\"default\"], {\n        terria: terria,\n        location: location,\n        onPicking: onUserPickingLocation,\n        onPicked: onUserPickLocation\n      }), !isShowingDiff && /*#__PURE__*/react_dom__WEBPACK_IMPORTED_MODULE_6__.createPortal(/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n        centered: true,\n        fullWidth: true,\n        flexWrap: true,\n        backgroundColor: theme.dark,\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_DatePicker__WEBPACK_IMPORTED_MODULE_35__[\"default\"], {\n          ref: leftDatePickerHandle,\n          heading: t(\"diffTool.labels.dateComparisonA\"),\n          item: leftItem,\n          onDateSet: () => showItem(leftItem)\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(AreaFilterSelection, {\n          location: location,\n          isPickingNewLocation: isPickingNewLocation\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_DatePicker__WEBPACK_IMPORTED_MODULE_35__[\"default\"], {\n          ref: rightDatePickerHandle,\n          heading: t(\"diffTool.labels.dateComparisonB\"),\n          item: rightItem,\n          onDateSet: () => showItem(rightItem)\n        })]\n      }), document.getElementById(\"TJS-BottomDockLastPortal\"))]\n    })\n  });\n});\nMain.displayName = \"Main\";\nconst BackButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Button__WEBPACK_IMPORTED_MODULE_25__[\"default\"]).attrs({\n  secondary: true\n}).withConfig({\n  displayName: \"DiffTool__BackButton\",\n  componentId: \"sc-3vyhxu-0\"\n})([\"\"]);\nvar _StyledBackButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(BackButton).withConfig({\n  displayName: \"DiffTool___StyledBackButton\",\n  componentId: \"sc-3vyhxu-1\"\n})([\"color:\", \";border-color:\", \";\"], p => p.$_css, p => p.$_css2);\nconst GenerateButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Button__WEBPACK_IMPORTED_MODULE_25__[\"default\"]).attrs({\n  primary: true,\n  fullWidth: true\n}).withConfig({\n  displayName: \"DiffTool__GenerateButton\",\n  componentId: \"sc-3vyhxu-2\"\n})([\"\"]);\nconst Selector = props => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n  fullWidth: true,\n  column: true,\n  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(\"label\", {\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_StyledText, {\n      textLight: true,\n      $_css3: \"p {margin: 0;}\",\n      children: (0,_Custom_parseCustomMarkdownToReact__WEBPACK_IMPORTED_MODULE_32__.parseCustomMarkdownToReactWithOptions)(\"\".concat(props.label, \":\"), {\n        injectTermsAsTooltips: true,\n        tooltipTerms: props.viewState.terria.configParameters.helpContentTerms\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_28__[\"default\"], {\n      bottom: 1\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Select__WEBPACK_IMPORTED_MODULE_27__[\"default\"], _objectSpread(_objectSpread({}, props), {}, {\n      children: props.children\n    })), props.spacingBottom && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_28__[\"default\"], {\n      bottom: 2\n    })]\n  })\n});\nconst AreaFilterSelection = props => {\n  const {\n    location,\n    isPickingNewLocation\n  } = props;\n  const {\n    t\n  } = (0,react_i18next__WEBPACK_IMPORTED_MODULE_7__.useTranslation)();\n  let locationText = \"-\";\n  if (location) {\n    const {\n      longitude,\n      latitude\n    } = (0,_Map_Vector_prettifyCoordinates__WEBPACK_IMPORTED_MODULE_16__[\"default\"])(location.longitude, location.latitude, {\n      digits: 2\n    });\n    locationText = \"\".concat(longitude, \" \").concat(latitude);\n  }\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_StyledBox, {\n    column: true,\n    centered: true,\n    styledMinWidth: \"230px\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsxs)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n      centered: true,\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Icon__WEBPACK_IMPORTED_MODULE_26__.StyledIcon, {\n        light: true,\n        styledWidth: \"16px\",\n        glyph: _Styled_Icon__WEBPACK_IMPORTED_MODULE_26__.GLYPHS.location2\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_28__[\"default\"], {\n        right: 2\n      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n        textLight: true,\n        extraLarge: true,\n        children: t(\"diffTool.labels.areaFilterSelection\")\n      })]\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Spacing__WEBPACK_IMPORTED_MODULE_28__[\"default\"], {\n      bottom: 3\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"], {\n      styledMinHeight: \"40px\",\n      children: isPickingNewLocation ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_StyledText2, {\n        textLight: true,\n        extraExtraLarge: true,\n        bold: true\n        // Using legacy Loader.jsx means we override at a higher level to inherit\n        // this fills tyle\n        ,\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Loader__WEBPACK_IMPORTED_MODULE_33__[\"default\"], {\n          light: true,\n          message: \"Querying \".concat(location ? \"new\" : \"\", \" position...\")\n        })\n      }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n        textLight: true,\n        bold: true,\n        heading: true,\n        textAlignCenter: true,\n        children: locationText\n      })\n    })]\n  });\n};\nconst Group = styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"].div.withConfig({\n  displayName: \"DiffTool__Group\",\n  componentId: \"sc-3vyhxu-3\"\n})([\"background-color:\", \";padding:15px;border-radius:5px;\"], p => p.theme.darkWithOverlay);\nconst LocationAndDatesDisplayBox = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"]).attrs({\n  column: true\n}).withConfig({\n  displayName: \"DiffTool__LocationAndDatesDisplayBox\",\n  componentId: \"sc-3vyhxu-4\"\n})([\"color:\", \";padding:15px;> \", \":first-child{margin-bottom:13px;}> div > div:first-child{margin-right:5px;min-width:50px;}\"], p => p.theme.textLight, _Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"]);\nconst LegendImage = function (props) {\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_37__.jsx)(\"img\", _objectSpread(_objectSpread({}, props), {}, {\n    // Show the legend only if it loads successfully, so we start out hidden\n    style: {\n      display: \"none\",\n      marginTop: \"10px\"\n    },\n    onLoad: e => e.currentTarget.style.display = \"block\",\n    onError: e => e.currentTarget.style.display = \"none\"\n  }));\n};\nasync function createSplitItem(sourceItem, splitDirection) {\n  const terria = sourceItem.terria;\n  const ref = new _Models_Catalog_CatalogReferences_SplitItemReference__WEBPACK_IMPORTED_MODULE_19__[\"default\"]((0,terriajs_cesium_Source_Core_createGuid__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(), terria);\n  ref.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"splitSourceItemId\", sourceItem.uniqueId);\n  terria.addModel(ref);\n  await ref.loadReference();\n  return (0,mobx__WEBPACK_IMPORTED_MODULE_3__.runInAction)(() => {\n    var _newItem$styleSelecta;\n    if (ref.target === undefined) {\n      throw Error(\"failed to split item\");\n    }\n    const newItem = ref.target;\n    newItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"show\", true);\n    newItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"splitDirection\", splitDirection);\n    newItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"currentTime\", null);\n    newItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"initialTimeSource\", \"none\");\n    if (hasOpacity(newItem)) {\n      // We want to show the item on the map only after date selection. At the\n      // same time we cannot set `show` to false because if we\n      // do so, date picking which relies on feature picking, will not work. So\n      // we simply set the opacity of the item to 0.\n      newItem.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"opacity\", 0);\n    }\n\n    // Override feature info template as the parent featureInfoTemplate might\n    // not be relevant for the difference item. This has to be done in the user\n    // stratum to override template set in definition stratum.\n    (0,_Models_Definition_updateModelFromJson__WEBPACK_IMPORTED_MODULE_22__[\"default\"])(newItem, _Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, {\n      featureInfoTemplate: {\n        template: \"\"\n      }\n    });\n    setDefaultDiffStyle(newItem);\n\n    // Set the default style to true color style if it exists\n    const trueColor = (_newItem$styleSelecta = newItem.styleSelectableDimensions) === null || _newItem$styleSelecta === void 0 || (_newItem$styleSelecta = _newItem$styleSelecta[0]) === null || _newItem$styleSelecta === void 0 || (_newItem$styleSelecta = _newItem$styleSelecta.options) === null || _newItem$styleSelecta === void 0 ? void 0 : _newItem$styleSelecta.find(style => (0,_Core_isDefined__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(style.name) && style.name.search(/true/i) >= 0);\n    if (trueColor !== null && trueColor !== void 0 && trueColor.id) {\n      var _newItem$styleSelecta2;\n      (_newItem$styleSelecta2 = newItem.styleSelectableDimensions) === null || _newItem$styleSelecta2 === void 0 || (_newItem$styleSelecta2 = _newItem$styleSelecta2[0]) === null || _newItem$styleSelecta2 === void 0 || _newItem$styleSelecta2.setDimensionValue(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, trueColor.id);\n    }\n    terria.overlays.add(newItem);\n    return newItem;\n  });\n}\n\n/**\n * If the item has only one available diff style, auto-select it\n */\nfunction setDefaultDiffStyle(item) {\n  if (item.diffStyleId !== undefined) {\n    return;\n  }\n  const availableStyles = (0,_Core_filterOutUndefined__WEBPACK_IMPORTED_MODULE_14__[\"default\"])(item.availableDiffStyles.map(diffStyleId => {\n    var _item$styleSelectable;\n    return (_item$styleSelectable = item.styleSelectableDimensions) === null || _item$styleSelectable === void 0 || (_item$styleSelectable = _item$styleSelectable[0]) === null || _item$styleSelectable === void 0 || (_item$styleSelectable = _item$styleSelectable.options) === null || _item$styleSelectable === void 0 ? void 0 : _item$styleSelectable.find(style => style.id === diffStyleId);\n  }));\n  if (availableStyles.length === 1) {\n    item.setTrait(_Models_Definition_CommonStrata__WEBPACK_IMPORTED_MODULE_20__[\"default\"].user, \"diffStyleId\", availableStyles[0].id);\n  }\n}\nfunction removeSplitItem(item) {\n  const terria = item.terria;\n  terria.overlays.remove(item);\n  if (item.sourceReference && terria.workbench.contains(item) === false) {\n    terria.removeModelReferences(item.sourceReference);\n  }\n}\nfunction doesFeatureBelongToItem(feature, item) {\n  var _feature$imageryLayer;\n  if (!_ModelMixins_MappableMixin__WEBPACK_IMPORTED_MODULE_18__[\"default\"].isMixedInto(item)) return false;\n  const imageryProvider = (_feature$imageryLayer = feature.imageryLayer) === null || _feature$imageryLayer === void 0 ? void 0 : _feature$imageryLayer.imageryProvider;\n  if (imageryProvider === undefined) return false;\n  return item.mapItems.find(m => _ModelMixins_MappableMixin__WEBPACK_IMPORTED_MODULE_18__.ImageryParts.is(m) && m.imageryProvider === imageryProvider) !== undefined;\n}\nfunction setTimeFilterFromLocation(item, location, im) {\n  const carto = new terriajs_cesium_Source_Core_Cartographic__WEBPACK_IMPORTED_MODULE_9__[\"default\"](terriajs_cesium_Source_Core_Math__WEBPACK_IMPORTED_MODULE_11__[\"default\"].toRadians(location.longitude), terriajs_cesium_Source_Core_Math__WEBPACK_IMPORTED_MODULE_11__[\"default\"].toRadians(location.latitude));\n  // We just need to set this to a high enough level supported by the service\n  const level = 30;\n  const tile = im.tilingScheme.positionToTileXY(carto, level);\n  return item.setTimeFilterFromLocation({\n    position: {\n      latitude: location.latitude,\n      longitude: location.longitude,\n      height: location.height\n    },\n    tileCoords: {\n      x: tile.x,\n      y: tile.y,\n      level\n    }\n  });\n}\nfunction hasOpacity(model) {\n  return (0,_Models_Definition_hasTraits__WEBPACK_IMPORTED_MODULE_21__[\"default\"])(model, _Traits_TraitsClasses_ImageryProviderTraits__WEBPACK_IMPORTED_MODULE_30__[\"default\"], \"opacity\");\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DiffTool);\nvar _StyledDiv = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(\"div\").withConfig({\n  displayName: \"DiffTool___StyledDiv\",\n  componentId: \"sc-3vyhxu-5\"\n})([\"display:flex;flex-direction:column;height:100%;padding:15px;gap:20px;\"]);\nvar _StyledDiv2 = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(\"div\").withConfig({\n  displayName: \"DiffTool___StyledDiv2\",\n  componentId: \"sc-3vyhxu-6\"\n})([\"display:flex;flex-direction:row;padding:5px;\"]);\nvar _StyledDiv3 = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(\"div\").withConfig({\n  displayName: \"DiffTool___StyledDiv3\",\n  componentId: \"sc-3vyhxu-7\"\n})([\"margin-right:10px;\"]);\nvar _StyledStyledIcon = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Icon__WEBPACK_IMPORTED_MODULE_26__.StyledIcon).withConfig({\n  displayName: \"DiffTool___StyledStyledIcon\",\n  componentId: \"sc-3vyhxu-8\"\n})([\"transform:rotate(90deg);\"]);\nvar _StyledButton = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Button__WEBPACK_IMPORTED_MODULE_25__[\"default\"]).withConfig({\n  displayName: \"DiffTool___StyledButton\",\n  componentId: \"sc-3vyhxu-9\"\n})([\"flex-grow:1;margin-left:10px;\"]);\nvar _StyledText = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"]).withConfig({\n  displayName: \"DiffTool___StyledText\",\n  componentId: \"sc-3vyhxu-10\"\n})([\"\", \"\"], p => p.$_css3);\nvar _StyledBox = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Box__WEBPACK_IMPORTED_MODULE_24__[\"default\"]).withConfig({\n  displayName: \"DiffTool___StyledBox\",\n  componentId: \"sc-3vyhxu-11\"\n})([\"@media (max-width:\", \"px){width:100%;}\"], props => props.theme.md);\nvar _StyledText2 = (0,styled_components__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_Styled_Text__WEBPACK_IMPORTED_MODULE_29__[\"default\"]).withConfig({\n  displayName: \"DiffTool___StyledText2\",\n  componentId: \"sc-3vyhxu-12\"\n})([\"fill:\", \";\"], _ref3 => {\n  let {\n    theme\n  } = _ref3;\n  return theme.textLight;\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy90ZXJyaWFqcy9saWIvUmVhY3RWaWV3cy9Ub29scy9EaWZmVG9vbC9EaWZmVG9vbC50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBUUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFHQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUdBO0FBRUE7QUFDQTtBQVVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFHQTtBQUNBO0FBSUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUlBO0FBSUE7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUVBO0FBQ0E7QUFJQTtBQUVBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFVQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUtBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFLQTtBQUtBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFNQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUFBO0FBQ0E7QUFHQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFFQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFPQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBRUE7QUFJQTtBQUFBO0FBQUE7QUFNQTtBQUNBO0FBQUE7QUFKQTtBQUNBO0FBS0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQ0E7QUFBQTtBQU1BO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBSUE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQU9BO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUdBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFhQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7O0FBRUE7QUFDQTtBQUdBO0FBQUE7QUFDQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFHQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUVBO0FBS0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUF2TUE7QUFBQTtBQUFBO0FBQUE7QUFzQkE7QUFBQTtBQUFBO0FBQUE7QUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3RlcnJpYWpzLW1hcC8uL3BhY2thZ2VzL3RlcnJpYWpzL2xpYi9SZWFjdFZpZXdzL1Rvb2xzL0RpZmZUb29sL0RpZmZUb29sLnRzeD9jNDhiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBkYXRlRm9ybWF0IGZyb20gXCJkYXRlZm9ybWF0XCI7XG5pbXBvcnQgeyBydW5JbkFjdGlvbiB9IGZyb20gXCJtb2J4XCI7XG5pbXBvcnQgeyBvYnNlcnZlciB9IGZyb20gXCJtb2J4LXJlYWN0XCI7XG5pbXBvcnQge1xuICBDaGFuZ2VFdmVudCxcbiAgdXNlQ2FsbGJhY2ssXG4gIHVzZUVmZmVjdCxcbiAgdXNlTWVtbyxcbiAgdXNlUmVmLFxuICB1c2VTdGF0ZVxufSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgeyB1c2VUcmFuc2xhdGlvbiB9IGZyb20gXCJyZWFjdC1pMThuZXh0XCI7XG5pbXBvcnQgc3R5bGVkLCB7IHVzZVRoZW1lIH0gZnJvbSBcInN0eWxlZC1jb21wb25lbnRzXCI7XG5pbXBvcnQgQ2FydG9ncmFwaGljIGZyb20gXCJ0ZXJyaWFqcy1jZXNpdW0vU291cmNlL0NvcmUvQ2FydG9ncmFwaGljXCI7XG5pbXBvcnQgSnVsaWFuRGF0ZSBmcm9tIFwidGVycmlhanMtY2VzaXVtL1NvdXJjZS9Db3JlL0p1bGlhbkRhdGVcIjtcbmltcG9ydCBDZXNpdW1NYXRoIGZyb20gXCJ0ZXJyaWFqcy1jZXNpdW0vU291cmNlL0NvcmUvTWF0aFwiO1xuaW1wb3J0IGNyZWF0ZUd1aWQgZnJvbSBcInRlcnJpYWpzLWNlc2l1bS9Tb3VyY2UvQ29yZS9jcmVhdGVHdWlkXCI7XG5pbXBvcnQgSW1hZ2VyeVByb3ZpZGVyIGZyb20gXCJ0ZXJyaWFqcy1jZXNpdW0vU291cmNlL1NjZW5lL0ltYWdlcnlQcm92aWRlclwiO1xuaW1wb3J0IFNwbGl0RGlyZWN0aW9uIGZyb20gXCJ0ZXJyaWFqcy1jZXNpdW0vU291cmNlL1NjZW5lL1NwbGl0RGlyZWN0aW9uXCI7XG5pbXBvcnQgTGF0TG9uSGVpZ2h0IGZyb20gXCIuLi8uLi8uLi9Db3JlL0xhdExvbkhlaWdodFwiO1xuaW1wb3J0IGZpbHRlck91dFVuZGVmaW5lZCBmcm9tIFwiLi4vLi4vLi4vQ29yZS9maWx0ZXJPdXRVbmRlZmluZWRcIjtcbmltcG9ydCBpc0RlZmluZWQgZnJvbSBcIi4uLy4uLy4uL0NvcmUvaXNEZWZpbmVkXCI7XG5pbXBvcnQgUGlja2VkRmVhdHVyZXMgZnJvbSBcIi4uLy4uLy4uL01hcC9QaWNrZWRGZWF0dXJlcy9QaWNrZWRGZWF0dXJlc1wiO1xuaW1wb3J0IHByZXR0aWZ5Q29vcmRpbmF0ZXMgZnJvbSBcIi4uLy4uLy4uL01hcC9WZWN0b3IvcHJldHRpZnlDb29yZGluYXRlc1wiO1xuaW1wb3J0IERpZmZhYmxlTWl4aW4gZnJvbSBcIi4uLy4uLy4uL01vZGVsTWl4aW5zL0RpZmZhYmxlTWl4aW5cIjtcbmltcG9ydCBNYXBwYWJsZU1peGluLCB7XG4gIEltYWdlcnlQYXJ0c1xufSBmcm9tIFwiLi4vLi4vLi4vTW9kZWxNaXhpbnMvTWFwcGFibGVNaXhpblwiO1xuaW1wb3J0IFNwbGl0SXRlbVJlZmVyZW5jZSBmcm9tIFwiLi4vLi4vLi4vTW9kZWxzL0NhdGFsb2cvQ2F0YWxvZ1JlZmVyZW5jZXMvU3BsaXRJdGVtUmVmZXJlbmNlXCI7XG5pbXBvcnQgQ29tbW9uU3RyYXRhIGZyb20gXCIuLi8uLi8uLi9Nb2RlbHMvRGVmaW5pdGlvbi9Db21tb25TdHJhdGFcIjtcbmltcG9ydCBoYXNUcmFpdHMsIHsgSGFzVHJhaXQgfSBmcm9tIFwiLi4vLi4vLi4vTW9kZWxzL0RlZmluaXRpb24vaGFzVHJhaXRzXCI7XG5pbXBvcnQgdXBkYXRlTW9kZWxGcm9tSnNvbiBmcm9tIFwiLi4vLi4vLi4vTW9kZWxzL0RlZmluaXRpb24vdXBkYXRlTW9kZWxGcm9tSnNvblwiO1xuaW1wb3J0IFRlcnJpYUZlYXR1cmUgZnJvbSBcIi4uLy4uLy4uL01vZGVscy9GZWF0dXJlL0ZlYXR1cmVcIjtcbmltcG9ydCB7XG4gIGdldE1hcmtlckxvY2F0aW9uLFxuICByZW1vdmVNYXJrZXJcbn0gZnJvbSBcIi4uLy4uLy4uL01vZGVscy9Mb2NhdGlvbk1hcmtlclV0aWxzXCI7XG5pbXBvcnQgVGVycmlhIGZyb20gXCIuLi8uLi8uLi9Nb2RlbHMvVGVycmlhXCI7XG5pbXBvcnQgVmlld1N0YXRlIGZyb20gXCIuLi8uLi8uLi9SZWFjdFZpZXdNb2RlbHMvVmlld1N0YXRlXCI7XG5pbXBvcnQgQm94LCB7IEJveFNwYW4gfSBmcm9tIFwiLi4vLi4vLi4vU3R5bGVkL0JveFwiO1xuaW1wb3J0IEJ1dHRvbiwgeyBSYXdCdXR0b24gfSBmcm9tIFwiLi4vLi4vLi4vU3R5bGVkL0J1dHRvblwiO1xuaW1wb3J0IHsgR0xZUEhTLCBTdHlsZWRJY29uIH0gZnJvbSBcIi4uLy4uLy4uL1N0eWxlZC9JY29uXCI7XG5pbXBvcnQgU2VsZWN0IGZyb20gXCIuLi8uLi8uLi9TdHlsZWQvU2VsZWN0XCI7XG5pbXBvcnQgU3BhY2luZyBmcm9tIFwiLi4vLi4vLi4vU3R5bGVkL1NwYWNpbmdcIjtcbmltcG9ydCBUZXh0LCB7IFRleHRTcGFuIH0gZnJvbSBcIi4uLy4uLy4uL1N0eWxlZC9UZXh0XCI7XG5pbXBvcnQgSW1hZ2VyeVByb3ZpZGVyVHJhaXRzIGZyb20gXCIuLi8uLi8uLi9UcmFpdHMvVHJhaXRzQ2xhc3Nlcy9JbWFnZXJ5UHJvdmlkZXJUcmFpdHNcIjtcbmltcG9ydCB7IHVzZVZpZXdTdGF0ZSB9IGZyb20gXCIuLi8uLi9Db250ZXh0XCI7XG5pbXBvcnQgeyBwYXJzZUN1c3RvbU1hcmtkb3duVG9SZWFjdFdpdGhPcHRpb25zIH0gZnJvbSBcIi4uLy4uL0N1c3RvbS9wYXJzZUN1c3RvbU1hcmtkb3duVG9SZWFjdFwiO1xuaW1wb3J0IExvYWRlciBmcm9tIFwiLi4vLi4vTG9hZGVyXCI7XG5pbXBvcnQgV29ya2Zsb3dQYW5lbCBmcm9tIFwiLi4vLi4vV29ya2Zsb3cvV29ya2Zsb3dQYW5lbFwiO1xuaW1wb3J0IERhdGVQaWNrZXIsIHsgSURhdGVQaWNrZXJIYW5kbGUgfSBmcm9tIFwiLi9EYXRlUGlja2VyXCI7XG5pbXBvcnQgTG9jYXRpb25QaWNrZXIgZnJvbSBcIi4vTG9jYXRpb25QaWNrZXJcIjtcblxudHlwZSBEaWZmYWJsZUl0ZW0gPSBEaWZmYWJsZU1peGluLkluc3RhbmNlO1xuXG5pbnRlcmZhY2UgUHJvcHNUeXBlIHtcbiAgdmlld1N0YXRlOiBWaWV3U3RhdGU7XG4gIHNvdXJjZUl0ZW06IERpZmZhYmxlSXRlbTtcbn1cblxuY29uc3QgRGlmZlRvb2w6IFJlYWN0LkZDPFByb3BzVHlwZT4gPSBvYnNlcnZlcigocHJvcHM6IFByb3BzVHlwZSkgPT4ge1xuICBjb25zdCBbbGVmdEl0ZW0sIHNldExlZnRJdGVtXSA9IHVzZVN0YXRlPERpZmZhYmxlSXRlbT4oKTtcbiAgY29uc3QgW3JpZ2h0SXRlbSwgc2V0UmlnaHRJdGVtXSA9IHVzZVN0YXRlPERpZmZhYmxlSXRlbT4oKTtcbiAgY29uc3QgW3VzZXJTZWxlY3RlZFNvdXJjZUl0ZW0sIHNldFVzZXJTZWxlY3RlZFNvdXJjZUl0ZW1dID1cbiAgICB1c2VTdGF0ZTxEaWZmYWJsZUl0ZW0+KCk7XG4gIGNvbnN0IHZpZXdTdGF0ZSA9IHVzZVZpZXdTdGF0ZSgpO1xuXG4gIGNvbnN0IGNoYW5nZVNvdXJjZUl0ZW0gPSAoc291cmNlSXRlbTogRGlmZmFibGVJdGVtKSA9PiB7XG4gICAgc2V0VXNlclNlbGVjdGVkU291cmNlSXRlbShzb3VyY2VJdGVtKTtcbiAgfTtcblxuICBjb25zdCBzb3VyY2VJdGVtID0gdXNlTWVtbyhcbiAgICAoKSA9PiB1c2VyU2VsZWN0ZWRTb3VyY2VJdGVtIHx8IHByb3BzLnNvdXJjZUl0ZW0sXG4gICAgW3Byb3BzLnNvdXJjZUl0ZW0sIHVzZXJTZWxlY3RlZFNvdXJjZUl0ZW1dXG4gICk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB0ZXJyaWEgPSB2aWV3U3RhdGUudGVycmlhO1xuICAgIGNvbnN0IG9yaWdpbmFsU2V0dGluZ3MgPSB7XG4gICAgICBzaG93U3BsaXR0ZXI6IHRlcnJpYS5zaG93U3BsaXR0ZXIsXG4gICAgICBpc01hcEZ1bGxTY3JlZW46IHZpZXdTdGF0ZS5pc01hcEZ1bGxTY3JlZW5cbiAgICB9O1xuICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgIHRlcnJpYS5zaG93U3BsaXR0ZXIgPSB0cnVlO1xuICAgICAgc291cmNlSXRlbS5zZXRUcmFpdChDb21tb25TdHJhdGEudXNlciwgXCJzaG93XCIsIGZhbHNlKTtcbiAgICAgIHRlcnJpYS5lbGVtZW50cy5zZXQoXCJ0aW1lbGluZVwiLCB7IHZpc2libGU6IGZhbHNlIH0pO1xuICAgIH0pO1xuXG4gICAgY29uc3QgaXRlbXNQcm9taXNlID0gUHJvbWlzZS5hbGwoW1xuICAgICAgY3JlYXRlU3BsaXRJdGVtKHNvdXJjZUl0ZW0sIFNwbGl0RGlyZWN0aW9uLkxFRlQpLFxuICAgICAgY3JlYXRlU3BsaXRJdGVtKHNvdXJjZUl0ZW0sIFNwbGl0RGlyZWN0aW9uLlJJR0hUKVxuICAgIF0pO1xuXG4gICAgaXRlbXNQcm9taXNlXG4gICAgICAudGhlbigoW2xJdGVtLCBySXRlbV0pID0+IHtcbiAgICAgICAgc2V0TGVmdEl0ZW0obEl0ZW0pO1xuICAgICAgICBzZXRSaWdodEl0ZW0ockl0ZW0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgICAgdGVycmlhLnNob3dTcGxpdHRlciA9IG9yaWdpbmFsU2V0dGluZ3Muc2hvd1NwbGl0dGVyO1xuICAgICAgICB2aWV3U3RhdGUuc2V0SXNNYXBGdWxsU2NyZWVuKG9yaWdpbmFsU2V0dGluZ3MuaXNNYXBGdWxsU2NyZWVuKTtcbiAgICAgICAgc291cmNlSXRlbS5zZXRUcmFpdChDb21tb25TdHJhdGEudXNlciwgXCJzaG93XCIsIHRydWUpO1xuICAgICAgICB0ZXJyaWEuZWxlbWVudHMuc2V0KFwidGltZWxpbmVcIiwgeyB2aXNpYmxlOiB0cnVlIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIGl0ZW1zUHJvbWlzZS50aGVuKChbbEl0ZW0sIHJJdGVtXSkgPT4ge1xuICAgICAgICBpZiAobEl0ZW0pIHJlbW92ZVNwbGl0SXRlbShsSXRlbSk7XG4gICAgICAgIGlmIChySXRlbSkgcmVtb3ZlU3BsaXRJdGVtKHJJdGVtKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0sIFtzb3VyY2VJdGVtLCB2aWV3U3RhdGVdKTtcblxuICBpZiAobGVmdEl0ZW0gJiYgcmlnaHRJdGVtKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxNYWluXG4gICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgdGVycmlhPXtwcm9wcy52aWV3U3RhdGUudGVycmlhfVxuICAgICAgICBzb3VyY2VJdGVtPXtzb3VyY2VJdGVtfVxuICAgICAgICBjaGFuZ2VTb3VyY2VJdGVtPXtjaGFuZ2VTb3VyY2VJdGVtfVxuICAgICAgICBsZWZ0SXRlbT17bGVmdEl0ZW19XG4gICAgICAgIHJpZ2h0SXRlbT17cmlnaHRJdGVtfVxuICAgICAgLz5cbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59KTtcbkRpZmZUb29sLmRpc3BsYXlOYW1lID0gXCJEaWZmVG9vbFwiO1xuaW50ZXJmYWNlIE1haW5Qcm9wc1R5cGUgZXh0ZW5kcyBQcm9wc1R5cGUge1xuICB0ZXJyaWE6IFRlcnJpYTtcbiAgbGVmdEl0ZW06IERpZmZhYmxlSXRlbTtcbiAgcmlnaHRJdGVtOiBEaWZmYWJsZUl0ZW07XG4gIGNoYW5nZVNvdXJjZUl0ZW06IChuZXdTb3VyY2VJdGVtOiBEaWZmYWJsZUl0ZW0pID0+IHZvaWQ7XG59XG5cbmNvbnN0IE1haW46IFJlYWN0LkZDPE1haW5Qcm9wc1R5cGU+ID0gb2JzZXJ2ZXIoKHByb3BzKSA9PiB7XG4gIGNvbnN0IHsgdGVycmlhLCB2aWV3U3RhdGUsIHNvdXJjZUl0ZW0sIGxlZnRJdGVtLCByaWdodEl0ZW0gfSA9IHByb3BzO1xuXG4gIGNvbnN0IHsgdCB9ID0gdXNlVHJhbnNsYXRpb24oKTtcbiAgY29uc3QgdGhlbWUgPSB1c2VUaGVtZSgpO1xuXG4gIGNvbnN0IFtsb2NhdGlvbiwgc2V0TG9jYXRpb25dID0gdXNlU3RhdGU8TGF0TG9uSGVpZ2h0IHwgdW5kZWZpbmVkPigpO1xuICBjb25zdCBbLCBzZXRMb2NhdGlvblBpY2tFcnJvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc1BpY2tpbmdOZXdMb2NhdGlvbiwgc2V0SXNQaWNraW5nTmV3TG9jYXRpb25dID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIGNvbnN0IGxlZnREYXRlUGlja2VySGFuZGxlID0gdXNlUmVmPElEYXRlUGlja2VySGFuZGxlPihudWxsKTtcbiAgY29uc3QgcmlnaHREYXRlUGlja2VySGFuZGxlID0gdXNlUmVmPElEYXRlUGlja2VySGFuZGxlPihudWxsKTtcblxuICBjb25zdCBkaWZmSXRlbSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBsZWZ0SXRlbTtcbiAgfSwgW2xlZnRJdGVtXSk7XG5cbiAgY29uc3QgY3VycmVudExlZnREYXRlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGxlZnRJdGVtLmN1cnJlbnREaXNjcmV0ZUp1bGlhbkRhdGU7XG4gIH0sIFtsZWZ0SXRlbS5jdXJyZW50RGlzY3JldGVKdWxpYW5EYXRlXSk7XG5cbiAgY29uc3QgY3VycmVudFJpZ2h0RGF0ZSA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiByaWdodEl0ZW0uY3VycmVudERpc2NyZXRlSnVsaWFuRGF0ZTtcbiAgfSwgW3JpZ2h0SXRlbS5jdXJyZW50RGlzY3JldGVKdWxpYW5EYXRlXSk7XG5cbiAgY29uc3QgZGlmZkl0ZW1OYW1lID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgbmFtZSA9IHNvdXJjZUl0ZW0ubmFtZSB8fCBcIlwiO1xuICAgIGNvbnN0IGZvcm1hdCA9IFwieXl5eS9tbS9kZFwiO1xuICAgIGlmICghY3VycmVudExlZnREYXRlIHx8ICFjdXJyZW50UmlnaHREYXRlKSB7XG4gICAgICByZXR1cm4gbmFtZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZDEgPSBkYXRlRm9ybWF0KEp1bGlhbkRhdGUudG9EYXRlKGN1cnJlbnRMZWZ0RGF0ZSksIGZvcm1hdCk7XG4gICAgICBjb25zdCBkMiA9IGRhdGVGb3JtYXQoSnVsaWFuRGF0ZS50b0RhdGUoY3VycmVudFJpZ2h0RGF0ZSksIGZvcm1hdCk7XG4gICAgICByZXR1cm4gYCR7bmFtZX0gLSBkaWZmZXJlbmNlIGZvciBkYXRlcyAke2QxfSwgJHtkMn1gO1xuICAgIH1cbiAgfSwgW2N1cnJlbnRMZWZ0RGF0ZSwgY3VycmVudFJpZ2h0RGF0ZSwgc291cmNlSXRlbS5uYW1lXSk7XG5cbiAgY29uc3QgZGlmZmFibGVJdGVtc0luV29ya2JlbmNoID0gdXNlTWVtbygoKTogRGlmZmFibGVJdGVtW10gPT4ge1xuICAgIHJldHVybiB0ZXJyaWEud29ya2JlbmNoLml0ZW1zLmZpbHRlcihcbiAgICAgIChpdGVtKSA9PiBEaWZmYWJsZU1peGluLmlzTWl4ZWRJbnRvKGl0ZW0pICYmIGl0ZW0uY2FuRGlmZkltYWdlc1xuICAgICkgYXMgRGlmZmFibGVJdGVtW107XG4gIH0sIFt0ZXJyaWEud29ya2JlbmNoLml0ZW1zXSk7XG5cbiAgY29uc3QgcHJldmlld1N0eWxlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGRpZmZJdGVtLnN0eWxlU2VsZWN0YWJsZURpbWVuc2lvbnM/LlswXT8uc2VsZWN0ZWRJZDtcbiAgfSwgW2RpZmZJdGVtLnN0eWxlU2VsZWN0YWJsZURpbWVuc2lvbnNdKTtcblxuICBjb25zdCBjdXJyZW50RGlmZlN0eWxlID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGRpZmZJdGVtLmRpZmZTdHlsZUlkO1xuICB9LCBbZGlmZkl0ZW0uZGlmZlN0eWxlSWRdKTtcblxuICBjb25zdCBhdmFpbGFibGVEaWZmU3R5bGVzID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIGZpbHRlck91dFVuZGVmaW5lZChcbiAgICAgIGRpZmZJdGVtLmF2YWlsYWJsZURpZmZTdHlsZXMubWFwKChkaWZmU3R5bGVJZCkgPT5cbiAgICAgICAgZGlmZkl0ZW0uc3R5bGVTZWxlY3RhYmxlRGltZW5zaW9ucz8uWzBdPy5vcHRpb25zPy5maW5kKFxuICAgICAgICAgIChzdHlsZSkgPT4gc3R5bGUuaWQgPT09IGRpZmZTdHlsZUlkXG4gICAgICAgIClcbiAgICAgIClcbiAgICApO1xuICB9LCBbZGlmZkl0ZW0uYXZhaWxhYmxlRGlmZlN0eWxlcywgZGlmZkl0ZW0uc3R5bGVTZWxlY3RhYmxlRGltZW5zaW9uc10pO1xuXG4gIGNvbnN0IGRpZmZMZWdlbmRVcmwgPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgY3VycmVudERpZmZTdHlsZSAmJlxuICAgICAgY3VycmVudExlZnREYXRlICYmXG4gICAgICBjdXJyZW50UmlnaHREYXRlICYmXG4gICAgICBkaWZmSXRlbS5nZXRMZWdlbmRVcmxGb3JTdHlsZShcbiAgICAgICAgY3VycmVudERpZmZTdHlsZSxcbiAgICAgICAgY3VycmVudExlZnREYXRlLFxuICAgICAgICBjdXJyZW50UmlnaHREYXRlXG4gICAgICApXG4gICAgKTtcbiAgfSwgW2N1cnJlbnREaWZmU3R5bGUsIGN1cnJlbnRMZWZ0RGF0ZSwgY3VycmVudFJpZ2h0RGF0ZSwgZGlmZkl0ZW1dKTtcblxuICBjb25zdCBwcmV2aWV3TGVnZW5kVXJsID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHByZXZpZXdTdHlsZSAmJiBkaWZmSXRlbS5nZXRMZWdlbmRVcmxGb3JTdHlsZShwcmV2aWV3U3R5bGUpO1xuICB9LCBbcHJldmlld1N0eWxlLCBkaWZmSXRlbV0pO1xuXG4gIGNvbnN0IHNob3dJdGVtID0gdXNlQ2FsbGJhY2soKG1vZGVsOiBEaWZmYWJsZUl0ZW0pID0+IHtcbiAgICBydW5JbkFjdGlvbigoKSA9PiB7XG4gICAgICBpZiAoaGFzT3BhY2l0eShtb2RlbCkpIHtcbiAgICAgICAgbW9kZWwuc2V0VHJhaXQoQ29tbW9uU3RyYXRhLnVzZXIsIFwib3BhY2l0eVwiLCAwLjgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaGlkZUl0ZW0gPSB1c2VDYWxsYmFjaygobW9kZWw6IERpZmZhYmxlSXRlbSkgPT4ge1xuICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgIGlmIChoYXNPcGFjaXR5KG1vZGVsKSkge1xuICAgICAgICBtb2RlbC5zZXRUcmFpdChDb21tb25TdHJhdGEudXNlciwgXCJvcGFjaXR5XCIsIDApO1xuICAgICAgfVxuICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlQ2hhbmdlU291cmNlSXRlbSA9IHVzZUNhbGxiYWNrKFxuICAgIChlOiBDaGFuZ2VFdmVudDxIVE1MU2VsZWN0RWxlbWVudD4pID0+IHtcbiAgICAgIGNvbnN0IG5ld1NvdXJjZUl0ZW0gPSBkaWZmYWJsZUl0ZW1zSW5Xb3JrYmVuY2guZmluZChcbiAgICAgICAgKGl0ZW0pID0+IGl0ZW0udW5pcXVlSWQgPT09IGUudGFyZ2V0LnZhbHVlXG4gICAgICApO1xuICAgICAgaWYgKG5ld1NvdXJjZUl0ZW0pIHByb3BzLmNoYW5nZVNvdXJjZUl0ZW0obmV3U291cmNlSXRlbSk7XG4gICAgfSxcbiAgICBbZGlmZmFibGVJdGVtc0luV29ya2JlbmNoLCBwcm9wc11cbiAgKTtcblxuICBjb25zdCBoYW5kbGVDaGFuZ2VQcmV2aWV3U3R5bGUgPSB1c2VDYWxsYmFjayhcbiAgICAoZTogQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB7XG4gICAgICBjb25zdCBzdHlsZUlkID0gZS50YXJnZXQudmFsdWU7XG4gICAgICBydW5JbkFjdGlvbigoKSA9PiB7XG4gICAgICAgIGxlZnRJdGVtLnN0eWxlU2VsZWN0YWJsZURpbWVuc2lvbnM/LlswXT8uc2V0RGltZW5zaW9uVmFsdWUoXG4gICAgICAgICAgQ29tbW9uU3RyYXRhLnVzZXIsXG4gICAgICAgICAgc3R5bGVJZFxuICAgICAgICApO1xuICAgICAgICByaWdodEl0ZW0uc3R5bGVTZWxlY3RhYmxlRGltZW5zaW9ucz8uWzBdPy5zZXREaW1lbnNpb25WYWx1ZShcbiAgICAgICAgICBDb21tb25TdHJhdGEudXNlcixcbiAgICAgICAgICBzdHlsZUlkXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIFtsZWZ0SXRlbS5zdHlsZVNlbGVjdGFibGVEaW1lbnNpb25zLCByaWdodEl0ZW0uc3R5bGVTZWxlY3RhYmxlRGltZW5zaW9uc11cbiAgKTtcblxuICBjb25zdCBoYW5kbGVDaGFuZ2VEaWZmU3R5bGUgPSB1c2VDYWxsYmFjayhcbiAgICAoZTogQ2hhbmdlRXZlbnQ8SFRNTFNlbGVjdEVsZW1lbnQ+KSA9PiB7XG4gICAgICBydW5JbkFjdGlvbigoKSA9PiB7XG4gICAgICAgIGRpZmZJdGVtLnNldFRyYWl0KENvbW1vblN0cmF0YS51c2VyLCBcImRpZmZTdHlsZUlkXCIsIGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW2RpZmZJdGVtXVxuICApO1xuXG4gIGNvbnN0IG9uVXNlclBpY2tpbmdMb2NhdGlvbiA9IHVzZUNhbGxiYWNrKFxuICAgIChfcGlja2luZ0xvY2F0aW9uOiBMYXRMb25IZWlnaHQpID0+IHtcbiAgICAgIHNldElzUGlja2luZ05ld0xvY2F0aW9uKHRydWUpO1xuICAgIH0sXG4gICAgW11cbiAgKTtcblxuICBjb25zdCBvblVzZXJQaWNrTG9jYXRpb24gPSB1c2VDYWxsYmFjayhcbiAgICAocGlja2VkRmVhdHVyZXM6IFBpY2tlZEZlYXR1cmVzLCBwaWNrZWRMb2NhdGlvblZhbHVlOiBMYXRMb25IZWlnaHQpID0+IHtcbiAgICAgIGNvbnN0IGZlYXR1cmUgPSBwaWNrZWRGZWF0dXJlcy5mZWF0dXJlcy5maW5kKFxuICAgICAgICAoZikgPT5cbiAgICAgICAgICBkb2VzRmVhdHVyZUJlbG9uZ1RvSXRlbShmLCBsZWZ0SXRlbSkgfHxcbiAgICAgICAgICBkb2VzRmVhdHVyZUJlbG9uZ1RvSXRlbShmLCByaWdodEl0ZW0pXG4gICAgICApO1xuXG4gICAgICBydW5JbkFjdGlvbigoKSA9PiB7XG4gICAgICAgIGlmIChmZWF0dXJlKSB7XG4gICAgICAgICAgbGVmdEl0ZW0uc2V0VGltZUZpbHRlckZlYXR1cmUoZmVhdHVyZSwgcGlja2VkRmVhdHVyZXMucHJvdmlkZXJDb29yZHMpO1xuICAgICAgICAgIHJpZ2h0SXRlbS5zZXRUaW1lRmlsdGVyRmVhdHVyZShcbiAgICAgICAgICAgIGZlYXR1cmUsXG4gICAgICAgICAgICBwaWNrZWRGZWF0dXJlcy5wcm92aWRlckNvb3Jkc1xuICAgICAgICAgICk7XG4gICAgICAgICAgc2V0TG9jYXRpb24ocGlja2VkTG9jYXRpb25WYWx1ZSk7XG4gICAgICAgICAgc2V0TG9jYXRpb25QaWNrRXJyb3IoZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNldExvY2F0aW9uUGlja0Vycm9yKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHNldElzUGlja2luZ05ld0xvY2F0aW9uKGZhbHNlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgW2xlZnRJdGVtLCByaWdodEl0ZW1dXG4gICk7XG5cbiAgY29uc3QgdW5zZXREYXRlcyA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBydW5JbkFjdGlvbigoKSA9PiB7XG4gICAgICBsZWZ0SXRlbS5zZXRUcmFpdChDb21tb25TdHJhdGEudXNlciwgXCJjdXJyZW50VGltZVwiLCBudWxsKTtcbiAgICAgIHJpZ2h0SXRlbS5zZXRUcmFpdChDb21tb25TdHJhdGEudXNlciwgXCJjdXJyZW50VGltZVwiLCBudWxsKTtcbiAgICB9KTtcbiAgICBoaWRlSXRlbShsZWZ0SXRlbSk7XG4gICAgaGlkZUl0ZW0ocmlnaHRJdGVtKTtcbiAgfSwgW2xlZnRJdGVtLCByaWdodEl0ZW0sIGhpZGVJdGVtXSk7XG5cbiAgY29uc3QgZ2VuZXJhdGVEaWZmID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChcbiAgICAgIGN1cnJlbnRMZWZ0RGF0ZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICBjdXJyZW50UmlnaHREYXRlID09PSB1bmRlZmluZWQgfHxcbiAgICAgIGN1cnJlbnREaWZmU3R5bGUgPT09IHVuZGVmaW5lZFxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBydW5JbkFjdGlvbigoKSA9PiB7XG4gICAgICB0ZXJyaWEub3ZlcmxheXMucmVtb3ZlKGxlZnRJdGVtKTtcbiAgICAgIHRlcnJpYS5vdmVybGF5cy5yZW1vdmUocmlnaHRJdGVtKTtcbiAgICAgIHRlcnJpYS53b3JrYmVuY2guYWRkKGRpZmZJdGVtKTtcbiAgICAgIGRpZmZJdGVtLnNldFRyYWl0KENvbW1vblN0cmF0YS51c2VyLCBcIm5hbWVcIiwgZGlmZkl0ZW1OYW1lKTtcbiAgICAgIGRpZmZJdGVtLnNob3dEaWZmSW1hZ2UoXG4gICAgICAgIGN1cnJlbnRMZWZ0RGF0ZSxcbiAgICAgICAgY3VycmVudFJpZ2h0RGF0ZSxcbiAgICAgICAgY3VycmVudERpZmZTdHlsZVxuICAgICAgKTtcblxuICAgICAgY29uc3QgZGlmZkl0ZW1Qcm9wZXJ0aWVzID0gZGlmZkl0ZW0uZGlmZkl0ZW1Qcm9wZXJ0aWVzO1xuICAgICAgaWYgKGRpZmZJdGVtUHJvcGVydGllcykge1xuICAgICAgICB1cGRhdGVNb2RlbEZyb21Kc29uKGRpZmZJdGVtLCBDb21tb25TdHJhdGEudXNlciwgZGlmZkl0ZW1Qcm9wZXJ0aWVzKTtcbiAgICAgIH1cbiAgICAgIHRlcnJpYS5zaG93U3BsaXR0ZXIgPSBmYWxzZTtcbiAgICB9KTtcbiAgfSwgW1xuICAgIGN1cnJlbnREaWZmU3R5bGUsXG4gICAgY3VycmVudExlZnREYXRlLFxuICAgIGN1cnJlbnRSaWdodERhdGUsXG4gICAgZGlmZkl0ZW0sXG4gICAgZGlmZkl0ZW1OYW1lLFxuICAgIGxlZnRJdGVtLFxuICAgIHJpZ2h0SXRlbSxcbiAgICB0ZXJyaWFcbiAgXSk7XG5cbiAgY29uc3QgcmVzZXRUb29sID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICAgIGRpZmZJdGVtLmNsZWFyRGlmZkltYWdlKCk7XG4gICAgICBzZXREZWZhdWx0RGlmZlN0eWxlKGRpZmZJdGVtKTtcbiAgICAgIHRlcnJpYS5vdmVybGF5cy5hZGQobGVmdEl0ZW0pO1xuICAgICAgdGVycmlhLm92ZXJsYXlzLmFkZChyaWdodEl0ZW0pO1xuICAgICAgdGVycmlhLndvcmtiZW5jaC5yZW1vdmUoZGlmZkl0ZW0pO1xuICAgICAgdGVycmlhLnNob3dTcGxpdHRlciA9IHRydWU7XG4gICAgICBsZWZ0SXRlbS5zZXRUcmFpdChcbiAgICAgICAgQ29tbW9uU3RyYXRhLnVzZXIsXG4gICAgICAgIFwic3BsaXREaXJlY3Rpb25cIixcbiAgICAgICAgU3BsaXREaXJlY3Rpb24uTEVGVFxuICAgICAgKTtcbiAgICAgIHJpZ2h0SXRlbS5zZXRUcmFpdChcbiAgICAgICAgQ29tbW9uU3RyYXRhLnVzZXIsXG4gICAgICAgIFwic3BsaXREaXJlY3Rpb25cIixcbiAgICAgICAgU3BsaXREaXJlY3Rpb24uUklHSFRcbiAgICAgICk7XG4gICAgfSk7XG4gIH0sIFtkaWZmSXRlbSwgbGVmdEl0ZW0sIHJpZ2h0SXRlbSwgdGVycmlhXSk7XG5cbiAgY29uc3Qgc2V0TG9jYXRpb25Gcm9tQWN0aXZlU2VhcmNoID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IG1hcmtlckxvY2F0aW9uID0gZ2V0TWFya2VyTG9jYXRpb24odGVycmlhKTtcbiAgICBpZiAobWFya2VyTG9jYXRpb24gJiYgTWFwcGFibGVNaXhpbi5pc01peGVkSW50byhzb3VyY2VJdGVtKSkge1xuICAgICAgY29uc3QgcGFydCA9IHNvdXJjZUl0ZW0ubWFwSXRlbXMuZmluZCgocCkgPT4gSW1hZ2VyeVBhcnRzLmlzKHApKTtcbiAgICAgIGNvbnN0IGltYWdlcnlQcm92aWRlciA9XG4gICAgICAgIHBhcnQgJiYgSW1hZ2VyeVBhcnRzLmlzKHBhcnQpICYmIHBhcnQuaW1hZ2VyeVByb3ZpZGVyO1xuICAgICAgaWYgKGltYWdlcnlQcm92aWRlcikge1xuICAgICAgICBjb25zdCBwcm9taXNlcyA9IFtcbiAgICAgICAgICBzZXRUaW1lRmlsdGVyRnJvbUxvY2F0aW9uKGxlZnRJdGVtLCBtYXJrZXJMb2NhdGlvbiwgaW1hZ2VyeVByb3ZpZGVyKSxcbiAgICAgICAgICBzZXRUaW1lRmlsdGVyRnJvbUxvY2F0aW9uKHJpZ2h0SXRlbSwgbWFya2VyTG9jYXRpb24sIGltYWdlcnlQcm92aWRlcilcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3Qgc29tZVN1Y2Nlc3NmdWwgPSAoYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpKS5zb21lKChvaykgPT4gb2spO1xuICAgICAgICBpZiAoc29tZVN1Y2Nlc3NmdWwpIHtcbiAgICAgICAgICBydW5JbkFjdGlvbigoKSA9PiBzZXRMb2NhdGlvbihtYXJrZXJMb2NhdGlvbikpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElmIHdlIGNhbm5vdCByZXNvbHZlIGltYWdlcnkgYXQgdGhlIG1hcmtlciBsb2NhdGlvbiwgcmVtb3ZlIGl0XG4gICAgICAgICAgcnVuSW5BY3Rpb24oKCkgPT4gcmVtb3ZlTWFya2VyKHRlcnJpYSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCBbbGVmdEl0ZW0sIHJpZ2h0SXRlbSwgc291cmNlSXRlbSwgdGVycmlhXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCB7IGxhdGl0dWRlLCBsb25naXR1ZGUsIGhlaWdodCB9ID0gZGlmZkl0ZW0udGltZUZpbHRlckNvb3JkaW5hdGVzO1xuICAgIGlmIChsYXRpdHVkZSAhPT0gdW5kZWZpbmVkICYmIGxvbmdpdHVkZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBzZXRMb2NhdGlvbih7IGxhdGl0dWRlLCBsb25naXR1ZGUsIGhlaWdodCB9KTtcbiAgICAgIC8vIEFzc3VtaW5nIHJlbW92ZU1hcmtlciBpcyBhbiBhY3Rpb24gb3IgaGFuZGxlcyBpdHMgb3duIE1vYlggdHJhbnNhY3Rpb25zXG4gICAgICByZW1vdmVNYXJrZXIodGVycmlhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0TG9jYXRpb25Gcm9tQWN0aXZlU2VhcmNoKCk7XG4gICAgfVxuICB9LCBbZGlmZkl0ZW0udGltZUZpbHRlckNvb3JkaW5hdGVzLCBzZXRMb2NhdGlvbkZyb21BY3RpdmVTZWFyY2gsIHRlcnJpYV0pO1xuXG4gIGNvbnN0IGNsb3NlUGFuZWwgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgdmlld1N0YXRlLmNsb3NlVG9vbCgpO1xuICB9LCBbdmlld1N0YXRlXSk7XG5cbiAgY29uc3QgaXNTaG93aW5nRGlmZiA9IGRpZmZJdGVtLmlzU2hvd2luZ0RpZmY7XG4gIGNvbnN0IGRhdGVzU2VsZWN0ZWQgPSBjdXJyZW50TGVmdERhdGUgJiYgY3VycmVudFJpZ2h0RGF0ZTtcbiAgY29uc3QgaXNSZWFkeVRvR2VuZXJhdGVEaWZmID1cbiAgICBsb2NhdGlvbiAmJiBkYXRlc1NlbGVjdGVkICYmIGN1cnJlbnREaWZmU3R5bGUgIT09IHVuZGVmaW5lZDtcblxuICByZXR1cm4gKFxuICAgIDxXb3JrZmxvd1BhbmVsXG4gICAgICB2aWV3U3RhdGU9e3ZpZXdTdGF0ZX1cbiAgICAgIHRpdGxlPXt0KFwiZGlmZlRvb2wudGl0bGVcIil9XG4gICAgICBpY29uPXtHTFlQSFMuZGlmZmVyZW5jZX1cbiAgICAgIG9uQ2xvc2U9eygpID0+IHtcbiAgICAgICAgcmVzZXRUb29sKCk7XG4gICAgICAgIGNsb3NlUGFuZWwoKTtcbiAgICAgIH19XG4gICAgPlxuICAgICAgPGRpdlxuICAgICAgICBjc3M9e2BcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgICAgZ2FwOiAyMHB4O1xuICAgICAgICBgfVxuICAgICAgPlxuICAgICAgICB7aXNTaG93aW5nRGlmZiAmJiAoXG4gICAgICAgICAgPFRleHQgbWVkaXVtIHRleHRMaWdodD5cbiAgICAgICAgICAgIHt0KFwiZGlmZlRvb2wuZGlmZmVyZW5jZVJlc3VsdHNUaXRsZVwiKX1cbiAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICl9XG4gICAgICAgIDxUZXh0IHRleHRMaWdodD57dChcImRpZmZUb29sLmluc3RydWN0aW9ucy5wYW5lRGVzY3JpcHRpb25cIil9PC9UZXh0PlxuICAgICAgICA8R3JvdXA+XG4gICAgICAgICAgPExvY2F0aW9uQW5kRGF0ZXNEaXNwbGF5Qm94PlxuICAgICAgICAgICAgPEJveD5cbiAgICAgICAgICAgICAgPFRleHQgbWVkaXVtPnt0KFwiZGlmZlRvb2wubGFiZWxzLmFyZWFcIil9OjwvVGV4dD5cbiAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICA8VGV4dCBib2xkIHRleHRMaWdodD5cbiAgICAgICAgICAgICAgICAgIHtsb2NhdGlvblxuICAgICAgICAgICAgICAgICAgICA/IHQoXCJkaWZmVG9vbC5sb2NhdGlvbkRpc3BsYXkubG9jYXRpb25TZWxlY3RlZC50aXRsZVwiKVxuICAgICAgICAgICAgICAgICAgICA6IHQoXCJkaWZmVG9vbC5sb2NhdGlvbkRpc3BsYXkubm9Mb2NhdGlvblNlbGVjdGVkLnRpdGxlXCIpfVxuICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAgICA8VGV4dCBsaWdodCB0ZXh0TGlnaHQgc21hbGw+XG4gICAgICAgICAgICAgICAgICB7bG9jYXRpb25cbiAgICAgICAgICAgICAgICAgICAgPyB0KFwiZGlmZlRvb2wubG9jYXRpb25EaXNwbGF5LmxvY2F0aW9uU2VsZWN0ZWQuZGVzY3JpcHRpb25cIilcbiAgICAgICAgICAgICAgICAgICAgOiB0KFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkaWZmVG9vbC5sb2NhdGlvbkRpc3BsYXkubm9Mb2NhdGlvblNlbGVjdGVkLmRlc2NyaXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDxCb3g+XG4gICAgICAgICAgICAgIDxUZXh0IG1lZGl1bT57dChcImRpZmZUb29sLmxhYmVscy5kYXRlc1wiKX06PC9UZXh0PlxuICAgICAgICAgICAgICA8Qm94IGNvbHVtbiBhbGlnbkl0ZW1zRmxleFN0YXJ0PlxuICAgICAgICAgICAgICAgIHtjdXJyZW50TGVmdERhdGUgJiYgKFxuICAgICAgICAgICAgICAgICAgPFRleHQgbGFyZ2U+XG4gICAgICAgICAgICAgICAgICAgIChBKXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAge2RhdGVGb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgICAgSnVsaWFuRGF0ZS50b0RhdGUoY3VycmVudExlZnREYXRlKSxcbiAgICAgICAgICAgICAgICAgICAgICBcImRkL21tL3l5eXlcIlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgeyFjdXJyZW50TGVmdERhdGUgJiYgKFxuICAgICAgICAgICAgICAgICAgPFJhd0J1dHRvblxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBsZWZ0RGF0ZVBpY2tlckhhbmRsZS5jdXJyZW50Py5vcGVuKCl9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUZXh0U3BhbiBpc0xpbmsgc21hbGwgYm9sZD5cbiAgICAgICAgICAgICAgICAgICAgICB7dChcImRpZmZUb29sLmluc3RydWN0aW9ucy5zZXREYXRlQVwiKX1cbiAgICAgICAgICAgICAgICAgICAgPC9UZXh0U3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvUmF3QnV0dG9uPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAge2N1cnJlbnRSaWdodERhdGUgJiYgKFxuICAgICAgICAgICAgICAgICAgPFRleHQgbGFyZ2U+XG4gICAgICAgICAgICAgICAgICAgIChCKXtcIiBcIn1cbiAgICAgICAgICAgICAgICAgICAge2RhdGVGb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgICAgSnVsaWFuRGF0ZS50b0RhdGUoY3VycmVudFJpZ2h0RGF0ZSksXG4gICAgICAgICAgICAgICAgICAgICAgXCJkZC9tbS95eXl5XCJcbiAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgIHshY3VycmVudFJpZ2h0RGF0ZSAmJiAoXG4gICAgICAgICAgICAgICAgICA8UmF3QnV0dG9uXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHJpZ2h0RGF0ZVBpY2tlckhhbmRsZS5jdXJyZW50Py5vcGVuKCl9XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxUZXh0U3BhbiBpc0xpbmsgc21hbGwgYm9sZD5cbiAgICAgICAgICAgICAgICAgICAgICB7dChcImRpZmZUb29sLmluc3RydWN0aW9ucy5zZXREYXRlQlwiKX1cbiAgICAgICAgICAgICAgICAgICAgPC9UZXh0U3Bhbj5cbiAgICAgICAgICAgICAgICAgIDwvUmF3QnV0dG9uPlxuICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAge2lzU2hvd2luZ0RpZmYgPT09IGZhbHNlICYmXG4gICAgICAgICAgICAgICAgICBjdXJyZW50TGVmdERhdGUgJiZcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRSaWdodERhdGUgJiYgKFxuICAgICAgICAgICAgICAgICAgICA8UmF3QnV0dG9uIG9uQ2xpY2s9e3Vuc2V0RGF0ZXN9PlxuICAgICAgICAgICAgICAgICAgICAgIDxUZXh0U3BhbiBpc0xpbmsgc21hbGw+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dChcImRpZmZUb29sLmluc3RydWN0aW9ucy5jaGFuZ2VEYXRlc1wiKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L1RleHRTcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L1Jhd0J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIDwvQm94PlxuICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgPC9Mb2NhdGlvbkFuZERhdGVzRGlzcGxheUJveD5cbiAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgeyFpc1Nob3dpbmdEaWZmICYmIChcbiAgICAgICAgICA8R3JvdXA+XG4gICAgICAgICAgICA8U2VsZWN0b3JcbiAgICAgICAgICAgICAgdmlld1N0YXRlPXt2aWV3U3RhdGV9XG4gICAgICAgICAgICAgIHZhbHVlPXtzb3VyY2VJdGVtLnVuaXF1ZUlkfVxuICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlU291cmNlSXRlbX1cbiAgICAgICAgICAgICAgbGFiZWw9e3QoXCJkaWZmVG9vbC5sYWJlbHMuc291cmNlRGF0YXNldFwiKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPG9wdGlvbiBkaXNhYmxlZD5TZWxlY3Qgc291cmNlIGl0ZW08L29wdGlvbj5cbiAgICAgICAgICAgICAge2RpZmZhYmxlSXRlbXNJbldvcmtiZW5jaC5tYXAoKGl0ZW0pID0+IChcbiAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17aXRlbS51bmlxdWVJZH0gdmFsdWU9e2l0ZW0udW5pcXVlSWR9PlxuICAgICAgICAgICAgICAgICAge2l0ZW0ubmFtZX1cbiAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICA8L1NlbGVjdG9yPlxuICAgICAgICAgIDwvR3JvdXA+XG4gICAgICAgICl9XG4gICAgICAgIHshaXNTaG93aW5nRGlmZiAmJiAoXG4gICAgICAgICAgPEdyb3VwPlxuICAgICAgICAgICAgPFNlbGVjdG9yXG4gICAgICAgICAgICAgIHZpZXdTdGF0ZT17dmlld1N0YXRlfVxuICAgICAgICAgICAgICBzcGFjaW5nQm90dG9tXG4gICAgICAgICAgICAgIHZhbHVlPXtwcmV2aWV3U3R5bGV9XG4gICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2VQcmV2aWV3U3R5bGV9XG4gICAgICAgICAgICAgIGxhYmVsPXt0KFwiZGlmZlRvb2wubGFiZWxzLnByZXZpZXdTdHlsZVwiKX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPG9wdGlvbiBkaXNhYmxlZCB2YWx1ZT1cIlwiPlxuICAgICAgICAgICAgICAgIHt0KFwiZGlmZlRvb2wuY2hvb3NlUHJldmlld1wiKX1cbiAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICAgIHtkaWZmSXRlbS5zdHlsZVNlbGVjdGFibGVEaW1lbnNpb25zPy5bMF0/Lm9wdGlvbnM/Lm1hcChcbiAgICAgICAgICAgICAgICAoc3R5bGUpID0+IChcbiAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtzdHlsZS5pZH0gdmFsdWU9e3N0eWxlLmlkfT5cbiAgICAgICAgICAgICAgICAgICAge3N0eWxlLm5hbWV9XG4gICAgICAgICAgICAgICAgICA8L29wdGlvbj5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L1NlbGVjdG9yPlxuICAgICAgICAgICAge3ByZXZpZXdMZWdlbmRVcmwgJiYgKFxuICAgICAgICAgICAgICA8TGVnZW5kSW1hZ2Ugd2lkdGg9XCIxMDAlXCIgc3JjPXtwcmV2aWV3TGVnZW5kVXJsfSAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L0dyb3VwPlxuICAgICAgICApfVxuICAgICAgICA8R3JvdXA+XG4gICAgICAgICAgPFNlbGVjdG9yXG4gICAgICAgICAgICB2aWV3U3RhdGU9e3ZpZXdTdGF0ZX1cbiAgICAgICAgICAgIHZhbHVlPXtjdXJyZW50RGlmZlN0eWxlIHx8IFwiXCJ9XG4gICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlRGlmZlN0eWxlfVxuICAgICAgICAgICAgbGFiZWw9e3QoXCJkaWZmVG9vbC5sYWJlbHMuZGlmZmVyZW5jZU91dHB1dFwiKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8b3B0aW9uIGRpc2FibGVkIHZhbHVlPVwiXCI+XG4gICAgICAgICAgICAgIHt0KFwiZGlmZlRvb2wuY2hvb3NlRGlmZmVyZW5jZVwiKX1cbiAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAge2F2YWlsYWJsZURpZmZTdHlsZXMubWFwKChzdHlsZSkgPT4gKFxuICAgICAgICAgICAgICA8b3B0aW9uIGtleT17c3R5bGUuaWR9IHZhbHVlPXtzdHlsZS5pZH0+XG4gICAgICAgICAgICAgICAge3N0eWxlLm5hbWV9XG4gICAgICAgICAgICAgIDwvb3B0aW9uPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9TZWxlY3Rvcj5cbiAgICAgICAgICB7aXNTaG93aW5nRGlmZiAmJiBkaWZmTGVnZW5kVXJsICYmIChcbiAgICAgICAgICAgIDxMZWdlbmRJbWFnZSB3aWR0aD1cIjEwMCVcIiBzcmM9e2RpZmZMZWdlbmRVcmx9IC8+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9Hcm91cD5cbiAgICAgICAgeyFpc1Nob3dpbmdEaWZmICYmIChcbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPEdlbmVyYXRlQnV0dG9uXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e2dlbmVyYXRlRGlmZn1cbiAgICAgICAgICAgICAgZGlzYWJsZWQ9eyFpc1JlYWR5VG9HZW5lcmF0ZURpZmZ9XG4gICAgICAgICAgICAgIGFyaWEtZGVzY3JpYmVkYnk9XCJUSlNEaWZmZXJlbmNlRGlzYWJsZWRCdXR0b25Qcm9tcHRcIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8VGV4dFNwYW4gbGFyZ2U+XG4gICAgICAgICAgICAgICAge3QoXCJkaWZmVG9vbC5sYWJlbHMuZ2VuZXJhdGVEaWZmQnV0dG9uVGV4dFwiKX1cbiAgICAgICAgICAgICAgPC9UZXh0U3Bhbj5cbiAgICAgICAgICAgIDwvR2VuZXJhdGVCdXR0b24+XG4gICAgICAgICAgICB7IWlzUmVhZHlUb0dlbmVyYXRlRGlmZiAmJiAoXG4gICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICBjc3M9e2BcbiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgICAgICAgICAgICAgcGFkZGluZzogNXB4O1xuICAgICAgICAgICAgICAgIGB9XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICBjc3M9e2BcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgICAgICAgICAgICAgICAgYH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICA8U3R5bGVkSWNvblxuICAgICAgICAgICAgICAgICAgICBmaWxsQ29sb3I9XCIjY2NjXCJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVkV2lkdGg9XCIxNnB4XCJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVkSGVpZ2h0PVwiMTZweFwiXG4gICAgICAgICAgICAgICAgICAgIGdseXBoPXtHTFlQSFMuaW5mb31cbiAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPFRleHRcbiAgICAgICAgICAgICAgICAgIHNtYWxsXG4gICAgICAgICAgICAgICAgICBsaWdodFxuICAgICAgICAgICAgICAgICAgdGV4dExpZ2h0XG4gICAgICAgICAgICAgICAgICBpZD1cIlRKU0RpZmZlcmVuY2VEaXNhYmxlZEJ1dHRvblByb21wdFwiXG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAge3QoXCJkaWZmVG9vbC5sYWJlbHMuZGlzYWJsZWRCdXR0b25Qcm9tcHRcIil9XG4gICAgICAgICAgICAgICAgPC9UZXh0PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIHtpc1Nob3dpbmdEaWZmICYmIChcbiAgICAgICAgICA8Qm94IGNlbnRlcmVkIGxlZnQ+XG4gICAgICAgICAgICA8QmFja0J1dHRvblxuICAgICAgICAgICAgICBjc3M9e2BcbiAgICAgICAgICAgICAgICBjb2xvcjogJHt0aGVtZS50ZXh0TGlnaHR9O1xuICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogJHt0aGVtZS50ZXh0TGlnaHR9O1xuICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgICB0cmFuc3BhcmVudEJnXG4gICAgICAgICAgICAgIG9uQ2xpY2s9e3Jlc2V0VG9vbH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPEJveFNwYW4gY2VudGVyZWQ+XG4gICAgICAgICAgICAgICAgPFN0eWxlZEljb25cbiAgICAgICAgICAgICAgICAgIGNzcz1cInRyYW5zZm9ybTpyb3RhdGUoOTBkZWcpO1wiXG4gICAgICAgICAgICAgICAgICBsaWdodFxuICAgICAgICAgICAgICAgICAgc3R5bGVkV2lkdGg9XCIxNnB4XCJcbiAgICAgICAgICAgICAgICAgIGdseXBoPXtHTFlQSFMuYXJyb3dEb3dufVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgPFRleHRTcGFuIG1lZGl1bT57dChcImdlbmVyYWwuYmFja1wiKX08L1RleHRTcGFuPlxuICAgICAgICAgICAgICA8L0JveFNwYW4+XG4gICAgICAgICAgICA8L0JhY2tCdXR0b24+XG4gICAgICAgICAgICA8QnV0dG9uXG4gICAgICAgICAgICAgIHByaW1hcnlcbiAgICAgICAgICAgICAgb25DbGljaz17Y2xvc2VQYW5lbH1cbiAgICAgICAgICAgICAgY3NzPXtgXG4gICAgICAgICAgICAgICAgZmxleC1ncm93OiAxO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICAgICAgICAgICAgICBgfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8VGV4dFNwYW4gbWVkaXVtPnt0KFwiZGlmZlRvb2wubGFiZWxzLnNhdmVUb1dvcmtiZW5jaFwiKX08L1RleHRTcGFuPlxuICAgICAgICAgICAgPC9CdXR0b24+XG4gICAgICAgICAgPC9Cb3g+XG4gICAgICAgICl9XG4gICAgICAgIHshaXNTaG93aW5nRGlmZiAmJiAoXG4gICAgICAgICAgPExvY2F0aW9uUGlja2VyXG4gICAgICAgICAgICB0ZXJyaWE9e3RlcnJpYX1cbiAgICAgICAgICAgIGxvY2F0aW9uPXtsb2NhdGlvbn1cbiAgICAgICAgICAgIG9uUGlja2luZz17b25Vc2VyUGlja2luZ0xvY2F0aW9ufVxuICAgICAgICAgICAgb25QaWNrZWQ9e29uVXNlclBpY2tMb2NhdGlvbn1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgICB7IWlzU2hvd2luZ0RpZmYgJiZcbiAgICAgICAgICBSZWFjdERPTS5jcmVhdGVQb3J0YWwoXG4gICAgICAgICAgICA8Qm94IGNlbnRlcmVkIGZ1bGxXaWR0aCBmbGV4V3JhcCBiYWNrZ3JvdW5kQ29sb3I9e3RoZW1lLmRhcmt9PlxuICAgICAgICAgICAgICA8RGF0ZVBpY2tlclxuICAgICAgICAgICAgICAgIHJlZj17bGVmdERhdGVQaWNrZXJIYW5kbGV9XG4gICAgICAgICAgICAgICAgaGVhZGluZz17dChcImRpZmZUb29sLmxhYmVscy5kYXRlQ29tcGFyaXNvbkFcIil9XG4gICAgICAgICAgICAgICAgaXRlbT17bGVmdEl0ZW19XG4gICAgICAgICAgICAgICAgb25EYXRlU2V0PXsoKSA9PiBzaG93SXRlbShsZWZ0SXRlbSl9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxBcmVhRmlsdGVyU2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgbG9jYXRpb249e2xvY2F0aW9ufVxuICAgICAgICAgICAgICAgIGlzUGlja2luZ05ld0xvY2F0aW9uPXtpc1BpY2tpbmdOZXdMb2NhdGlvbn1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPERhdGVQaWNrZXJcbiAgICAgICAgICAgICAgICByZWY9e3JpZ2h0RGF0ZVBpY2tlckhhbmRsZX1cbiAgICAgICAgICAgICAgICBoZWFkaW5nPXt0KFwiZGlmZlRvb2wubGFiZWxzLmRhdGVDb21wYXJpc29uQlwiKX1cbiAgICAgICAgICAgICAgICBpdGVtPXtyaWdodEl0ZW19XG4gICAgICAgICAgICAgICAgb25EYXRlU2V0PXsoKSA9PiBzaG93SXRlbShyaWdodEl0ZW0pfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9Cb3g+LFxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJUSlMtQm90dG9tRG9ja0xhc3RQb3J0YWxcIikhXG4gICAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvV29ya2Zsb3dQYW5lbD5cbiAgKTtcbn0pO1xuTWFpbi5kaXNwbGF5TmFtZSA9IFwiTWFpblwiO1xuXG5jb25zdCBCYWNrQnV0dG9uID0gc3R5bGVkKEJ1dHRvbikuYXR0cnMoe1xuICBzZWNvbmRhcnk6IHRydWVcbn0pYGA7XG5cbmNvbnN0IEdlbmVyYXRlQnV0dG9uID0gc3R5bGVkKEJ1dHRvbikuYXR0cnMoe1xuICBwcmltYXJ5OiB0cnVlLFxuICBmdWxsV2lkdGg6IHRydWVcbn0pYGA7XG5cbmNvbnN0IFNlbGVjdG9yID0gKHByb3BzOiBhbnkpID0+IChcbiAgPEJveCBmdWxsV2lkdGggY29sdW1uPlxuICAgIDxsYWJlbD5cbiAgICAgIHsvKiA8VGV4dCB0ZXh0TGlnaHQ+e3Byb3BzLmxhYmVsfTo8L1RleHQ+ICovfVxuICAgICAgPFRleHQgdGV4dExpZ2h0IGNzcz17XCJwIHttYXJnaW46IDA7fVwifT5cbiAgICAgICAge3BhcnNlQ3VzdG9tTWFya2Rvd25Ub1JlYWN0V2l0aE9wdGlvbnMoYCR7cHJvcHMubGFiZWx9OmAsIHtcbiAgICAgICAgICBpbmplY3RUZXJtc0FzVG9vbHRpcHM6IHRydWUsXG4gICAgICAgICAgdG9vbHRpcFRlcm1zOiBwcm9wcy52aWV3U3RhdGUudGVycmlhLmNvbmZpZ1BhcmFtZXRlcnMuaGVscENvbnRlbnRUZXJtc1xuICAgICAgICB9KX1cbiAgICAgIDwvVGV4dD5cbiAgICAgIDxTcGFjaW5nIGJvdHRvbT17MX0gLz5cbiAgICAgIDxTZWxlY3Qgey4uLnByb3BzfT57cHJvcHMuY2hpbGRyZW59PC9TZWxlY3Q+XG4gICAgICB7cHJvcHMuc3BhY2luZ0JvdHRvbSAmJiA8U3BhY2luZyBib3R0b209ezJ9IC8+fVxuICAgIDwvbGFiZWw+XG4gIDwvQm94PlxuKTtcblxuY29uc3QgQXJlYUZpbHRlclNlbGVjdGlvbiA9IChwcm9wczoge1xuICBsb2NhdGlvbj86IExhdExvbkhlaWdodDtcbiAgaXNQaWNraW5nTmV3TG9jYXRpb246IGJvb2xlYW47XG4gIHRoZW1lPzogYW55O1xufSkgPT4ge1xuICBjb25zdCB7IGxvY2F0aW9uLCBpc1BpY2tpbmdOZXdMb2NhdGlvbiB9ID0gcHJvcHM7XG4gIGNvbnN0IHsgdCB9ID0gdXNlVHJhbnNsYXRpb24oKTtcbiAgbGV0IGxvY2F0aW9uVGV4dCA9IFwiLVwiO1xuICBpZiAobG9jYXRpb24pIHtcbiAgICBjb25zdCB7IGxvbmdpdHVkZSwgbGF0aXR1ZGUgfSA9IHByZXR0aWZ5Q29vcmRpbmF0ZXMoXG4gICAgICBsb2NhdGlvbi5sb25naXR1ZGUsXG4gICAgICBsb2NhdGlvbi5sYXRpdHVkZSxcbiAgICAgIHtcbiAgICAgICAgZGlnaXRzOiAyXG4gICAgICB9XG4gICAgKTtcbiAgICBsb2NhdGlvblRleHQgPSBgJHtsb25naXR1ZGV9ICR7bGF0aXR1ZGV9YDtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPEJveFxuICAgICAgY29sdW1uXG4gICAgICBjZW50ZXJlZFxuICAgICAgc3R5bGVkTWluV2lkdGg9XCIyMzBweFwiXG4gICAgICBjc3M9e2BcbiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6ICR7KHByb3BzOiBhbnkpID0+IHByb3BzLnRoZW1lLm1kfXB4KSB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIH1cbiAgICAgIGB9XG4gICAgPlxuICAgICAgPEJveCBjZW50ZXJlZD5cbiAgICAgICAgPFN0eWxlZEljb24gbGlnaHQgc3R5bGVkV2lkdGg9XCIxNnB4XCIgZ2x5cGg9e0dMWVBIUy5sb2NhdGlvbjJ9IC8+XG4gICAgICAgIDxTcGFjaW5nIHJpZ2h0PXsyfSAvPlxuICAgICAgICA8VGV4dCB0ZXh0TGlnaHQgZXh0cmFMYXJnZT5cbiAgICAgICAgICB7dChcImRpZmZUb29sLmxhYmVscy5hcmVhRmlsdGVyU2VsZWN0aW9uXCIpfVxuICAgICAgICA8L1RleHQ+XG4gICAgICA8L0JveD5cbiAgICAgIDxTcGFjaW5nIGJvdHRvbT17M30gLz5cbiAgICAgIDxCb3ggc3R5bGVkTWluSGVpZ2h0PVwiNDBweFwiPlxuICAgICAgICB7aXNQaWNraW5nTmV3TG9jYXRpb24gPyAoXG4gICAgICAgICAgPFRleHRcbiAgICAgICAgICAgIHRleHRMaWdodFxuICAgICAgICAgICAgZXh0cmFFeHRyYUxhcmdlXG4gICAgICAgICAgICBib2xkXG4gICAgICAgICAgICAvLyBVc2luZyBsZWdhY3kgTG9hZGVyLmpzeCBtZWFucyB3ZSBvdmVycmlkZSBhdCBhIGhpZ2hlciBsZXZlbCB0byBpbmhlcml0XG4gICAgICAgICAgICAvLyB0aGlzIGZpbGxzIHR5bGVcbiAgICAgICAgICAgIGNzcz17YFxuICAgICAgICAgICAgICBmaWxsOiAkeyh7IHRoZW1lIH06IGFueSkgPT4gdGhlbWUudGV4dExpZ2h0fTtcbiAgICAgICAgICAgIGB9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPExvYWRlclxuICAgICAgICAgICAgICBsaWdodFxuICAgICAgICAgICAgICBtZXNzYWdlPXtgUXVlcnlpbmcgJHtsb2NhdGlvbiA/IFwibmV3XCIgOiBcIlwifSBwb3NpdGlvbi4uLmB9XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8VGV4dCB0ZXh0TGlnaHQgYm9sZCBoZWFkaW5nIHRleHRBbGlnbkNlbnRlcj5cbiAgICAgICAgICAgIHtsb2NhdGlvblRleHR9XG4gICAgICAgICAgPC9UZXh0PlxuICAgICAgICApfVxuICAgICAgPC9Cb3g+XG4gICAgPC9Cb3g+XG4gICk7XG59O1xuXG5jb25zdCBHcm91cCA9IHN0eWxlZC5kaXZgXG4gIGJhY2tncm91bmQtY29sb3I6ICR7KHApID0+IHAudGhlbWUuZGFya1dpdGhPdmVybGF5fTtcbiAgcGFkZGluZzogMTVweDtcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuYDtcblxuY29uc3QgTG9jYXRpb25BbmREYXRlc0Rpc3BsYXlCb3ggPSBzdHlsZWQoQm94KS5hdHRycyh7XG4gIGNvbHVtbjogdHJ1ZVxufSlgXG4gIGNvbG9yOiAkeyhwKSA9PiBwLnRoZW1lLnRleHRMaWdodH07XG4gIHBhZGRpbmc6IDE1cHg7XG4gID4gJHtCb3h9OmZpcnN0LWNoaWxkIHtcbiAgICBtYXJnaW4tYm90dG9tOiAxM3B4O1xuICB9XG4gID4gZGl2ID4gZGl2OmZpcnN0LWNoaWxkIHtcbiAgICAvKiBUaGUgbGFiZWxzICovXG4gICAgbWFyZ2luLXJpZ2h0OiA1cHg7XG4gICAgbWluLXdpZHRoOiA1MHB4O1xuICB9XG5gO1xuXG5jb25zdCBMZWdlbmRJbWFnZSA9IGZ1bmN0aW9uIChwcm9wczogYW55KSB7XG4gIHJldHVybiAoXG4gICAgPGltZ1xuICAgICAgey4uLnByb3BzfVxuICAgICAgLy8gU2hvdyB0aGUgbGVnZW5kIG9ubHkgaWYgaXQgbG9hZHMgc3VjY2Vzc2Z1bGx5LCBzbyB3ZSBzdGFydCBvdXQgaGlkZGVuXG4gICAgICBzdHlsZT17eyBkaXNwbGF5OiBcIm5vbmVcIiwgbWFyZ2luVG9wOiBcIjEwcHhcIiB9fVxuICAgICAgb25Mb2FkPXsoZSkgPT4gKGUuY3VycmVudFRhcmdldC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiKX1cbiAgICAgIG9uRXJyb3I9eyhlKSA9PiAoZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIil9XG4gICAgLz5cbiAgKTtcbn07XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNwbGl0SXRlbShcbiAgc291cmNlSXRlbTogRGlmZmFibGVJdGVtLFxuICBzcGxpdERpcmVjdGlvbjogU3BsaXREaXJlY3Rpb25cbik6IFByb21pc2U8RGlmZmFibGVJdGVtPiB7XG4gIGNvbnN0IHRlcnJpYSA9IHNvdXJjZUl0ZW0udGVycmlhO1xuICBjb25zdCByZWYgPSBuZXcgU3BsaXRJdGVtUmVmZXJlbmNlKGNyZWF0ZUd1aWQoKSwgdGVycmlhKTtcbiAgcmVmLnNldFRyYWl0KENvbW1vblN0cmF0YS51c2VyLCBcInNwbGl0U291cmNlSXRlbUlkXCIsIHNvdXJjZUl0ZW0udW5pcXVlSWQpO1xuICB0ZXJyaWEuYWRkTW9kZWwocmVmKTtcbiAgYXdhaXQgcmVmLmxvYWRSZWZlcmVuY2UoKTtcbiAgcmV0dXJuIHJ1bkluQWN0aW9uKCgpID0+IHtcbiAgICBpZiAocmVmLnRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBFcnJvcihcImZhaWxlZCB0byBzcGxpdCBpdGVtXCIpO1xuICAgIH1cbiAgICBjb25zdCBuZXdJdGVtID0gcmVmLnRhcmdldCBhcyBEaWZmYWJsZUl0ZW07XG4gICAgbmV3SXRlbS5zZXRUcmFpdChDb21tb25TdHJhdGEudXNlciwgXCJzaG93XCIsIHRydWUpO1xuICAgIG5ld0l0ZW0uc2V0VHJhaXQoQ29tbW9uU3RyYXRhLnVzZXIsIFwic3BsaXREaXJlY3Rpb25cIiwgc3BsaXREaXJlY3Rpb24pO1xuICAgIG5ld0l0ZW0uc2V0VHJhaXQoQ29tbW9uU3RyYXRhLnVzZXIsIFwiY3VycmVudFRpbWVcIiwgbnVsbCk7XG4gICAgbmV3SXRlbS5zZXRUcmFpdChDb21tb25TdHJhdGEudXNlciwgXCJpbml0aWFsVGltZVNvdXJjZVwiLCBcIm5vbmVcIik7XG4gICAgaWYgKGhhc09wYWNpdHkobmV3SXRlbSkpIHtcbiAgICAgIC8vIFdlIHdhbnQgdG8gc2hvdyB0aGUgaXRlbSBvbiB0aGUgbWFwIG9ubHkgYWZ0ZXIgZGF0ZSBzZWxlY3Rpb24uIEF0IHRoZVxuICAgICAgLy8gc2FtZSB0aW1lIHdlIGNhbm5vdCBzZXQgYHNob3dgIHRvIGZhbHNlIGJlY2F1c2UgaWYgd2VcbiAgICAgIC8vIGRvIHNvLCBkYXRlIHBpY2tpbmcgd2hpY2ggcmVsaWVzIG9uIGZlYXR1cmUgcGlja2luZywgd2lsbCBub3Qgd29yay4gU29cbiAgICAgIC8vIHdlIHNpbXBseSBzZXQgdGhlIG9wYWNpdHkgb2YgdGhlIGl0ZW0gdG8gMC5cbiAgICAgIG5ld0l0ZW0uc2V0VHJhaXQoQ29tbW9uU3RyYXRhLnVzZXIsIFwib3BhY2l0eVwiLCAwKTtcbiAgICB9XG5cbiAgICAvLyBPdmVycmlkZSBmZWF0dXJlIGluZm8gdGVtcGxhdGUgYXMgdGhlIHBhcmVudCBmZWF0dXJlSW5mb1RlbXBsYXRlIG1pZ2h0XG4gICAgLy8gbm90IGJlIHJlbGV2YW50IGZvciB0aGUgZGlmZmVyZW5jZSBpdGVtLiBUaGlzIGhhcyB0byBiZSBkb25lIGluIHRoZSB1c2VyXG4gICAgLy8gc3RyYXR1bSB0byBvdmVycmlkZSB0ZW1wbGF0ZSBzZXQgaW4gZGVmaW5pdGlvbiBzdHJhdHVtLlxuICAgIHVwZGF0ZU1vZGVsRnJvbUpzb24obmV3SXRlbSwgQ29tbW9uU3RyYXRhLnVzZXIsIHtcbiAgICAgIGZlYXR1cmVJbmZvVGVtcGxhdGU6IHsgdGVtcGxhdGU6IFwiXCIgfVxuICAgIH0pO1xuXG4gICAgc2V0RGVmYXVsdERpZmZTdHlsZShuZXdJdGVtKTtcblxuICAgIC8vIFNldCB0aGUgZGVmYXVsdCBzdHlsZSB0byB0cnVlIGNvbG9yIHN0eWxlIGlmIGl0IGV4aXN0c1xuICAgIGNvbnN0IHRydWVDb2xvciA9IG5ld0l0ZW0uc3R5bGVTZWxlY3RhYmxlRGltZW5zaW9ucz8uWzBdPy5vcHRpb25zPy5maW5kKFxuICAgICAgKHN0eWxlKSA9PiBpc0RlZmluZWQoc3R5bGUubmFtZSkgJiYgc3R5bGUubmFtZS5zZWFyY2goL3RydWUvaSkgPj0gMFxuICAgICk7XG4gICAgaWYgKHRydWVDb2xvcj8uaWQpIHtcbiAgICAgIG5ld0l0ZW0uc3R5bGVTZWxlY3RhYmxlRGltZW5zaW9ucz8uWzBdPy5zZXREaW1lbnNpb25WYWx1ZShcbiAgICAgICAgQ29tbW9uU3RyYXRhLnVzZXIsXG4gICAgICAgIHRydWVDb2xvci5pZFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0ZXJyaWEub3ZlcmxheXMuYWRkKG5ld0l0ZW0pO1xuICAgIHJldHVybiBuZXdJdGVtO1xuICB9KTtcbn1cblxuLyoqXG4gKiBJZiB0aGUgaXRlbSBoYXMgb25seSBvbmUgYXZhaWxhYmxlIGRpZmYgc3R5bGUsIGF1dG8tc2VsZWN0IGl0XG4gKi9cbmZ1bmN0aW9uIHNldERlZmF1bHREaWZmU3R5bGUoaXRlbTogRGlmZmFibGVJdGVtKSB7XG4gIGlmIChpdGVtLmRpZmZTdHlsZUlkICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBhdmFpbGFibGVTdHlsZXMgPSBmaWx0ZXJPdXRVbmRlZmluZWQoXG4gICAgaXRlbS5hdmFpbGFibGVEaWZmU3R5bGVzLm1hcCgoZGlmZlN0eWxlSWQpID0+XG4gICAgICBpdGVtLnN0eWxlU2VsZWN0YWJsZURpbWVuc2lvbnM/LlswXT8ub3B0aW9ucz8uZmluZChcbiAgICAgICAgKHN0eWxlKSA9PiBzdHlsZS5pZCA9PT0gZGlmZlN0eWxlSWRcbiAgICAgIClcbiAgICApXG4gICk7XG5cbiAgaWYgKGF2YWlsYWJsZVN0eWxlcy5sZW5ndGggPT09IDEpIHtcbiAgICBpdGVtLnNldFRyYWl0KENvbW1vblN0cmF0YS51c2VyLCBcImRpZmZTdHlsZUlkXCIsIGF2YWlsYWJsZVN0eWxlc1swXS5pZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3BsaXRJdGVtKGl0ZW06IERpZmZhYmxlSXRlbSkge1xuICBjb25zdCB0ZXJyaWEgPSBpdGVtLnRlcnJpYTtcbiAgdGVycmlhLm92ZXJsYXlzLnJlbW92ZShpdGVtKTtcbiAgaWYgKGl0ZW0uc291cmNlUmVmZXJlbmNlICYmIHRlcnJpYS53b3JrYmVuY2guY29udGFpbnMoaXRlbSkgPT09IGZhbHNlKSB7XG4gICAgdGVycmlhLnJlbW92ZU1vZGVsUmVmZXJlbmNlcyhpdGVtLnNvdXJjZVJlZmVyZW5jZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZG9lc0ZlYXR1cmVCZWxvbmdUb0l0ZW0oXG4gIGZlYXR1cmU6IFRlcnJpYUZlYXR1cmUsXG4gIGl0ZW06IERpZmZhYmxlSXRlbVxuKTogYm9vbGVhbiB7XG4gIGlmICghTWFwcGFibGVNaXhpbi5pc01peGVkSW50byhpdGVtKSkgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBpbWFnZXJ5UHJvdmlkZXIgPSBmZWF0dXJlLmltYWdlcnlMYXllcj8uaW1hZ2VyeVByb3ZpZGVyO1xuICBpZiAoaW1hZ2VyeVByb3ZpZGVyID09PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIChcbiAgICBpdGVtLm1hcEl0ZW1zLmZpbmQoXG4gICAgICAobSkgPT4gSW1hZ2VyeVBhcnRzLmlzKG0pICYmIG0uaW1hZ2VyeVByb3ZpZGVyID09PSBpbWFnZXJ5UHJvdmlkZXJcbiAgICApICE9PSB1bmRlZmluZWRcbiAgKTtcbn1cblxuZnVuY3Rpb24gc2V0VGltZUZpbHRlckZyb21Mb2NhdGlvbihcbiAgaXRlbTogRGlmZmFibGVJdGVtLFxuICBsb2NhdGlvbjogTGF0TG9uSGVpZ2h0LFxuICBpbTogSW1hZ2VyeVByb3ZpZGVyXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3QgY2FydG8gPSBuZXcgQ2FydG9ncmFwaGljKFxuICAgIENlc2l1bU1hdGgudG9SYWRpYW5zKGxvY2F0aW9uLmxvbmdpdHVkZSksXG4gICAgQ2VzaXVtTWF0aC50b1JhZGlhbnMobG9jYXRpb24ubGF0aXR1ZGUpXG4gICk7XG4gIC8vIFdlIGp1c3QgbmVlZCB0byBzZXQgdGhpcyB0byBhIGhpZ2ggZW5vdWdoIGxldmVsIHN1cHBvcnRlZCBieSB0aGUgc2VydmljZVxuICBjb25zdCBsZXZlbCA9IDMwO1xuICBjb25zdCB0aWxlID0gaW0udGlsaW5nU2NoZW1lLnBvc2l0aW9uVG9UaWxlWFkoY2FydG8sIGxldmVsKTtcbiAgcmV0dXJuIGl0ZW0uc2V0VGltZUZpbHRlckZyb21Mb2NhdGlvbih7XG4gICAgcG9zaXRpb246IHtcbiAgICAgIGxhdGl0dWRlOiBsb2NhdGlvbi5sYXRpdHVkZSxcbiAgICAgIGxvbmdpdHVkZTogbG9jYXRpb24ubG9uZ2l0dWRlLFxuICAgICAgaGVpZ2h0OiBsb2NhdGlvbi5oZWlnaHRcbiAgICB9LFxuICAgIHRpbGVDb29yZHM6IHtcbiAgICAgIHg6IHRpbGUueCxcbiAgICAgIHk6IHRpbGUueSxcbiAgICAgIGxldmVsXG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gaGFzT3BhY2l0eShcbiAgbW9kZWw6IGFueVxuKTogbW9kZWwgaXMgSGFzVHJhaXQ8SW1hZ2VyeVByb3ZpZGVyVHJhaXRzLCBcIm9wYWNpdHlcIj4ge1xuICByZXR1cm4gaGFzVHJhaXRzKG1vZGVsLCBJbWFnZXJ5UHJvdmlkZXJUcmFpdHMsIFwib3BhY2l0eVwiKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgRGlmZlRvb2w7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/terriajs/lib/ReactViews/Tools/DiffTool/DiffTool.tsx\n\n}");

/***/ }),

/***/ "./packages/terriajs/lib/ReactViews/Tools/DiffTool/LocationPicker.tsx":
/*!****************************************************************************!*\
  !*** ./packages/terriajs/lib/ReactViews/Tools/DiffTool/LocationPicker.tsx ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ LocationPicker)\n/* harmony export */ });\n/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.reverse.js */ \"./node_modules/core-js/modules/es.array.reverse.js\");\n/* harmony import */ var core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_reverse_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"./node_modules/core-js/modules/web.dom-collections.iterator.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var mobx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! mobx */ \"./node_modules/mobx/dist/mobx.esm.js\");\n/* harmony import */ var mobx_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! mobx-react */ \"./node_modules/mobx-react/dist/mobxreact.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ \"./node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var terriajs_cesium_Source_Core_Ellipsoid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! terriajs-cesium/Source/Core/Ellipsoid */ \"./node_modules/terriajs-cesium/Source/Core/Ellipsoid.js\");\n/* harmony import */ var terriajs_cesium_Source_Core_Math__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! terriajs-cesium/Source/Core/Math */ \"./node_modules/terriajs-cesium/Source/Core/Math.js\");\n/* harmony import */ var _wwwroot_images_difference_pin_png__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../wwwroot/images/difference-pin.png */ \"./packages/terriajs/wwwroot/images/difference-pin.png\");\n/* harmony import */ var _Models_LocationMarkerUtils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../Models/LocationMarkerUtils */ \"./packages/terriajs/lib/Models/LocationMarkerUtils.ts\");\n/* harmony import */ var _Models_MapInteractionMode__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../Models/MapInteractionMode */ \"./packages/terriajs/lib/Models/MapInteractionMode.ts\");\n/* harmony import */ var _Loader__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../Loader */ \"./packages/terriajs/lib/ReactViews/Loader.tsx\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react/jsx-runtime */ \"./node_modules/react/jsx-runtime.js\");\n\nvar _class, _class2, _descriptor, _descriptor2, _descriptor3;\nfunction _initializerDefineProperty(e, i, r, l) { r && Object.defineProperty(e, i, { enumerable: r.enumerable, configurable: r.configurable, writable: r.writable, value: r.initializer ? r.initializer.call(l) : void 0 }); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _applyDecoratedDescriptor(i, e, r, n, l) { var a = {}; return Object.keys(n).forEach(function (i) { a[i] = n[i]; }), a.enumerable = !!a.enumerable, a.configurable = !!a.configurable, (\"value\" in a || a.initializer) && (a.writable = !0), a = r.slice().reverse().reduce(function (r, n) { return n(i, e, r) || r; }, a), l && void 0 !== a.initializer && (a.value = a.initializer ? a.initializer.call(l) : void 0, a.initializer = void 0), void 0 === a.initializer ? (Object.defineProperty(i, e, a), null) : a; }\nfunction _initializerWarningHelper(r, e) { throw Error(\"Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.\"); }\n\n\n\n\n\n\n\n\n\n\n\nlet LocationPicker = (0,mobx_react__WEBPACK_IMPORTED_MODULE_3__.observer)(_class = (_class2 = class LocationPicker extends react__WEBPACK_IMPORTED_MODULE_4__.Component {\n  constructor(props) {\n    super(props);\n    _initializerDefineProperty(this, \"pickMode\", _descriptor, this);\n    _initializerDefineProperty(this, \"currentPick\", _descriptor2, this);\n    _initializerDefineProperty(this, \"pickDisposer\", _descriptor3, this);\n    (0,mobx__WEBPACK_IMPORTED_MODULE_2__.makeObservable)(this);\n  }\n  setupPicker() {\n    const {\n      terria,\n      location,\n      onPicking,\n      onPicked\n    } = this.props;\n    this.pickMode = new _Models_MapInteractionMode__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n      message: \"\",\n      messageAsNode: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(\"div\", {}),\n      uiMode: _Models_MapInteractionMode__WEBPACK_IMPORTED_MODULE_9__.UIMode.Difference\n    });\n    addInteractionModeToMap(terria, this.pickMode);\n    if (location) showMarker(terria, location);\n    this.pickDisposer = (0,mobx__WEBPACK_IMPORTED_MODULE_2__.reaction)(() => this.pickMode.pickedFeatures, (0,mobx__WEBPACK_IMPORTED_MODULE_2__.action)(newPick => {\n      var _newPick$allFeaturesA;\n      if (newPick === undefined || newPick.pickPosition === undefined) {\n        return;\n      }\n      this.pickMode.customUi = () => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(_Loader__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n        message: \"Querying \".concat(location ? \"new\" : \"\", \" position...\")\n      });\n      const position = cartesianToDegrees(newPick.pickPosition);\n      showMarker(this.props.terria, position);\n      this.currentPick = newPick;\n      onPicking(position);\n      (_newPick$allFeaturesA = newPick.allFeaturesAvailablePromise) === null || _newPick$allFeaturesA === void 0 || _newPick$allFeaturesA.then(() => {\n        if (newPick === this.currentPick) {\n          onPicked(newPick, position);\n        }\n      });\n    }));\n  }\n  destroyPicker() {\n    var _this$pickDisposer;\n    const {\n      terria\n    } = this.props;\n    if (this.pickMode) {\n      removeInteractionModeFromMap(terria, this.pickMode);\n    }\n    (0,_Models_LocationMarkerUtils__WEBPACK_IMPORTED_MODULE_8__.removeMarker)(terria);\n    this.pickMode = undefined;\n    this.currentPick = undefined;\n    (_this$pickDisposer = this.pickDisposer) === null || _this$pickDisposer === void 0 || _this$pickDisposer.call(this);\n    this.pickDisposer = undefined;\n  }\n  componentDidMount() {\n    this.setupPicker();\n  }\n  componentDidUpdate() {\n    this.destroyPicker();\n    this.setupPicker();\n  }\n  componentWillUnmount() {\n    this.destroyPicker();\n  }\n  render() {\n    return null;\n  }\n}, _descriptor = _applyDecoratedDescriptor(_class2.prototype, \"pickMode\", [mobx__WEBPACK_IMPORTED_MODULE_2__.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"currentPick\", [mobx__WEBPACK_IMPORTED_MODULE_2__.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"pickDisposer\", [mobx__WEBPACK_IMPORTED_MODULE_2__.observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _applyDecoratedDescriptor(_class2.prototype, \"setupPicker\", [mobx__WEBPACK_IMPORTED_MODULE_2__.action], Object.getOwnPropertyDescriptor(_class2.prototype, \"setupPicker\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"destroyPicker\", [mobx__WEBPACK_IMPORTED_MODULE_2__.action], Object.getOwnPropertyDescriptor(_class2.prototype, \"destroyPicker\"), _class2.prototype), _class2)) || _class;\n\nfunction addInteractionModeToMap(terria, mode) {\n  terria.mapInteractionModeStack.push(mode);\n}\nfunction removeInteractionModeFromMap(terria, mode) {\n  const [currentMode] = terria.mapInteractionModeStack.slice(-1);\n  if (currentMode === mode) {\n    terria.mapInteractionModeStack.pop();\n  }\n}\nfunction showMarker(terria, location) {\n  (0,_Models_LocationMarkerUtils__WEBPACK_IMPORTED_MODULE_8__.addMarker)(terria, {\n    name: \"User selection\",\n    location,\n    customMarkerIcon: _wwwroot_images_difference_pin_png__WEBPACK_IMPORTED_MODULE_7__\n  });\n}\nfunction cartesianToDegrees(cartesian) {\n  const carto = terriajs_cesium_Source_Core_Ellipsoid__WEBPACK_IMPORTED_MODULE_5__[\"default\"].WGS84.cartesianToCartographic(cartesian);\n  return {\n    longitude: terriajs_cesium_Source_Core_Math__WEBPACK_IMPORTED_MODULE_6__[\"default\"].toDegrees(carto.longitude),\n    latitude: terriajs_cesium_Source_Core_Math__WEBPACK_IMPORTED_MODULE_6__[\"default\"].toDegrees(carto.latitude)\n  };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWNrYWdlcy90ZXJyaWFqcy9saWIvUmVhY3RWaWV3cy9Ub29scy9EaWZmVG9vbC9Mb2NhdGlvblBpY2tlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFrQkE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFHQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQTFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUEyQ0E7QUErQkE7QUFDQTtBQUNBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3RlcnJpYWpzLW1hcC8uL3BhY2thZ2VzL3RlcnJpYWpzL2xpYi9SZWFjdFZpZXdzL1Rvb2xzL0RpZmZUb29sL0xvY2F0aW9uUGlja2VyLnRzeD80NjU5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFjdGlvbiwgbWFrZU9ic2VydmFibGUsIG9ic2VydmFibGUsIHJlYWN0aW9uIH0gZnJvbSBcIm1vYnhcIjtcbmltcG9ydCB7IG9ic2VydmVyIH0gZnJvbSBcIm1vYngtcmVhY3RcIjtcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IENhcnRlc2lhbjMgZnJvbSBcInRlcnJpYWpzLWNlc2l1bS9Tb3VyY2UvQ29yZS9DYXJ0ZXNpYW4zXCI7XG5pbXBvcnQgRWxsaXBzb2lkIGZyb20gXCJ0ZXJyaWFqcy1jZXNpdW0vU291cmNlL0NvcmUvRWxsaXBzb2lkXCI7XG5pbXBvcnQgQ2VzaXVtTWF0aCBmcm9tIFwidGVycmlhanMtY2VzaXVtL1NvdXJjZS9Db3JlL01hdGhcIjtcbmltcG9ydCBtYXJrZXJJY29uIGZyb20gXCIuLi8uLi8uLi8uLi93d3dyb290L2ltYWdlcy9kaWZmZXJlbmNlLXBpbi5wbmdcIjtcbmltcG9ydCBMYXRMb25IZWlnaHQgZnJvbSBcIi4uLy4uLy4uL0NvcmUvTGF0TG9uSGVpZ2h0XCI7XG5pbXBvcnQgUGlja2VkRmVhdHVyZXMgZnJvbSBcIi4uLy4uLy4uL01hcC9QaWNrZWRGZWF0dXJlcy9QaWNrZWRGZWF0dXJlc1wiO1xuaW1wb3J0IHsgYWRkTWFya2VyLCByZW1vdmVNYXJrZXIgfSBmcm9tIFwiLi4vLi4vLi4vTW9kZWxzL0xvY2F0aW9uTWFya2VyVXRpbHNcIjtcbmltcG9ydCBNYXBJbnRlcmFjdGlvbk1vZGUsIHsgVUlNb2RlIH0gZnJvbSBcIi4uLy4uLy4uL01vZGVscy9NYXBJbnRlcmFjdGlvbk1vZGVcIjtcbmltcG9ydCBUZXJyaWEgZnJvbSBcIi4uLy4uLy4uL01vZGVscy9UZXJyaWFcIjtcbmltcG9ydCBMb2FkZXIgZnJvbSBcIi4uLy4uL0xvYWRlclwiO1xuXG5pbnRlcmZhY2UgUHJvcHNUeXBlIHtcbiAgdGVycmlhOiBUZXJyaWE7XG4gIGxvY2F0aW9uPzogTGF0TG9uSGVpZ2h0O1xuICBvblBpY2tpbmc6IChwaWNraW5nTG9jYXRpb246IExhdExvbkhlaWdodCkgPT4gdm9pZDtcbiAgb25QaWNrZWQ6IChcbiAgICBwaWNrZWRGZWF0dXJlczogUGlja2VkRmVhdHVyZXMsXG4gICAgcGlja2VkTG9jYXRpb246IExhdExvbkhlaWdodFxuICApID0+IHZvaWQ7XG59XG5cbkBvYnNlcnZlclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTG9jYXRpb25QaWNrZXIgZXh0ZW5kcyBDb21wb25lbnQ8UHJvcHNUeXBlPiB7XG4gIEBvYnNlcnZhYmxlIHByaXZhdGUgcGlja01vZGU/OiBNYXBJbnRlcmFjdGlvbk1vZGU7XG4gIEBvYnNlcnZhYmxlIHByaXZhdGUgY3VycmVudFBpY2s/OiBQaWNrZWRGZWF0dXJlcztcbiAgQG9ic2VydmFibGUgcHJpdmF0ZSBwaWNrRGlzcG9zZXI/OiAoKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wc1R5cGUpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgbWFrZU9ic2VydmFibGUodGhpcyk7XG4gIH1cblxuICBAYWN0aW9uXG4gIHNldHVwUGlja2VyKCkge1xuICAgIGNvbnN0IHsgdGVycmlhLCBsb2NhdGlvbiwgb25QaWNraW5nLCBvblBpY2tlZCB9ID0gdGhpcy5wcm9wcztcbiAgICB0aGlzLnBpY2tNb2RlID0gbmV3IE1hcEludGVyYWN0aW9uTW9kZSh7XG4gICAgICBtZXNzYWdlOiBcIlwiLFxuICAgICAgbWVzc2FnZUFzTm9kZTogPGRpdiAvPixcbiAgICAgIHVpTW9kZTogVUlNb2RlLkRpZmZlcmVuY2VcbiAgICB9KTtcbiAgICBhZGRJbnRlcmFjdGlvbk1vZGVUb01hcCh0ZXJyaWEsIHRoaXMucGlja01vZGUpO1xuICAgIGlmIChsb2NhdGlvbikgc2hvd01hcmtlcih0ZXJyaWEsIGxvY2F0aW9uKTtcblxuICAgIHRoaXMucGlja0Rpc3Bvc2VyID0gcmVhY3Rpb24oXG4gICAgICAoKSA9PiB0aGlzLnBpY2tNb2RlIS5waWNrZWRGZWF0dXJlcyxcbiAgICAgIGFjdGlvbigobmV3UGljazogUGlja2VkRmVhdHVyZXMgfCB1bmRlZmluZWQpID0+IHtcbiAgICAgICAgaWYgKG5ld1BpY2sgPT09IHVuZGVmaW5lZCB8fCBuZXdQaWNrLnBpY2tQb3NpdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5waWNrTW9kZSEuY3VzdG9tVWkgPSAoKSA9PiAoXG4gICAgICAgICAgPExvYWRlciBtZXNzYWdlPXtgUXVlcnlpbmcgJHtsb2NhdGlvbiA/IFwibmV3XCIgOiBcIlwifSBwb3NpdGlvbi4uLmB9IC8+XG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBjYXJ0ZXNpYW5Ub0RlZ3JlZXMobmV3UGljay5waWNrUG9zaXRpb24pO1xuICAgICAgICBzaG93TWFya2VyKHRoaXMucHJvcHMudGVycmlhLCBwb3NpdGlvbik7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50UGljayA9IG5ld1BpY2s7XG4gICAgICAgIG9uUGlja2luZyhwb3NpdGlvbik7XG4gICAgICAgIG5ld1BpY2suYWxsRmVhdHVyZXNBdmFpbGFibGVQcm9taXNlPy50aGVuKCgpID0+IHtcbiAgICAgICAgICBpZiAobmV3UGljayA9PT0gdGhpcy5jdXJyZW50UGljaykge1xuICAgICAgICAgICAgb25QaWNrZWQobmV3UGljaywgcG9zaXRpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBAYWN0aW9uXG4gIGRlc3Ryb3lQaWNrZXIoKSB7XG4gICAgY29uc3QgeyB0ZXJyaWEgfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKHRoaXMucGlja01vZGUpIHtcbiAgICAgIHJlbW92ZUludGVyYWN0aW9uTW9kZUZyb21NYXAodGVycmlhLCB0aGlzLnBpY2tNb2RlKTtcbiAgICB9XG4gICAgcmVtb3ZlTWFya2VyKHRlcnJpYSk7XG4gICAgdGhpcy5waWNrTW9kZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLmN1cnJlbnRQaWNrID0gdW5kZWZpbmVkO1xuICAgIHRoaXMucGlja0Rpc3Bvc2VyPy4oKTtcbiAgICB0aGlzLnBpY2tEaXNwb3NlciA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuc2V0dXBQaWNrZXIoKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSgpIHtcbiAgICB0aGlzLmRlc3Ryb3lQaWNrZXIoKTtcbiAgICB0aGlzLnNldHVwUGlja2VyKCk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICB0aGlzLmRlc3Ryb3lQaWNrZXIoKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5mdW5jdGlvbiBhZGRJbnRlcmFjdGlvbk1vZGVUb01hcCh0ZXJyaWE6IFRlcnJpYSwgbW9kZTogTWFwSW50ZXJhY3Rpb25Nb2RlKSB7XG4gIHRlcnJpYS5tYXBJbnRlcmFjdGlvbk1vZGVTdGFjay5wdXNoKG1vZGUpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVJbnRlcmFjdGlvbk1vZGVGcm9tTWFwKFxuICB0ZXJyaWE6IFRlcnJpYSxcbiAgbW9kZTogTWFwSW50ZXJhY3Rpb25Nb2RlXG4pIHtcbiAgY29uc3QgW2N1cnJlbnRNb2RlXSA9IHRlcnJpYS5tYXBJbnRlcmFjdGlvbk1vZGVTdGFjay5zbGljZSgtMSk7XG4gIGlmIChjdXJyZW50TW9kZSA9PT0gbW9kZSkge1xuICAgIHRlcnJpYS5tYXBJbnRlcmFjdGlvbk1vZGVTdGFjay5wb3AoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzaG93TWFya2VyKHRlcnJpYTogVGVycmlhLCBsb2NhdGlvbjogTGF0TG9uSGVpZ2h0KSB7XG4gIGFkZE1hcmtlcih0ZXJyaWEsIHtcbiAgICBuYW1lOiBcIlVzZXIgc2VsZWN0aW9uXCIsXG4gICAgbG9jYXRpb24sXG4gICAgY3VzdG9tTWFya2VySWNvbjogbWFya2VySWNvblxuICB9KTtcbn1cblxuZnVuY3Rpb24gY2FydGVzaWFuVG9EZWdyZWVzKGNhcnRlc2lhbjogQ2FydGVzaWFuMykge1xuICBjb25zdCBjYXJ0byA9IEVsbGlwc29pZC5XR1M4NC5jYXJ0ZXNpYW5Ub0NhcnRvZ3JhcGhpYyhjYXJ0ZXNpYW4pO1xuICByZXR1cm4ge1xuICAgIGxvbmdpdHVkZTogQ2VzaXVtTWF0aC50b0RlZ3JlZXMoY2FydG8ubG9uZ2l0dWRlKSxcbiAgICBsYXRpdHVkZTogQ2VzaXVtTWF0aC50b0RlZ3JlZXMoY2FydG8ubGF0aXR1ZGUpXG4gIH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./packages/terriajs/lib/ReactViews/Tools/DiffTool/LocationPicker.tsx\n\n}");

/***/ }),

/***/ "./packages/terriajs/wwwroot/images/difference-pin.png":
/*!*************************************************************!*\
  !*** ./packages/terriajs/wwwroot/images/difference-pin.png ***!
  \*************************************************************/
/***/ ((module) => {

module.exports = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAA2CAYAAAAyEzKAAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGaADAAQAAAABAAAANgAAAAAbYi+LAAADOUlEQVRYCe1YPWgUQRT+3pEoqEWilSRBjSGNWKhga7DwBwTRKgqChXVM0igKGhRMFCXRQhsbFWOlIAhBm5ythRaCmCBGBAmIwRSx0EjW783tbnb3Zvbn7gqLe7A3M9977/tm3s7OLidIMW8QuyE4ihW2wA5em3it5/WL+A94+IAS3rJ9LhNsHSZJ3POYPoSTxC8xuTfpd44Fs/RdwTgmRZgZsZiIN4QOup/x2huJKdYVvOE0j8s4vgWJoQgFdpJ8ildH4Ky5FQoIDlPovXIYEW8EG7CIdxToqZk4mSj4hDbskhEslYxvETcbKqCkOmHlpQnLtJHAPK81CjTUBH9Yq80tJO3PJSD4wthH3LKz3NK6604xbytbt+nEBf0tDDzkjgo9L1jfE1rfAOF9vIGfeMLxkQCztuTXe9Jlda6CC1iH01EBdZkxcXYXdJxiXSrSmRKgrrKM2ol8vJyR36kieky4TfDd7aQny0/+Eu/Jx1QSYE9dfvLrSqZSSXjEcJsfs8UYPPsImtLnpIdbUg+38IipIhSeusA5dOO+DOC3dwdr8RlniF1nJdLK7XHL91aOlUFMM7ivirwaWCb0ldPZwnh9xrJsWm5jv5ZLj4C7WdG+v5Xt9pwCmnJPfyoi7XjK2c0o0DBTPuWlGRE+WCuc3bWGCSgR+QxvIGLI2zHJds706/+Z4yqUz1ilXOxS9S9LdtnH62vIY/h8llDEjNvwmELmbVaziuYrT8RiIqaGJZyP+It3mW94IpnWB5CfQmXeuH2RuHxdwWt+GvUlg2MriTiHWbaVyDi7W4kftgVaRfwPtYe2BCfm4YHrA88q4hNdYBu+CZ3kFccSV37RFeMU4azmmTjmSozhJYya+Bi4OnCKmJBuftIIz9s0U/823EoLSRXRY50i1psZktJv4kKgumPdwskwbumX3NIHkjgn8IplOliFJ4DUlYSxHgbY13dJ1JYprHim5RLhi2eG5/VEjI1jg8dA+yCXiEltxdUYRXIcc8YHue5JkOKdZYF84ypy5+ZfScBeQ9sUKVS0Zrma5SpUgULBzd3VLFehChQK/g93l/7roxa0OddTbCWe+f9qiS9h8z9WTg38A1O1vXOERmoNAAAAAElFTkSuQmCC";

/***/ })

}]);